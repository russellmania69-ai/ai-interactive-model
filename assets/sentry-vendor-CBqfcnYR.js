const Ma=Object.prototype.toString;function Ht(e){switch(Ma.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Be(e,Error)}}function en(e,t){return Ma.call(e)===`[object ${t}]`}function ei(e){return en(e,"ErrorEvent")}function zi(e){return en(e,"DOMError")}function dd(e){return en(e,"DOMException")}function Me(e){return en(e,"String")}function ti(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function ni(e){return e===null||ti(e)||typeof e!="object"&&typeof e!="function"}function ft(e){return en(e,"Object")}function wr(e){return typeof Event<"u"&&Be(e,Event)}function fd(e){return typeof Element<"u"&&Be(e,Element)}function Oa(e){return en(e,"RegExp")}function je(e){return!!(e&&e.then&&typeof e.then=="function")}function pd(e){return ft(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Na(e){return typeof e=="number"&&e!==e}function Be(e,t){try{return e instanceof t}catch{return!1}}function Da(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Ut(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function is(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let s=Math.max(t-60,0);s<5&&(s=0);let i=Math.min(s+140,r);return i>r-5&&(i=r),i===r&&(s=Math.max(i-140,0)),n=n.slice(s,i),s>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function sr(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{Da(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function hd(e,t,n=!1){return Me(e)?Oa(t)?t.test(e):Me(t)?n?e===t:e.includes(t):!1:!1}function tn(e,t=[],n=!1){return t.some(r=>hd(e,r,n))}function La(e,t,n=250,r,s,i,o){if(!i.exception||!i.exception.values||!o||!Be(o.originalException,Error))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=md(Es(e,t,s,o.originalException,r,i.exception.values,a,0),n))}function Es(e,t,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(Be(r[s],Error)){Gi(o,a);const u=e(t,r[s]),l=c.length;qi(u,s,l,a),c=Es(e,t,n,r[s],s,[u,...c],u,l)}return Array.isArray(r.errors)&&r.errors.forEach((u,l)=>{if(Be(u,Error)){Gi(o,a);const d=e(t,u),f=c.length;qi(d,`errors[${l}]`,f,a),c=Es(e,t,n,u,s,[d,...c],d,f)}}),c}function Gi(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function qi(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function md(e,t){return e.map(n=>(n.value&&(n.value=Ut(n.value,t)),n))}function Fn(e){return e&&e.Math==Math?e:void 0}const O=typeof globalThis=="object"&&Fn(globalThis)||typeof window=="object"&&Fn(window)||typeof self=="object"&&Fn(self)||typeof global=="object"&&Fn(global)||(function(){return this})()||{};function ri(){return O}function Pa(e,t,n){const r=n||O,s=r.__SENTRY__=r.__SENTRY__||{};return s[e]||(s[e]=t())}const jt=ri(),gd=80;function Qe(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||gd;for(;n&&i++<r&&(u=_d(n,l),!(u==="html"||i>1&&o+s.length*c+u.length>=d));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function _d(e,t){const n=e,r=[];let s,i,o,a,c;if(!n||!n.tagName)return"";if(jt.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter(d=>n.getAttribute(d)).map(d=>[d,n.getAttribute(d)]):null;if(u&&u.length)u.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&Me(s))for(i=s.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)o=l[c],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function $a(){try{return jt.document.location.href}catch{return""}}function Fa(e){return jt.document&&jt.document.querySelector?jt.document.querySelector(e):null}function Ba(e){if(!jt.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const nn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,yd="Sentry Logger ",ir=["debug","info","warn","error","log","assert","trace"],or={};function Ze(e){if(!("console"in O))return e();const t=O.console,n={},r=Object.keys(or);r.forEach(s=>{const i=or[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function Sd(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return nn?ir.forEach(n=>{t[n]=(...r)=>{e&&Ze(()=>{O.console[n](`${yd}[${n}]:`,...r)})}}):ir.forEach(n=>{t[n]=()=>{}}),t}const m=Sd(),bd=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Ed(e){return e==="http"||e==="https"}function _t(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function Ha(e){const t=bd.exec(e);if(!t){Ze(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",i,o="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const d=u.match(/^\d+/);d&&(u=d[0])}return Ua({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function Ua(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function vd(e){if(!nn)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(m.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?Ed(r)?t&&isNaN(parseInt(t,10))?(m.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(m.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(m.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function ja(e){const t=typeof e=="string"?Ha(e):Ua(e);if(!(!t||!vd(t)))return t}class xe extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function K(e,t,n){if(!(t in e))return;const r=e[t],s=n(r);typeof s=="function"&&Wa(s,r),e[t]=s}function He(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{nn&&m.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Wa(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,He(e,"__sentry_original__",t)}catch{}}function si(e){return e.__sentry_original__}function Td(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function za(e){if(Ht(e))return{message:e.message,name:e.name,stack:e.stack,...Vi(e)};if(wr(e)){const t={type:e.type,target:Yi(e.target),currentTarget:Yi(e.currentTarget),...Vi(e)};return typeof CustomEvent<"u"&&Be(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Yi(e){try{return fd(e)?Qe(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Vi(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Id(e,t=40){const n=Object.keys(za(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Ut(n[0],t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:Ut(s,t)}return""}function ce(e){return vs(e,new Map)}function vs(e,t){if(wd(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const s of Object.keys(e))typeof e[s]<"u"&&(r[s]=vs(e[s],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(s=>{r.push(vs(s,t))}),r}return e}function wd(e){if(!ft(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const Ga=50,Xi=/\(error: (.*)\)/,Ki=/captureMessage|captureException/;function qa(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const s=[],i=n.split(`
`);for(let o=r;o<i.length;o++){const a=i[o];if(a.length>1024)continue;const c=Xi.test(a)?a.replace(Xi,"$1"):a;if(!c.match(/\S*Error: /)){for(const u of t){const l=u(c);if(l){s.push(l);break}}if(s.length>=Ga)break}}return Cd(s)}}function kd(e){return Array.isArray(e)?qa(...e):e}function Cd(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),Ki.test(t[t.length-1].function||"")&&(t.pop(),Ki.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,Ga).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const os="<anonymous>";function Ue(e){try{return!e||typeof e!="function"?os:e.name||os}catch{return os}}const er={},Ji={};function yt(e,t){er[e]=er[e]||[],er[e].push(t)}function St(e,t){Ji[e]||(t(),Ji[e]=!0)}function we(e,t){const n=e&&er[e];if(n)for(const r of n)try{r(t)}catch(s){nn&&m.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Ue(r)}
Error:`,s)}}function Ya(e){const t="console";yt(t,e),St(t,Rd)}function Rd(){"console"in O&&ir.forEach(function(e){e in O.console&&K(O.console,e,function(t){return or[e]=t,function(...n){we("console",{args:n,level:e});const s=or[e];s&&s.apply(O.console,n)}})})}function W(){const e=O,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function Va(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Xe(e){const{message:t,event_id:n}=e;if(t)return t;const r=Va(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Ts(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function pt(e,t){const n=Va(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const i={...s&&s.data,...t.data};n.mechanism.data=i}}function xd(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map(i=>is(i,0)),t.context_line=is(e[Math.min(r-1,s)],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map(i=>is(i,0))}function Qi(e){if(e&&e.__sentry_captured__)return!0;try{He(e,"__sentry_captured__",!0)}catch{}return!1}function ar(e){return Array.isArray(e)?e:[e]}const Mt=O,Ad=1e3;let Zi,Is,ws;function Xa(e){yt("dom",e),St("dom",Md)}function Md(){if(!Mt.document)return;const e=we.bind(null,"dom"),t=eo(e,!0);Mt.document.addEventListener("click",t,!1),Mt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=Mt[n]&&Mt[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(K(r,"addEventListener",function(s){return function(i,o,a){if(i==="click"||i=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},l=u[i]=u[i]||{refCount:0};if(!l.handler){const d=eo(e);l.handler=d,s.call(this,i,d,a)}l.refCount++}catch{}return s.call(this,i,o,a)}}),K(r,"removeEventListener",function(s){return function(i,o,a){if(i==="click"||i=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__||{},l=u[i];l&&(l.refCount--,l.refCount<=0&&(s.call(this,i,l.handler,a),l.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return s.call(this,i,o,a)}}))})}function Od(e){if(e.type!==Is)return!1;try{if(!e.target||e.target._sentryId!==ws)return!1}catch{}return!0}function Nd(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function eo(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=Dd(n);if(Nd(n.type,r))return;He(n,"_sentryCaptured",!0),r&&!r._sentryId&&He(r,"_sentryId",W());const s=n.type==="keypress"?"input":n.type;Od(n)||(e({event:n,name:s,global:t}),Is=n.type,ws=r?r._sentryId:void 0),clearTimeout(Zi),Zi=Mt.setTimeout(()=>{ws=void 0,Is=void 0},Ad)}}function Dd(e){try{return e.target}catch{return null}}const cr=ri();function Ka(){if(!("fetch"in cr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function ks(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ja(){if(typeof EdgeRuntime=="string")return!0;if(!Ka())return!1;if(ks(cr.fetch))return!0;let e=!1;const t=cr.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=ks(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){nn&&m.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Ld(){return"ReportingObserver"in cr}function kr(e){const t="fetch";yt(t,e),St(t,Pd)}function Pd(){Ja()&&K(O,"fetch",function(e){return function(...t){const{method:n,url:r}=$d(t),s={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return we("fetch",{...s}),e.apply(O,t).then(i=>{const o={...s,endTimestamp:Date.now(),response:i};return we("fetch",o),i},i=>{const o={...s,endTimestamp:Date.now(),error:i};throw we("fetch",o),i})}})}function Cs(e,t){return!!e&&typeof e=="object"&&!!e[t]}function to(e){return typeof e=="string"?e:e?Cs(e,"url")?e.url:e.toString?e.toString():"":""}function $d(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:to(n),method:Cs(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:to(t),method:Cs(t,"method")?String(t.method).toUpperCase():"GET"}}let Bn=null;function Qa(e){const t="error";yt(t,e),St(t,Fd)}function Fd(){Bn=O.onerror,O.onerror=function(e,t,n,r,s){return we("error",{column:r,error:s,line:n,msg:e,url:t}),Bn&&!Bn.__SENTRY_LOADER__?Bn.apply(this,arguments):!1},O.onerror.__SENTRY_INSTRUMENTED__=!0}let Hn=null;function Za(e){const t="unhandledrejection";yt(t,e),St(t,Bd)}function Bd(){Hn=O.onunhandledrejection,O.onunhandledrejection=function(e){return we("unhandledrejection",e),Hn&&!Hn.__SENTRY_LOADER__?Hn.apply(this,arguments):!0},O.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Un=ri();function Hd(){const e=Un.chrome,t=e&&e.app&&e.app.runtime,n="history"in Un&&!!Un.history.pushState&&!!Un.history.replaceState;return!t&&n}const cn=O;let jn;function kn(e){const t="history";yt(t,e),St(t,Ud)}function Ud(){if(!Hd())return;const e=cn.onpopstate;cn.onpopstate=function(...n){const r=cn.location.href,s=jn;if(jn=r,we("history",{from:s,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const i=jn,o=String(s);jn=o,we("history",{from:i,to:o})}return n.apply(this,r)}}K(cn.history,"pushState",t),K(cn.history,"replaceState",t)}const jd=O,$e="__sentry_xhr_v3__";function Cr(e){yt("xhr",e),St("xhr",Wd)}function Wd(){if(!jd.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;K(e,"open",function(t){return function(...n){const r=Date.now(),s=Me(n[0])?n[0].toUpperCase():void 0,i=zd(n[1]);if(!s||!i)return t.apply(this,n);this[$e]={method:s,url:i,request_headers:{}},s==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[$e];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const c={args:[s,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this};we("xhr",c)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?K(this,"onreadystatechange",function(a){return function(...c){return o(),a.apply(this,c)}}):this.addEventListener("readystatechange",o),K(this,"setRequestHeader",function(a){return function(...c){const[u,l]=c,d=this[$e];return d&&Me(u)&&Me(l)&&(d.request_headers[u.toLowerCase()]=l),a.apply(this,c)}}),t.apply(this,n)}}),K(e,"send",function(t){return function(...n){const r=this[$e];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const s={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return we("xhr",s),t.apply(this,n)}})}function zd(e){if(Me(e))return e;try{return e.toString()}catch{}}function Gd(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function qd(){return"npm"}function ec(){return!Gd()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function at(e,t){return e.require(t)}function ht(e){let t;try{t=at(module,e)}catch{}try{const{cwd:n}=at(module,"process");t=at(module,`${n()}/node_modules/${e}`)}catch{}return t}function Rs(){return typeof window<"u"&&(!ec()||Yd())}function Yd(){return O.process!==void 0&&O.process.type==="renderer"}function Vd(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(s){if(e)return t.has(s)?!0:(t.add(s),!1);for(let i=0;i<t.length;i++)if(t[i]===s)return!0;return t.push(s),!1}function r(s){if(e)t.delete(s);else for(let i=0;i<t.length;i++)if(t[i]===s){t.splice(i,1);break}}return[n,r]}function Te(e,t=100,n=1/0){try{return xs("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function tc(e,t=3,n=100*1024){const r=Te(e,t);return Qd(r)>n?tc(e,t-1,n):r}function xs(e,t,n=1/0,r=1/0,s=Vd()){const[i,o]=s;if(t==null||["number","boolean","string"].includes(typeof t)&&!Na(t))return t;const a=Xd(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return xs("",p,c-1,r,s)}catch{}const l=Array.isArray(t)?[]:{};let d=0;const f=za(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(d>=r){l[p]="[MaxProperties ~]";break}const h=f[p];l[p]=xs(p,h,c-1,r,s),d++}return o(t),l}function Xd(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Da(t))return"[VueViewModel]";if(pd(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${Ue(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=Kd(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Kd(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function Jd(e){return~-encodeURI(e).split(/%..|./).length}function Qd(e){return Jd(JSON.stringify(e))}function Zd(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const s=e[r];s==="."?e.splice(r,1):s===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const ef=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function tf(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=ef.exec(t);return n?n.slice(1):[]}function no(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const s=r>=0?e[r]:"/";s&&(t=`${s}/${t}`,n=s.charAt(0)==="/")}return t=Zd(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function ro(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function nf(e,t){e=no(e).slice(1),t=no(t).slice(1);const n=ro(e.split("/")),r=ro(t.split("/")),s=Math.min(n.length,r.length);let i=s;for(let a=0;a<s;a++)if(n[a]!==r[a]){i=a;break}let o=[];for(let a=i;a<n.length;a++)o.push("..");return o=o.concat(r.slice(i)),o.join("/")}function rf(e,t){return tf(e)[2]}var Le;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(Le||(Le={}));function zt(e){return new _e(t=>{t(e)})}function ii(e){return new _e((t,n)=>{n(e)})}class _e{constructor(t){_e.prototype.__init.call(this),_e.prototype.__init2.call(this),_e.prototype.__init3.call(this),_e.prototype.__init4.call(this),this._state=Le.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new _e((r,s)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new _e((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,t&&t()},o=>{i=!0,s=o,t&&t()}).then(()=>{if(i){r(s);return}n(s)})})}__init(){this._resolve=t=>{this._setResult(Le.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Le.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===Le.PENDING){if(je(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Le.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Le.RESOLVED&&n[1](this._value),this._state===Le.REJECTED&&n[2](this._value),n[0]=!0)})}}}function sf(e){const t=[];function n(){return e===void 0||t.length<e}function r(o){return t.splice(t.indexOf(o),1)[0]}function s(o){if(!n())return ii(new xe("Not adding Promise because buffer limit was reached."));const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(o){return new _e((a,c)=>{let u=t.length;if(!u)return a(!0);const l=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{zt(d).then(()=>{--u||(clearTimeout(l),a(!0))},c)})})}return{$:t,add:s,drain:i}}function dt(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Gt(e){return e.split(/[\?#]/,1)[0]}function ur(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function of(e,t={}){const n=e.method&&e.method.toUpperCase();let r="",s="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,s="route"):(e.originalUrl||e.url)&&(r=Gt(e.originalUrl||e.url||""));let i="";return t.method&&n&&(i+=n),t.method&&t.path&&(i+=" "),t.path&&r&&(i+=r),[i,s]}const af=["fatal","error","warning","log","info","debug"];function nc(e){return e==="warn"?"warning":af.includes(e)?e:"log"}const rc=1e3;function Cn(){return Date.now()/rc}function cf(){const{performance:e}=O;if(!e||!e.now)return Cn;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/rc}const bt=cf(),le=(()=>{const{performance:e}=O;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,o=e.timing&&e.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,u=c<t;return i||u?s<=c?e.timeOrigin:o:r})(),As="baggage",sc="sentry-",uf=/^sentry-/,lf=8192;function ic(e){if(!Me(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((r,s)=>{const i=so(s);for(const o of Object.keys(i))r[o]=i[o];return r},{});else{if(!e)return;t=so(e)}const n=Object.entries(t).reduce((r,[s,i])=>{if(s.match(uf)){const o=s.slice(sc.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function oc(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${sc}${r}`]=s),n),{});return df(t)}function so(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(t[n]=r,t),{})}function df(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=s===0?i:`${t},${i}`;return o.length>lf?(nn&&m.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):o},"")}const ac=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function oi(e){if(!e)return;const t=e.match(ac);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function ff(e,t){const n=oi(e),r=ic(t),{traceId:s,parentSpanId:i,parentSampled:o}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:s||W(),parentSpanId:i||W().substring(16),spanId:W().substring(16),sampled:o,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:s||W(),spanId:W().substring(16)}}}function cc(e,t){const n=oi(e),r=ic(t),{traceId:s,parentSpanId:i,parentSampled:o}=n||{};return n?{traceId:s||W(),parentSpanId:i||W().substring(16),spanId:W().substring(16),sampled:o,dsc:r||{}}:{traceId:s||W(),spanId:W().substring(16)}}function ai(e=W(),t=W().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function We(e,t=[]){return[e,t]}function pf(e,t){const[n,r]=e;return[n,[...r,t]]}function qt(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function hf(e,t){return qt(e,(n,r)=>t.includes(r))}function Ms(e,t){return(t||new TextEncoder).encode(e)}function uc(e,t){const[n,r]=e;let s=JSON.stringify(n);function i(o){typeof s=="string"?s=typeof o=="string"?s+o:[Ms(s,t),o]:s.push(typeof o=="string"?Ms(o,t):o)}for(const o of r){const[a,c]=o;if(i(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)i(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(Te(c))}i(u)}}return typeof s=="string"?s:mf(s)}function mf(e){const t=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function gf(e,t,n){let r=typeof e=="string"?t.encode(e):e;function s(c){const u=r.subarray(0,c);return r=r.subarray(c+1),u}function i(){let c=r.indexOf(10);return c<0&&(c=r.length),JSON.parse(n.decode(s(c)))}const o=i(),a=[];for(;r.length;){const c=i(),u=typeof c.length=="number"?c.length:void 0;a.push([c,u?s(u):i()])}return[o,a]}function _f(e,t){const n=typeof e.data=="string"?Ms(e.data,t):e.data;return[ce({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const yf={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function io(e){return yf[e]}function ci(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function lc(e,t,n,r){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:_t(r)},...s&&{trace:ce({...s})}}}function Sf(e,t,n){const r=[{type:"client_report"},{timestamp:Cn(),discarded_events:e}];return We(t?{dsn:t}:{},[r])}const bf=60*1e3;function dc(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?bf:r-t}function Ef(e,t){return e[t]||e.all||0}function fc(e,t,n=Date.now()){return Ef(e,t)>n}function pc(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,u,,,l]=a.split(":",5),d=parseInt(c,10),f=(isNaN(d)?60:d)*1e3;if(!u)s.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!l||l.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else o?s.all=r+dc(o,r):t===429&&(s.all=r+60*1e3);return s}function vf(e,t){return e(t.stack||"",1)}function Tf(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=vf(e,t);return r.length&&(n.stacktrace={frames:r}),n}function If(e,t){return e??t()}function N(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}const v=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Rn="production";function ui(){return Pa("globalEventProcessors",()=>[])}function wf(e){ui().push(e)}function lr(e,t,n,r=0){return new _e((s,i)=>{const o=e[r];if(t===null||typeof o!="function")s(t);else{const a=o({...t},n);v&&o.id&&a===null&&m.log(`Event processor "${o.id}" dropped event`),je(a)?a.then(c=>lr(e,c,n,r+1).then(s)).then(null,i):lr(e,a,n,r+1).then(s).then(null,i)}})}function hc(e){const t=bt(),n={sid:W(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>kf(n)};return e&&mt(n,e),n}function mt(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||bt(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:W()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function mc(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),mt(e,n)}function kf(e){return ce({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const Cf=0,gc=1;function li(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:i,status:o,tags:a,origin:c}=z(e);return ce({data:r,op:s,parent_span_id:i,span_id:t,status:o,tags:a,trace_id:n,origin:c})}function Rr(e){const{traceId:t,spanId:n}=e.spanContext(),r=di(e);return ai(t,n,r)}function xr(e){return typeof e=="number"?oo(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?oo(e.getTime()):bt()}function oo(e){return e>9999999999?e/1e3:e}function z(e){return Rf(e)?e.getSpanJSON():typeof e.toJSON=="function"?e.toJSON():{}}function Rf(e){return typeof e.getSpanJSON=="function"}function di(e){const{traceFlags:t}=e.spanContext();return!!(t&gc)}function fi(e,t,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||W(),timestamp:t.timestamp||Cn()},u=n.integrations||e.integrations.map(y=>y.name);xf(c,e),Of(c,u),t.type===void 0&&Af(c,e.stackParser);const l=Df(r,n.captureContext);n.mechanism&&pt(c,n.mechanism);const d=s&&s.getEventProcessors?s.getEventProcessors():[],f=qf().getScopeData();if(i){const y=i.getScopeData();lo(f,y)}if(l){const y=l.getScopeData();lo(f,y)}const p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),Sc(c,f);const h=[...d,...ui(),...f.eventProcessors];return lr(h,c,n).then(y=>(y&&Mf(y),typeof o=="number"&&o>0?Nf(y,o,a):y))}function xf(e,t){const{environment:n,release:r,dist:s,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:Rn),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&s!==void 0&&(e.dist=s),e.message&&(e.message=Ut(e.message,i));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=Ut(o.value,i));const a=e.request;a&&a.url&&(a.url=Ut(a.url,i))}const ao=new WeakMap;function Af(e,t){const n=O._sentryDebugIds;if(!n)return;let r;const s=ao.get(t);s?r=s:(r=new Map,ao.set(t,r));const i=Object.keys(n).reduce((o,a)=>{let c;const u=r.get(a);u?c=u:(c=t(a),r.set(a,c));for(let l=c.length-1;l>=0;l--){const d=c[l];if(d.filename){o[d.filename]=n[a];break}}return o},{});try{e.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=i[a.filename])})})}catch{}}function Mf(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function Of(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function Nf(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:Te(s.data,t,n)}}))},...e.user&&{user:Te(e.user,t,n)},...e.contexts&&{contexts:Te(e.contexts,t,n)},...e.extra&&{extra:Te(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Te(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>{const i=z(s).data;return i&&(s.data=Te(i,t,n)),s})),r}function Df(e,t){if(!t)return e;const n=e?e.clone():new Fe;return n.update(t),n}function Lf(e){if(e)return Pf(e)?{captureContext:e}:Ff(e)?{captureContext:e}:e}function Pf(e){return e instanceof Fe||typeof e=="function"}const $f=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Ff(e){return Object.keys(e).some(t=>$f.includes(t))}function Ar(e,t){return G().captureException(e,Lf(t))}function Os(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return G().captureMessage(e,n,r)}function Mr(e,t){return G().captureEvent(e,t)}function pT(e){G().configureScope(e)}function et(e,t){G().addBreadcrumb(e,t)}function Bf(e,t){G().setContext(e,t)}function hT(e){G().setExtras(e)}function mT(e,t){G().setExtra(e,t)}function gT(e){G().setTags(e)}function _T(e,t){G().setTag(e,t)}function yT(e){G().setUser(e)}function Et(...e){const t=G();if(e.length===2){const[n,r]=e;return n?t.withScope(()=>(t.getStackTop().scope=n,r(n))):t.withScope(r)}return t.withScope(e[0])}function ST(e){return Nr(()=>e(Ne()))}function bT(e,t){return Et(n=>(n.setSpan(e),t(n)))}function ET(e,t){return G().startTransaction({...e},t)}async function vT(e){const t=M();return t?t.flush(e):(v&&m.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function TT(e){const t=M();return t?t.close(e):(v&&m.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function IT(){return G().lastEventId()}function M(){return G().getClient()}function wT(){return!!M()}function ae(){return G().getScope()}function co(e){const t=M(),n=Ne(),r=ae(),{release:s,environment:i=Rn}=t&&t.getOptions()||{},{userAgent:o}=O.navigator||{},a=hc({release:s,environment:i,user:r.getUser()||n.getUser(),...o&&{userAgent:o},...e}),c=n.getSession();return c&&c.status==="ok"&&mt(c,{status:"exited"}),_c(),n.setSession(a),r.setSession(a),a}function _c(){const e=Ne(),t=ae(),n=t.getSession()||e.getSession();n&&mc(n),yc(),e.setSession(),t.setSession()}function yc(){const e=Ne(),t=ae(),n=M(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function uo(e=!1){if(e){_c();return}yc()}function dr(e){return e.transaction}function Or(e,t,n){const r=t.getOptions(),{publicKey:s}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},o=ce({environment:r.environment||Rn,release:r.release,user_segment:i,public_key:s,trace_id:e});return t.emit&&t.emit("createDsc",o),o}function Yt(e){const t=M();if(!t)return{};const n=Or(z(e).trace_id||"",t,ae()),r=dr(e);if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:i,source:o}=r.metadata;i!=null&&(n.sample_rate=`${i}`);const a=z(r);return o&&o!=="url"&&(n.transaction=a.description),n.sampled=String(di(r)),t.emit&&t.emit("createDsc",n),n}function Sc(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;Hf(e,t),r&&Wf(e,r),zf(e,n),Uf(e,s),jf(e,i)}function lo(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:f,transactionName:p,span:h}=t;un(e,"extra",n),un(e,"tags",r),un(e,"user",s),un(e,"contexts",i),un(e,"sdkProcessingMetadata",a),o&&(e.level=o),p&&(e.transactionName=p),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function un(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function Hf(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=t,c=ce(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=ce(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=ce(s);l&&Object.keys(l).length&&(e.user={...l,...e.user});const d=ce(i);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),o&&(e.level=o),a&&(e.transaction=a)}function Uf(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function jf(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function Wf(e,t){e.contexts={trace:li(t),...e.contexts};const n=dr(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Yt(t),...e.sdkProcessingMetadata};const r=z(n).description;r&&(e.tags={transaction:r,...e.tags})}}function zf(e,t){e.fingerprint=e.fingerprint?ar(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}const Gf=100;let as;class Fe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=fo()}static clone(t){return t?t.clone():new Fe}clone(){const t=new Fe;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&mt(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t;if(n instanceof Fe){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(ft(n)){const r=t;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=fo(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:Gf;if(r<=0)return this;const s={timestamp:Cn(),...t},i=this._breadcrumbs;return i.push(s),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:s,_extra:i,_user:o,_level:a,_fingerprint:c,_eventProcessors:u,_propagationContext:l,_sdkProcessingMetadata:d,_transactionName:f,_span:p}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:s,extra:i,user:o,level:a,fingerprint:c||[],eventProcessors:u,propagationContext:l,sdkProcessingMetadata:d,transactionName:f,span:p}}applyToEvent(t,n={},r=[]){Sc(t,this.getScopeData());const s=[...r,...ui(),...this._eventProcessors];return lr(s,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:W();if(!this._client)return m.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r&&r.event_id?r.event_id:W();if(!this._client)return m.warn("No client configured on scope - will not capture message!"),s;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:W();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(m.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function qf(){return as||(as=new Fe),as}function fo(){return{traceId:W(),spanId:W().substring(16)}}const Ns="7.120.4",bc=parseFloat(Ns),Yf=100;class Ec{constructor(t,n,r,s=bc){this._version=s;let i;n?i=n:(i=new Fe,i.setClient(t));let o;r?o=r:(o=new Fe,o.setClient(t)),this._stack=[{scope:i}],t&&this.bindClient(t),this._isolationScope=o}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,n.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();let r;try{r=t(n)}catch(s){throw this.popScope(),s}return je(r)?r.then(s=>(this.popScope(),s),s=>{throw this.popScope(),s}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:W(),s=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:s,...n,event_id:r}),r}captureMessage(t,n,r){const s=this._lastEventId=r&&r.event_id?r.event_id:W(),i=new Error(t);return this.getScope().captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s}),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:W();return t.type||(this._lastEventId=r),this.getScope().captureEvent(t,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Yf}=s.getOptions&&s.getOptions()||{};if(o<=0)return;const c={timestamp:Cn(),...t},u=i?Ze(()=>i(c,n)):c;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,o))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n),this.getIsolationScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n),this.getIsolationScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n),this.getIsolationScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=po(this);try{t(this)}finally{po(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return v&&m.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);return v&&!r&&(this.getClient()?m.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):m.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&mc(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:s,environment:i=Rn}=r&&r.getOptions()||{},{userAgent:o}=O.navigator||{},a=hc({release:s,environment:i,user:n.getUser(),...o&&{userAgent:o},...t}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&mt(c,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(t,...n){const s=vt().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[t]=="function")return s.extensions[t].apply(this,n);v&&m.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function vt(){return O.__SENTRY__=O.__SENTRY__||{extensions:{},hub:void 0},O}function po(e){const t=vt(),n=Ds(t);return vc(t,e),n}function G(){const e=vt();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return Vf(e)}function Ne(){return G().getIsolationScope()}function Vf(e=vt()){return(!Xf(e)||Ds(e).isOlderThan(bc))&&vc(e,new Ec),Ds(e)}function Nr(e,t={}){const n=vt();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function Xf(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function Ds(e){return Pa("hub",()=>new Ec,e)}function vc(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function Oe(e){return(e||G()).getScope().getTransaction()}const Kf=oi;let ho=!1;function Jf(){ho||(ho=!0,Qa(Ls),Za(Ls))}function Ls(){const e=Oe();if(e){const t="internal_error";v&&m.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}Ls.tag="sentry_tracingErrorCallback";var Ps;(function(e){e.Ok="ok";const n="deadline_exceeded";e.DeadlineExceeded=n;const r="unauthenticated";e.Unauthenticated=r;const s="permission_denied";e.PermissionDenied=s;const i="not_found";e.NotFound=i;const o="resource_exhausted";e.ResourceExhausted=o;const a="invalid_argument";e.InvalidArgument=a;const c="unimplemented";e.Unimplemented=c;const u="unavailable";e.Unavailable=u;const l="internal_error";e.InternalError=l;const d="unknown_error";e.UnknownError=d;const f="cancelled";e.Cancelled=f;const p="already_exists";e.AlreadyExists=p;const h="failed_precondition";e.FailedPrecondition=h;const g="aborted";e.Aborted=g;const y="out_of_range";e.OutOfRange=y;const _="data_loss";e.DataLoss=_})(Ps||(Ps={}));function Tc(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}const Qf=Tc;function pi(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=Tc(t);n!=="unknown_error"&&e.setStatus(n)}function hi(e,t,n=()=>{}){let r;try{r=e()}catch(s){throw t(s),n(),s}return Zf(r,t,n)}function Zf(e,t,n){return je(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}function Tt(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=M(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function kT(e,t,n=()=>{},r=()=>{}){const s=G(),i=ae(),o=i.getSpan(),a=Pr(e),c=Lr(s,{parentSpan:o,spanContext:a,forceTransaction:!1,scope:i});return i.setSpan(c),hi(()=>t(c),u=>{c&&c.setStatus("internal_error"),n(u,c)},()=>{c&&c.end(),i.setSpan(o),r()})}function ep(e,t){const n=Pr(e);return Nr(()=>Et(e.scope,r=>{const s=G(),i=r.getSpan(),a=e.onlyIfParent&&!i?void 0:Lr(s,{parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return hi(()=>t(a),()=>{if(a){const{status:c}=z(a);(!c||c==="ok")&&a.setStatus("internal_error")}},()=>a&&a.end())}))}function CT(e,t){const n=Pr(e);return Nr(()=>Et(e.scope,r=>{const s=G(),i=r.getSpan(),a=e.onlyIfParent&&!i?void 0:Lr(s,{parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function c(){a&&a.end()}return hi(()=>t(a,c),()=>{if(a&&a.isRecording()){const{status:u}=z(a);(!u||u==="ok")&&a.setStatus("internal_error")}})}))}function Ic(e){if(!Tt())return;const t=Pr(e),n=G(),r=e.scope?e.scope.getSpan():Dr();if(e.onlyIfParent&&!r)return;const o=(e.scope||ae()).clone();return Lr(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:o})}function Dr(){return ae().getSpan()}const RT=({sentryTrace:e,baggage:t},n)=>{const r=ae(),{traceparentData:s,dynamicSamplingContext:i,propagationContext:o}=ff(e,t);r.setPropagationContext(o),v&&s&&m.log(`[Tracing] Continuing trace ${s.traceId}.`);const a={...s,metadata:ce({dynamicSamplingContext:i})};return n?Nr(()=>n(a)):a};function Lr(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:s}){if(!Tt())return;const i=Ne();let o;if(t&&!r)o=t.startChild(n);else if(t){const a=Yt(t),{traceId:c,spanId:u}=t.spanContext(),l=di(t);o=e.startTransaction({traceId:c,parentSpanId:u,parentSampled:l,...n,metadata:{dynamicSamplingContext:a,...n.metadata}})}else{const{traceId:a,dsc:c,parentSpanId:u,sampled:l}={...i.getPropagationContext(),...s.getPropagationContext()};o=e.startTransaction({traceId:a,parentSpanId:u,parentSampled:l,...n,metadata:{dynamicSamplingContext:c,...n.metadata}})}return s.setSpan(o),tp(o,s,i),o}function Pr(e){if(e.startTime){const t={...e};return t.startTimestamp=xr(e.startTime),delete t.startTime,t}return e}const wc="_sentryScope",kc="_sentryIsolationScope";function tp(e,t,n){e&&(He(e,kc,n),He(e,wc,t))}function np(e){return{scope:e[wc],isolationScope:e[kc]}}let fn;function Cc(e){return fn?fn.get(e):void 0}function Rc(e){const t=Cc(e);if(!t)return;const n={};for(const[,[r,s]]of t)n[r]||(n[r]=[]),n[r].push(ce(s));return n}function rp(e,t,n,r,s,i){const o=Dr();if(o){const a=Cc(o)||new Map,c=`${e}:${t}@${r}`,u=a.get(i);if(u){const[,l]=u;a.set(i,[c,{min:Math.min(l.min,n),max:Math.max(l.max,n),count:l.count+=1,sum:l.sum+=n,tags:l.tags}])}else a.set(i,[c,{min:n,max:n,count:1,sum:n,tags:s}]);fn||(fn=new WeakMap),fn.set(o,a)}}const me="sentry.source",Dt="sentry.sample_rate",Wn="sentry.op",ct="sentry.origin",sp="profile_id";class xc{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}let mi=class Ac{constructor(t={}){this._traceId=t.traceId||W(),this._spanId=t.spanId||W().substring(16),this._startTime=t.startTimestamp||bt(),this.tags=t.tags?{...t.tags}:{},this.data=t.data?{...t.data}:{},this.instrumenter=t.instrumenter||"sentry",this._attributes={},this.setAttributes({[ct]:t.origin||"manual",[Wn]:t.op,...t.attributes}),this._name=t.name||t.description,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.status&&(this._status=t.status),t.endTimestamp&&(this._endTime=t.endTimestamp),t.exclusiveTime!==void 0&&(this._exclusiveTime=t.exclusiveTime),this._measurements=t.measurements?{...t.measurements}:{}}get name(){return this._name||""}set name(t){this.updateName(t)}get description(){return this._name}set description(t){this._name=t}get traceId(){return this._traceId}set traceId(t){this._traceId=t}get spanId(){return this._spanId}set spanId(t){this._spanId=t}set parentSpanId(t){this._parentSpanId=t}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(t){this._sampled=t}get attributes(){return this._attributes}set attributes(t){this._attributes=t}get startTimestamp(){return this._startTime}set startTimestamp(t){this._startTime=t}get endTimestamp(){return this._endTime}set endTimestamp(t){this._endTime=t}get status(){return this._status}set status(t){this._status=t}get op(){return this._attributes[Wn]}set op(t){this.setAttribute(Wn,t)}get origin(){return this._attributes[ct]}set origin(t){this.setAttribute(ct,t)}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?gc:Cf}}startChild(t){const n=new Ac({...t,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n);const r=dr(this);if(n.transaction=r,v&&r){const s=t&&t.op||"< unknown op >",i=z(n).description||"< unknown name >",o=r.spanContext().spanId,a=`[Tracing] Starting '${s}' span on transaction '${i}' (${o}).`;m.log(a),this._logMessage=a}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setAttribute(t,n){n===void 0?delete this._attributes[t]:this._attributes[t]=n}setAttributes(t){Object.keys(t).forEach(n=>this.setAttribute(n,t[n]))}setStatus(t){return this._status=t,this}setHttpStatus(t){return pi(this,t),this}setName(t){this.updateName(t)}updateName(t){return this._name=t,this}isSuccess(){return this._status==="ok"}finish(t){return this.end(t)}end(t){if(this._endTime)return;const n=dr(this);if(v&&n&&n.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&m.log(r.replace("Starting","Finishing"))}this._endTime=xr(t)}toTraceparent(){return Rr(this)}toContext(){return ce({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(t){return this.data=t.data||{},this._name=t.name||t.description,this._endTime=t.endTimestamp,this.op=t.op,this._parentSpanId=t.parentSpanId,this._sampled=t.sampled,this._spanId=t.spanId||this._spanId,this._startTime=t.startTimestamp||this._startTime,this._status=t.status,this.tags=t.tags||{},this._traceId=t.traceId||this._traceId,this}getTraceContext(){return li(this)}getSpanJSON(){return ce({data:this._getData(),description:this._name,op:this._attributes[Wn],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ct],_metrics_summary:Rc(this),profile_id:this._attributes[sp],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:t,_attributes:n}=this,r=Object.keys(t).length>0,s=Object.keys(n).length>0;if(!(!r&&!s))return r&&s?{...t,...n}:r?t:n}},gi=class extends mi{constructor(t,n){super(t),this._contexts={},this._hub=n||G(),this._name=t.name||"",this._metadata={...t.metadata},this._trimEnd=t.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(t){this.setName(t)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[me]&&{source:this._attributes[me]},...this._attributes[Dt]&&{sampleRate:this._attributes[Dt]}}}set metadata(t){this._metadata=t}setName(t,n="custom"){this._name=t,this.setAttribute(me,n)}updateName(t){return this._name=t,this}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new xc(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,r=""){this._measurements[t]={value:n,unit:r}}setMetadata(t){this._metadata={...this._metadata,...t}}end(t){const n=xr(t),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const t=super.toContext();return ce({...t,name:this._name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this._name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){return Yt(this)}setHub(t){this._hub=t}getProfileId(){if(this._contexts!==void 0&&this._contexts.profile!==void 0)return this._contexts.profile.profile_id}_finishTransaction(t){if(this._endTime!==void 0)return;this._name||(v&&m.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(t);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){v&&m.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(l=>l!==this&&z(l).timestamp):[];if(this._trimEnd&&r.length>0){const l=r.map(d=>z(d).timestamp).filter(Boolean);this._endTime=l.reduce((d,f)=>d>f?d:f)}const{scope:s,isolationScope:i}=np(this),{metadata:o}=this,{source:a}=o,c={contexts:{...this._contexts,trace:li(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...o,capturedSpanScope:s,capturedSpanIsolationScope:i,...ce({dynamicSamplingContext:Yt(this)})},_metrics_summary:Rc(this),...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(v&&m.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),v&&m.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}};const pn={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},ip="finishReason",Rt=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class op extends xc{constructor(t,n,r,s){super(s),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=r}add(t){if(t.spanContext().spanId!==this.transactionSpanId){const n=t.end;t.end=(...r)=>(this._popActivity(t.spanContext().spanId),n.apply(t,r)),z(t).timestamp===void 0&&this._pushActivity(t.spanContext().spanId)}super.add(t)}}let Mc=class extends gi{constructor(t,n,r=pn.idleTimeout,s=pn.finalTimeout,i=pn.heartbeatInterval,o=!1,a=!1){super(t,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=s,this._heartbeatInterval=i,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Rt[4],this._autoFinishAllowed=!a,o&&(v&&m.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),n.getScope().setSpan(this)),a||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Rt[3],this.end())},this._finalTimeout)}end(t){const n=xr(t);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setAttribute(ip,this._finishReason),this.spanRecorder){v&&m.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);for(const r of this._beforeFinishCallbacks)r(this,n);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanContext().spanId===this.spanContext().spanId)return!0;z(r).timestamp||(r.setStatus("cancelled"),r.end(n),v&&m.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));const{start_timestamp:s,timestamp:i}=z(r),o=s&&s<n,a=(this._finalTimeout+this._idleTimeout)/1e3,c=i&&s&&i-s<a;if(v){const u=JSON.stringify(r,void 0,2);o?c||m.log("[Tracing] discarding Span since it finished after Transaction final timeout",u):m.log("[Tracing] discarding Span since it happened after Transaction was finished",u)}return o&&c}),v&&m.log("[Tracing] flushing IdleTransaction")}else v&&m.log("[Tracing] No active IdleTransaction");if(this._onScope){const r=this._idleHub.getScope();r.getTransaction()===this&&r.setSpan(void 0)}return super.end(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const n=s=>{this._finished||this._pushActivity(s)},r=s=>{this._finished||this._popActivity(s)};this.spanRecorder=new op(n,r,this.spanContext().spanId,t),v&&m.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Rt[5],this.end(t)))}setFinishReason(t){this._finishReason=t}sendAutoFinishSignal(){this._autoFinishAllowed||(v&&m.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=Rt[1],this.end(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),v&&m.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,v&&m.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(v&&m.log(`[Tracing] popActivity ${t}`),delete this.activities[t],v&&m.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=bt();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Rt[5],this.end(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?this._autoFinishAllowed&&(v&&m.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Rt[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){v&&m.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}};function Oc(e,t,n){if(!Tt(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setAttribute(Dt,Number(e.sampled)),e;let r;return typeof t.tracesSampler=="function"?(r=t.tracesSampler(n),e.setAttribute(Dt,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof t.tracesSampleRate<"u"?(r=t.tracesSampleRate,e.setAttribute(Dt,Number(r))):(r=1,e.setAttribute(Dt,r)),Nc(r)?r?(e.sampled=Math.random()<r,e.sampled?(v&&m.log(`[Tracing] starting ${e.op} transaction - ${z(e).description}`),e):(v&&m.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(v&&m.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):(v&&m.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Nc(e){return Na(e)||!(typeof e=="number"||typeof e=="boolean")?(v&&m.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?(v&&m.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function ap(){const t=this.getScope().getSpan();return t?{"sentry-trace":Rr(t)}:{}}function cp(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",i=e.instrumenter||"sentry";s!==i&&(v&&m.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${s}\` instrumenter.
The transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),e.sampled=!1);let o=new gi(e,this);return o=Oc(o,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),o.isRecording()&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function Sn(e,t,n,r,s,i,o,a=!1){const c=e.getClient(),u=c&&c.getOptions()||{};let l=new Mc(t,e,n,r,o,s,a);return l=Oc(l,u,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...i}),l.isRecording()&&l.initSpanRecorder(u._experiments&&u._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",l),l}function _i(){const e=vt();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=cp),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=ap),Jf())}function up(e,t,n){const r=Oe();r&&r.setMeasurement(e,t,n)}function lp(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function dp(e,t,n,r){const s=ci(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:_t(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return We(i,[o])}function Dc(e,t,n,r){const s=ci(n),i=e.type&&e.type!=="replay_event"?e.type:"event";lp(e,n&&n.sdk);const o=lc(e,s,r,t);return delete e.sdkProcessingMetadata,We(o,[[{type:i},e]])}const fp="7";function Lc(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function pp(e){return`${Lc(e)}${e.projectId}/envelope/`}function hp(e,t){return Td({sentry_key:e.publicKey,sentry_version:fp,...t&&{sentry_client:`${t.name}/${t.version}`}})}function Pc(e,t={}){const n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${pp(e)}?${hp(e,r)}`}function mp(e,t){const n=ja(e);if(!n)return"";const r=`${Lc(n)}embed/error-page/`;let s=`dsn=${_t(n)}`;for(const i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const o=t.user;if(!o)continue;o.name&&(s+=`&name=${encodeURIComponent(o.name)}`),o.email&&(s+=`&email=${encodeURIComponent(o.email)}`)}else s+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${s}`}const mo=[];function gp(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function _p(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=ar(n(t)):r=t;const s=gp(r),i=Sp(s,o=>o.name==="Debug");if(i!==-1){const[o]=s.splice(i,1);s.push(o)}return s}function yp(e,t){const n={};return t.forEach(r=>{r&&$c(e,r,n)}),n}function go(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function $c(e,t,n){if(n[t.name]){v&&m.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,mo.indexOf(t.name)===-1&&(t.setupOnce(wf,G),mo.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),e.on&&typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,i)=>r(s,i,e))}if(e.addEventProcessor&&typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=(i,o)=>r(i,o,e);s.id=t.name,e.addEventProcessor(s)}v&&m.log(`Integration installed: ${t.name}`)}function MT(e){const t=M();if(!t||!t.addIntegration){v&&m.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function Sp(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function ne(e,t){const n=function(...s){return t(...s)};return n.id=e,n}function bp(e,t,n,r){const s=Object.entries(ce(r)).sort((i,o)=>i[0].localeCompare(o[0]));return`${e}${t}${n}${s}`}function Ep(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t>>>0}function vp(e){let t="";for(const n of e){const r=Object.entries(n.tags),s=r.length>0?`|#${r.map(([i,o])=>`${i}:${o}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${s}|T${n.timestamp}
`}return t}function Tp(e){return e.replace(/[^\w]+/gi,"_")}function Ip(e){return e.replace(/[^\w\-.]+/gi,"_")}function wp(e){return e.replace(/[^\w\-./]+/gi,"")}const kp=[[`
`,"\\n"],["\r","\\r"],["	","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function Cp(e){for(const[t,n]of kp)if(e===t)return n;return e}function Rp(e){return[...e].reduce((t,n)=>t+Cp(n),"")}function xp(e){const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=wp(n);t[r]=Rp(String(e[n]))}return t}function Ap(e,t,n,r){const s={sent_at:new Date().toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(s.dsn=_t(t));const i=Mp(e);return We(s,[i])}function Mp(e){const t=vp(e);return[{type:"statsd",length:t.length},t]}const _o="Not capturing exception because it's already been captured.";class Op{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=ja(t.dsn):v&&m.warn("No DSN provided, client will not send events."),this._dsn){const n=Pc(this._dsn,t);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(Qi(t)){v&&m.log(_o);return}let s=n&&n.event_id;return this._process(this.eventFromException(t,n).then(i=>this._captureEvent(i,n,r)).then(i=>{s=i})),s}captureMessage(t,n,r,s){let i=r&&r.event_id;const o=ti(t)?t:String(t),a=ni(t)?this.eventFromMessage(o,n,r):this.eventFromException(t,r);return this._process(a.then(c=>this._captureEvent(c,r,s)).then(c=>{i=c})),i}captureEvent(t,n,r){if(n&&n.originalException&&Qi(n.originalException)){v&&m.log(_o);return}let s=n&&n.event_id;const o=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,n,o||r).then(a=>{s=a})),s}captureSession(t){typeof t.release!="string"?v&&m.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),mt(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(s=>r&&s))):zt(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return v&&m.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const n=this._integrations[t.name];$c(this,t,this._integrations),n||go(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Dc(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=pf(r,_f(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){const n=dp(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const s=typeof r=="number"?r:1,i=`${t}:${n}`;v&&m.log(`Recording outcome: "${i}"${s>1?` (${s} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+s}}captureAggregateMetrics(t){v&&m.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=Ap(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=yp(this,t),go(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,n){let r=!1,s=!1;const i=n.exception&&n.exception.values;if(i){s=!0;for(const c of i){const u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(mt(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new _e(n=>{let r=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=s,t&&r>=t&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,s=Ne()){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",t,n),fi(i,t,n,r,this,s).then(a=>{if(a===null)return a;const c={...s.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&c){const{traceId:l,spanId:d,parentSpanId:f,dsc:p}=c;a.contexts={trace:{trace_id:l,span_id:d,parent_span_id:f},...a.contexts};const h=p||Or(l,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:h,...a.sdkProcessingMetadata}}return a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(s=>s.event_id,s=>{if(v){const i=s;i.logLevel==="log"?m.log(i.message):m.warn(i)}})}_processEvent(t,n,r){const s=this.getOptions(),{sampleRate:i}=s,o=Bc(t),a=Fc(t),c=t.type||"error",u=`before send for type \`${c}\``;if(a&&typeof i=="number"&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",t),ii(new xe(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const l=c==="replay_event"?"replay":c,f=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,f).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",l,t),new xe("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return p;const g=Dp(s,p,n);return Np(g,u)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",l,t),o){const _=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",_)}throw new xe(`${u} returned \`null\`, will not send event.`,"log")}const h=r&&r.getSession();if(!o&&h&&this._updateSessionFromEvent(h,p),o){const y=p.sdkProcessingMetadata&&p.sdkProcessingMetadata.spanCountBeforeProcessing||0,_=p.spans?p.spans.length:0,S=y-_;S>0&&this.recordDroppedEvent("before_send","span",S)}const g=p.transaction_info;if(o&&g&&p.transaction!==t.transaction){const y="custom";p.transaction_info={...g,source:y}}return this.sendEvent(p,n),p}).then(null,p=>{throw p instanceof xe?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new xe(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{v&&m.error("Error while sending event:",n)});v&&m.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:t[n]}})}}function Np(e,t){const n=`${t} must return \`null\` or a valid event.`;if(je(e))return e.then(r=>{if(!ft(r)&&r!==null)throw new xe(n);return r},r=>{throw new xe(`${t} rejected with ${r}`)});if(!ft(e)&&e!==null)throw new xe(n);return e}function Dp(e,t,n){const{beforeSend:r,beforeSendTransaction:s}=e;if(Fc(t)&&r)return r(t,n);if(Bc(t)&&s){if(t.spans){const i=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:i}}return s(t,n)}return t}function Fc(e){return e.type===void 0}function Bc(e){return e.type==="transaction"}function Lp(e){const t=M();!t||!t.addEventProcessor||t.addEventProcessor(e)}const Hc="c",Uc="g",yi="s",jc="d",Pp=5e3;class $p{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}}class Fp{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}class Bp{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}}class Hp{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map(t=>typeof t=="string"?Ep(t):t).join(":")}}const Up={[Hc]:$p,[Uc]:Fp,[jc]:Bp,[yi]:Hp};function jp(e,t){t.debug===!0&&(v?m.enable():Ze(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ae().update(t.initialScope);const r=new e(t);Wp(r),zp(r)}function Wp(e){const n=G().getStackTop();n.client=e,n.scope.setClient(e)}function zp(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}const Gp=30;function Wc(e,t,n=sf(e.bufferSize||Gp)){let r={};const s=o=>n.drain(o);function i(o){const a=[];if(qt(o,(d,f)=>{const p=io(f);if(fc(r,p)){const h=yo(d,f);e.recordDroppedEvent("ratelimit_backoff",p,h)}else a.push(d)}),a.length===0)return zt();const c=We(o[0],a),u=d=>{qt(c,(f,p)=>{const h=yo(f,p);e.recordDroppedEvent(d,io(p),h)})},l=()=>t({body:uc(c,e.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&v&&m.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=pc(r,d),d),d=>{throw u("network_error"),d});return n.add(l).then(d=>d,d=>{if(d instanceof xe)return v&&m.error("Skipped sending event because buffer is full."),u("queue_overflow"),zt();throw d})}return i.__sentry__baseTransport__=!0,{send:i,flush:s}}function yo(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}const qp=100,So=5e3,Yp=36e5;function cs(e,t){v&&m.info(`[Offline]: ${e}`,t)}function Vp(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let s=So,i;function o(l,d,f){return hf(l,["replay_event","replay_recording","client_report"])?!1:t.shouldStore?t.shouldStore(l,d,f):!0}function a(l){r&&(i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const d=await r.pop();d&&(cs("Attempting to send previously queued event"),u(d).catch(f=>{cs("Failed to retry sending",f)}))},l),typeof i!="number"&&i.unref&&i.unref())}function c(){i||(a(s),s=Math.min(s*2,Yp))}async function u(l){try{const d=await n.send(l);let f=qp;if(d){if(d.headers&&d.headers["retry-after"])f=dc(d.headers["retry-after"]);else if((d.statusCode||0)>=400)return d}return a(f),s=So,d}catch(d){if(r&&await o(l,d,s))return await r.insert(l),c(),cs("Error sending. Event queued",d),{};throw d}}return t.flushAtStartup&&c(),{send:u,flush:l=>n.flush(l)}}}function zc(e,t){let n;return qt(e,(r,s)=>(t.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function Xp(e,t){return n=>{const r=e(n);return{...r,send:async s=>{const i=zc(s,["event","transaction","profile","replay_event"]);return i&&(i.release=t),r.send(s)}}}}function Kp(e,t){return We(t?{...e[0],dsn:t}:e[0],e[1])}function OT(e,t){return n=>{const r=e(n),s=new Map;function i(c,u){const l=u?`${c}:${u}`:c;let d=s.get(l);if(!d){const f=Ha(c);if(!f)return;const p=Pc(f,n.tunnel);d=u?Xp(e,u)({...n,url:p}):e({...n,url:p}),s.set(l,d)}return[c,d]}async function o(c){function u(f){const p=f&&f.length?f:["event"];return zc(c,p)}const l=t({envelope:c,getEvent:u}).map(f=>typeof f=="string"?i(f,void 0):i(f.dsn,f.release)).filter(f=>!!f);return l.length===0&&l.push(["",r]),(await Promise.all(l.map(([f,p])=>p.send(Kp(c,f)))))[0]}async function a(c){const u=[await r.flush(c)];for(const[,l]of s)u.push(await l.flush(c));return u.every(l=>l)}return{send:o,flush:a}}}function Jp(e,t){const n={sent_at:new Date().toISOString()};t&&(n.dsn=_t(t));const r=e.map(Qp);return We(n,r)}function Qp(e){return[{type:"span"},e]}function Gc(e,t){const n=t&&th(t)?t.getClient():t,r=n&&n.getDsn(),s=n&&n.getOptions().tunnel;return eh(e,r)||Zp(e,s)}function Zp(e,t){return t?bo(e)===bo(t):!1}function eh(e,t){return t?e.includes(t.host):!1}function bo(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function th(e){return e.getClient!==void 0}function NT(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}function nh(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:Ns})),version:Ns}),e._metadata=s}const qc=new Map,Eo=new Set;function rh(e){if(O._sentryModuleMetadata)for(const t of Object.keys(O._sentryModuleMetadata)){const n=O._sentryModuleMetadata[t];if(Eo.has(t))continue;Eo.add(t);const r=e(t);for(const s of r.reverse())if(s.filename){qc.set(s.filename,n);break}}}function sh(e,t){return rh(e),qc.get(t)}function ih(e,t){try{t.exception.values.forEach(n=>{if(n.stacktrace)for(const r of n.stacktrace.frames||[]){if(!r.filename)continue;const s=sh(e,r.filename);s&&(r.module_metadata=s)}})}catch{}}function oh(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[])delete n.module_metadata})}catch{}}const Yc="ModuleMetadata",ah=(()=>({name:Yc,setupOnce(){},setup(e){typeof e.on=="function"&&e.on("beforeEnvelope",t=>{qt(t,(n,r)=>{if(r==="event"){const s=Array.isArray(n)?n[1]:void 0;s&&(oh(s),n[1]=s)}})})},processEvent(e,t,n){const r=n.getOptions().stackParser;return ih(r,e),e}})),ch=ah,DT=ne(Yc,ch),uh=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],lh=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Vc="InboundFilters",dh=((e={})=>({name:Vc,setupOnce(){},processEvent(t,n,r){const s=r.getOptions(),i=ph(e,s);return hh(t,i)?null:t}})),Xc=dh,fh=ne(Vc,Xc);function ph(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:uh],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:lh],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function hh(e,t){return t.ignoreInternal&&bh(e)?(v&&m.warn(`Event dropped due to being internal Sentry Error.
Event: ${Xe(e)}`),!0):mh(e,t.ignoreErrors)?(v&&m.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Xe(e)}`),!0):gh(e,t.ignoreTransactions)?(v&&m.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Xe(e)}`),!0):_h(e,t.denyUrls)?(v&&m.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Xe(e)}.
Url: ${fr(e)}`),!0):yh(e,t.allowUrls)?!1:(v&&m.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Xe(e)}.
Url: ${fr(e)}`),!0)}function mh(e,t){return e.type||!t||!t.length?!1:Sh(e).some(n=>tn(n,t))}function gh(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?tn(n,t):!1}function _h(e,t){if(!t||!t.length)return!1;const n=fr(e);return n?tn(n,t):!1}function yh(e,t){if(!t||!t.length)return!0;const n=fr(e);return n?tn(n,t):!0}function Sh(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),v&&t.length===0&&m.error(`Could not extract message for event ${Xe(e)}`),t}function bh(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function Eh(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function fr(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?Eh(t):null}catch{return v&&m.error(`Cannot extract url for event ${Xe(e)}`),null}}let vo;const Kc="FunctionToString",To=new WeakMap,vh=(()=>({name:Kc,setupOnce(){vo=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=si(this),n=To.has(M())&&t!==void 0?t:this;return vo.apply(n,e)}}catch{}},setup(e){To.set(e,!0)}})),Jc=vh,Th=ne(Kc,Jc),Ih="cause",wh=5,Qc="LinkedErrors",kh=((e={})=>{const t=e.limit||wh,n=e.key||Ih;return{name:Qc,setupOnce(){},preprocessEvent(r,s,i){const o=i.getOptions();La(Tf,o.stackParser,o.maxValueLength,n,t,r,s)}}}),Ch=kh,Rh=ne(Qc,Ch),xh=Object.freeze(Object.defineProperty({__proto__:null,FunctionToString:Th,InboundFilters:fh,LinkedErrors:Rh},Symbol.toStringTag,{value:"Module"}));class Ah{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),Pp)}add(t,n,r,s="none",i={},o=bt()){const a=Math.floor(o),c=Ip(n),u=xp(i),l=Tp(s),d=bp(t,c,l,u);let f=this._buckets.get(d);const p=f&&t===yi?f.metric.weight:0;f?(f.metric.add(r),f.timestamp<a&&(f.timestamp=a)):(f={metric:new Up[t](r),timestamp:a,metricType:t,name:c,unit:l,tags:u},this._buckets.set(d,f));const h=typeof r=="string"?f.metric.weight-p:r;rp(t,c,h,l,i,d)}flush(){if(this._buckets.size!==0){if(this._client.captureAggregateMetrics){const t=Array.from(this._buckets).map(([,n])=>n);this._client.captureAggregateMetrics(t)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const Zc="MetricsAggregator",Mh=(()=>({name:Zc,setupOnce(){},setup(e){e.metricsAggregator=new Ah(e)}})),eu=Mh,Oh=ne(Zc,eu);function $r(e,t,n,r={}){const s=M(),i=ae();if(s){if(!s.metricsAggregator){v&&m.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs");return}const{unit:o,tags:a,timestamp:c}=r,{release:u,environment:l}=s.getOptions(),d=i.getTransaction(),f={};u&&(f.release=u),l&&(f.environment=l),d&&(f.transaction=z(d).description||""),v&&m.log(`Adding value of ${n} to ${e} metric ${t}`),s.metricsAggregator.add(e,t,n,o,{...f,...a},c)}}function Nh(e,t=1,n){$r(Hc,e,t,n)}function Dh(e,t,n){$r(jc,e,t,n)}function Lh(e,t,n){$r(yi,e,t,n)}function Ph(e,t,n){$r(Uc,e,t,n)}const LT={increment:Nh,distribution:Dh,set:Lh,gauge:Ph,MetricsAggregator:Oh,metricsAggregatorIntegration:eu},$h=xh,C=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function It(e){const t=N([e,"call",r=>r(),"access",r=>r.getClient,"call",r=>r(),"optionalAccess",r=>r.getOptions,"call",r=>r()]);return(N([t,"optionalAccess",r=>r.instrumenter])||"sentry")!=="sentry"}class Fr{static __initStatic(){this.id="Express"}constructor(t={}){this.name=Fr.id,this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use")}setupOnce(t,n){if(!this._router){C&&m.error("ExpressIntegration is missing an Express instance");return}if(It(n)){C&&m.log("Express Integration is skipped because of instrumenter configuration.");return}Hh(this._router,this._methods),Uh(this._router)}}Fr.__initStatic();function Io(e,t){const n=e.length;switch(n){case 2:return function(r,s){const i=s.__sentry_transaction;if(i){const o=i.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});s.once("finish",()=>{o.end()})}return e.call(this,r,s)};case 3:return function(r,s,i){const o=s.__sentry_transaction,a=N([o,"optionalAccess",c=>c.startChild,"call",c=>c({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,r,s,function(...c){N([a,"optionalAccess",u=>u.end,"call",u=>u()]),i.call(this,...c)})};case 4:return function(r,s,i,o){const a=i.__sentry_transaction,c=N([a,"optionalAccess",u=>u.startChild,"call",u=>u({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,r,s,i,function(...u){N([c,"optionalAccess",l=>l.end,"call",l=>l()]),o.call(this,...u)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}function Fh(e,t){return e.map(n=>typeof n=="function"?Io(n,t):Array.isArray(n)?n.map(r=>typeof r=="function"?Io(r,t):r):n)}function Bh(e,t){const n=e[t];return e[t]=function(...r){return n.call(this,...Fh(r,t))},e}function Hh(e,t=[]){t.forEach(n=>Bh(e,n))}function Uh(e){const t="settings"in e;t&&e._router===void 0&&e.lazyrouter&&e.lazyrouter();const n=t?e._router:e;if(!n){C&&m.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),C&&m.debug("Routing instrumentation is currently only supported in Express 4.");return}const r=Object.getPrototypeOf(n),s=r.process_params;r.process_params=function(o,a,c,u,l){c._reconstructedRoute||(c._reconstructedRoute="");const{layerRoutePath:d,isRegex:f,isArray:p,numExtraSegments:h}=Wh(o);(d||f||p)&&(c._hasParameters=!0);let g;d?g=d:g=qh(c.originalUrl,c._reconstructedRoute,o.path)||"";const y=g.split("/").filter(b=>b.length>0&&(f||p||!b.includes("*"))).join("/");y&&y.length>0&&(c._reconstructedRoute+=`/${y}${f?"/":""}`);const _=ur(Gt(c.originalUrl||""))+h,S=ur(c._reconstructedRoute);if(_===S){c._hasParameters||c._reconstructedRoute!==c.originalUrl&&(c._reconstructedRoute=c.originalUrl?Gt(c.originalUrl):c.originalUrl);const b=u.__sentry_transaction,T=b&&z(b).data||{};if(b&&T[me]!=="custom"){const E=c._reconstructedRoute||"/",[I,A]=of(c,{path:!0,method:!0,customRoute:E});b.updateName(I),b.setAttribute(me,A)}}return s.call(this,o,a,c,u,l)}}const jh=(e,t,n)=>{if(!e||!t||!n||Object.keys(n).length===0||N([n,"access",u=>u[0],"optionalAccess",u=>u.offset])===void 0||N([n,"access",u=>u[0],"optionalAccess",u=>u.offset])===null)return;const r=n.sort((u,l)=>u.offset-l.offset),i=new RegExp(t,`${t.flags}d`).exec(e);if(!i||!i.indices)return;const[,...o]=i.indices;if(o.length!==r.length)return;let a=e,c=0;return o.forEach((u,l)=>{if(u){const[d,f]=u,p=a.substring(0,d-c),h=`:${r[l].name}`,g=a.substring(f-c);a=p+h+g,c=c+(f-d-h.length)}}),a};function Wh(e){let t=N([e,"access",o=>o.route,"optionalAccess",o=>o.path]);const n=Oa(t),r=Array.isArray(t);if(!t){const[o]=O.process.versions.node.split(".").map(Number);o>=16&&(t=jh(e.path,e.regexp,e.keys))}if(!t)return{isRegex:n,isArray:r,numExtraSegments:0};const s=r?Math.max(zh(t)-ur(e.path||""),0):0;return{layerRoutePath:Gh(r,t),isRegex:n,isArray:r,numExtraSegments:s}}function zh(e){return e.reduce((t,n)=>t+ur(n.toString()),0)}function Gh(e,t){return e?t.map(n=>n.toString()).join(","):t&&t.toString()}function qh(e,t,n){const r=Gt(e||""),s=N([r,"optionalAccess",c=>c.split,"call",c=>c("/"),"access",c=>c.filter,"call",c=>c(u=>!!u)]);let i=0;const o=N([t,"optionalAccess",c=>c.split,"call",c=>c("/"),"access",c=>c.filter,"call",c=>c(u=>!!u),"access",c=>c.length])||0;return N([n,"optionalAccess",c=>c.split,"call",c=>c("/"),"access",c=>c.filter,"call",c=>c(u=>N([s,"optionalAccess",l=>l[o+i]])===u?(i+=1,!0):!1),"access",c=>c.join,"call",c=>c("/")])}class Br{static __initStatic(){this.id="Postgres"}constructor(t={}){this.name=Br.id,this._usePgNative=!!t.usePgNative,this._module=t.module}loadDependency(){return this._module=this._module||ht("pg")}setupOnce(t,n){if(It(n)){C&&m.log("Postgres Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){C&&m.error("Postgres Integration was unable to require `pg` package.");return}const s=this._usePgNative?N([r,"access",i=>i.native,"optionalAccess",i=>i.Client]):r.Client;if(!s){C&&m.error("Postgres Integration was unable to access 'pg-native' bindings.");return}K(s.prototype,"query",function(i){return function(o,a,c){const l=n().getScope().getSpan(),d={"db.system":"postgresql"};try{this.database&&(d["db.name"]=this.database),this.host&&(d["server.address"]=this.host),this.port&&(d["server.port"]=this.port),this.user&&(d["db.user"]=this.user)}catch{}const f=N([l,"optionalAccess",h=>h.startChild,"call",h=>h({description:typeof o=="string"?o:o.text,op:"db",origin:"auto.db.postgres",data:d})]);if(typeof c=="function")return i.call(this,o,a,function(h,g){N([f,"optionalAccess",y=>y.end,"call",y=>y()]),c(h,g)});if(typeof a=="function")return i.call(this,o,function(h,g){N([f,"optionalAccess",y=>y.end,"call",y=>y()]),a(h,g)});const p=typeof a<"u"?i.call(this,o,a):i.call(this,o);return je(p)?p.then(h=>(N([f,"optionalAccess",g=>g.end,"call",g=>g()]),h)):(N([f,"optionalAccess",h=>h.end,"call",h=>h()]),p)}})}}Br.__initStatic();class Hr{static __initStatic(){this.id="Mysql"}constructor(){this.name=Hr.id}loadDependency(){return this._module=this._module||ht("mysql/lib/Connection.js")}setupOnce(t,n){if(It(n)){C&&m.log("Mysql Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){C&&m.error("Mysql Integration was unable to require `mysql` package.");return}let s;try{r.prototype.connect=new Proxy(r.prototype.connect,{apply(a,c,u){return s||(s=c.config),a.apply(c,u)}})}catch{C&&m.error("Mysql Integration was unable to instrument `mysql` config.")}function i(){return s?{"server.address":s.host,"server.port":s.port,"db.user":s.user}:{}}function o(a){if(!a)return;const c=i();Object.keys(c).forEach(u=>{a.setAttribute(u,c[u])}),a.end()}K(r,"createQuery",function(a){return function(c,u,l){const f=n().getScope().getSpan(),p=N([f,"optionalAccess",g=>g.startChild,"call",g=>g({description:typeof c=="string"?c:c.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if(typeof l=="function")return a.call(this,c,u,function(g,y,_){o(p),l(g,y,_)});if(typeof u=="function")return a.call(this,c,function(g,y,_){o(p),u(g,y,_)});const h=a.call(this,c,u);return h.on("end",()=>{o(p)}),h}})}}Hr.__initStatic();const Yh=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],Vh={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};function Xh(e){return e&&typeof e=="object"&&e.once&&typeof e.once=="function"}class Ur{static __initStatic(){this.id="Mongo"}constructor(t={}){this.name=Ur.id,this._operations=Array.isArray(t.operations)?t.operations:Yh,this._describeOperations="describeOperations"in t?t.describeOperations:!0,this._useMongoose=!!t.useMongoose}loadDependency(){const t=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||ht(t)}setupOnce(t,n){if(It(n)){C&&m.log("Mongo Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){const s=this._useMongoose?"mongoose":"mongodb";C&&m.error(`Mongo Integration was unable to require \`${s}\` package.`);return}this._instrumentOperations(r.Collection,this._operations,n)}_instrumentOperations(t,n,r){n.forEach(s=>this._patchOperation(t,s,r))}_patchOperation(t,n,r){if(!(n in t.prototype))return;const s=this._getSpanContextFromOperationArguments.bind(this);K(t.prototype,n,function(i){return function(...o){const a=o[o.length-1],c=r(),u=c.getScope(),l=c.getClient(),d=u.getSpan(),f=N([l,"optionalAccess",h=>h.getOptions,"call",h=>h(),"access",h=>h.sendDefaultPii]);if(typeof a!="function"||n==="mapReduce"&&o.length===2){const h=N([d,"optionalAccess",y=>y.startChild,"call",y=>y(s(this,n,o,f))]),g=i.call(this,...o);if(je(g))return g.then(y=>(N([h,"optionalAccess",_=>_.end,"call",_=>_()]),y));if(Xh(g)){const y=g;try{y.once("close",()=>{N([h,"optionalAccess",_=>_.end,"call",_=>_()])})}catch{N([h,"optionalAccess",S=>S.end,"call",S=>S()])}return y}else return N([h,"optionalAccess",y=>y.end,"call",y=>y()]),g}const p=N([d,"optionalAccess",h=>h.startChild,"call",h=>h(s(this,n,o.slice(0,-1)))]);return i.call(this,...o.slice(0,-1),function(h,g){N([p,"optionalAccess",y=>y.end,"call",y=>y()]),a(h,g)})}})}_getSpanContextFromOperationArguments(t,n,r,s=!1){const i={"db.system":"mongodb","db.name":t.dbName,"db.operation":n,"db.mongodb.collection":t.collectionName},o={op:"db",origin:"auto.db.mongo",description:n,data:i},a=Vh[n],c=Array.isArray(this._describeOperations)?this._describeOperations.includes(n):this._describeOperations;if(!a||!c||!s)return o;try{if(n==="mapReduce"){const[u,l]=r;i[a[0]]=typeof u=="string"?u:u.name||"<anonymous>",i[a[1]]=typeof l=="string"?l:l.name||"<anonymous>"}else for(let u=0;u<a.length;u++)i[`db.mongodb.${a[u]}`]=JSON.stringify(r[u])}catch{}return o}}Ur.__initStatic();function Kh(e){return!!e&&!!e.$use}class jr{static __initStatic(){this.id="Prisma"}constructor(t={}){if(this.name=jr.id,Kh(t.client)&&!t.client._sentryInstrumented){He(t.client,"_sentryInstrumented",!0);const n={};try{const r=t.client._engineConfig;if(r){const{activeProvider:s,clientVersion:i}=r;s&&(n["db.system"]=s),i&&(n["db.prisma.version"]=i)}}catch{}t.client.$use((r,s)=>{if(It(G))return s(r);const i=r.action,o=r.model;return ep({name:o?`${o} ${i}`:i,onlyIfParent:!0,op:"db.prisma",attributes:{[ct]:"auto.db.prisma"},data:{...n,"db.operation":i}},()=>s(r))})}else C&&m.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",t.client)}setupOnce(){}}jr.__initStatic();class Wr{static __initStatic(){this.id="GraphQL"}constructor(){this.name=Wr.id}loadDependency(){return this._module=this._module||ht("graphql/execution/execute.js")}setupOnce(t,n){if(It(n)){C&&m.log("GraphQL Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){C&&m.error("GraphQL Integration was unable to require graphql/execution package.");return}K(r,"execute",function(s){return function(...i){const o=n().getScope(),a=o.getSpan(),c=N([a,"optionalAccess",l=>l.startChild,"call",l=>l({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);N([o,"optionalAccess",l=>l.setSpan,"call",l=>l(c)]);const u=s.call(this,...i);return je(u)?u.then(l=>(N([c,"optionalAccess",d=>d.end,"call",d=>d()]),N([o,"optionalAccess",d=>d.setSpan,"call",d=>d(a)]),l)):(N([c,"optionalAccess",l=>l.end,"call",l=>l()]),N([o,"optionalAccess",l=>l.setSpan,"call",l=>l(a)]),u)}})}}Wr.__initStatic();class zr{static __initStatic(){this.id="Apollo"}constructor(t={useNestjs:!1}){this.name=zr.id,this._useNest=!!t.useNestjs}loadDependency(){return this._useNest?this._module=this._module||ht("@nestjs/graphql"):this._module=this._module||ht("apollo-server-core"),this._module}setupOnce(t,n){if(It(n)){C&&m.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){const r=this.loadDependency();if(!r){C&&m.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}K(r.GraphQLFactory.prototype,"mergeWithSchema",function(s){return function(...i){return K(this.resolversExplorerService,"explore",function(o){return function(){const a=ar(o.call(this));return wo(a,n)}}),s.call(this,...i)}})}else{const r=this.loadDependency();if(!r){C&&m.error("Apollo Integration was unable to require apollo-server-core package.");return}K(r.ApolloServerBase.prototype,"constructSchema",function(s){return function(){if(!this.config.resolvers)return C&&(this.config.schema?(m.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),m.warn()):this.config.modules&&m.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),m.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),s.call(this);const i=ar(this.config.resolvers);return this.config.resolvers=wo(i,n),s.call(this)}})}}}zr.__initStatic();function wo(e,t){return e.map(n=>(Object.keys(n).forEach(r=>{Object.keys(n[r]).forEach(s=>{typeof n[r][s]=="function"&&Jh(n,r,s,t)})}),n))}function Jh(e,t,n,r){K(e[t],n,function(s){return function(...i){const a=r().getScope().getSpan(),c=N([a,"optionalAccess",l=>l.startChild,"call",l=>l({description:`${t}.${n}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),u=s.call(this,...i);return je(u)?u.then(l=>(N([c,"optionalAccess",d=>d.end,"call",d=>d()]),l)):(N([c,"optionalAccess",l=>l.end,"call",l=>l()]),u)}})}const k=O;function tu(){k.document?k.document.addEventListener("visibilitychange",()=>{const e=Oe();if(k.document.hidden&&e){const t="cancelled",{op:n,status:r}=z(e);C&&m.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}}):C&&m.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const xn=(e,t,n)=>{let r,s;return i=>{t.value>=0&&(i||n)&&(s=t.value-(r||0),(s||r===void 0)&&(r=t.value,t.delta=s,e(t)))}},Qh=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Zh=()=>{const e=k.performance.timing,t=k.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const r in e)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n},Gr=()=>k.__WEB_VITALS_POLYFILL__?k.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||Zh()):k.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Si=()=>{const e=Gr();return e&&e.activationStart||0},An=(e,t)=>{const n=Gr();let r="navigate";return n&&(k.document&&k.document.prerendering||Si()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:Qh(),navigationType:r}},rn=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{t(s.getEntries())});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},Mn=(e,t)=>{const n=r=>{(r.type==="pagehide"||k.document.visibilityState==="hidden")&&(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};k.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},em=(e,t={})=>{const n=An("CLS",0);let r,s=0,i=[];const o=c=>{c.forEach(u=>{if(!u.hadRecentInput){const l=i[0],d=i[i.length-1];s&&i.length!==0&&u.startTime-d.startTime<1e3&&u.startTime-l.startTime<5e3?(s+=u.value,i.push(u)):(s=u.value,i=[u]),s>n.value&&(n.value=s,n.entries=i,r&&r())}})},a=rn("layout-shift",o);if(a){r=xn(e,n,t.reportAllChanges);const c=()=>{o(a.takeRecords()),r(!0)};return Mn(c),c}};let pr=-1;const tm=()=>{k.document&&k.document.visibilityState&&(pr=k.document.visibilityState==="hidden"&&!k.document.prerendering?0:1/0)},nm=()=>{Mn(({timeStamp:e})=>{pr=e},!0)},bi=()=>(pr<0&&(tm(),nm()),{get firstHiddenTime(){return pr}}),rm=e=>{const t=bi(),n=An("FID");let r;const s=a=>{a.startTime<t.firstHiddenTime&&(n.value=a.processingStart-a.startTime,n.entries.push(a),r(!0))},i=a=>{a.forEach(s)},o=rn("first-input",i);r=xn(e,n),o&&Mn(()=>{i(o.takeRecords()),o.disconnect()},!0)};let nu=0,us=1/0,zn=0;const sm=e=>{e.forEach(t=>{t.interactionId&&(us=Math.min(us,t.interactionId),zn=Math.max(zn,t.interactionId),nu=zn?(zn-us)/7+1:0)})};let $s;const im=()=>$s?nu:performance.interactionCount||0,om=()=>{"interactionCount"in performance||$s||($s=rn("event",sm,{type:"event",buffered:!0,durationThreshold:0}))},ru=()=>im(),ko=10,Pe=[],ls={},Co=e=>{const t=Pe[Pe.length-1],n=ls[e.interactionId];if(n||Pe.length<ko||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const r={id:e.interactionId,latency:e.duration,entries:[e]};ls[r.id]=r,Pe.push(r)}Pe.sort((r,s)=>s.latency-r.latency),Pe.splice(ko).forEach(r=>{delete ls[r.id]})}},am=()=>{const e=Math.min(Pe.length-1,Math.floor(ru()/50));return Pe[e]},cm=(e,t)=>{t=t||{},om();const n=An("INP");let r;const s=o=>{o.forEach(c=>{c.interactionId&&Co(c),c.entryType==="first-input"&&!Pe.some(l=>l.entries.some(d=>c.duration===d.duration&&c.startTime===d.startTime))&&Co(c)});const a=am();a&&a.latency!==n.value&&(n.value=a.latency,n.entries=a.entries,r())},i=rn("event",s,{durationThreshold:t.durationThreshold||40});r=xn(e,n,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),Mn(()=>{s(i.takeRecords()),n.value<0&&ru()>0&&(n.value=0,n.entries=[]),r(!0)}))},Ro={},um=e=>{const t=bi(),n=An("LCP");let r;const s=o=>{const a=o[o.length-1];if(a){const c=Math.max(a.startTime-Si(),0);c<t.firstHiddenTime&&(n.value=c,n.entries=[a],r())}},i=rn("largest-contentful-paint",s);if(i){r=xn(e,n);const o=()=>{Ro[n.id]||(s(i.takeRecords()),i.disconnect(),Ro[n.id]=!0,r(!0))};return["keydown","click"].forEach(a=>{k.document&&addEventListener(a,o,{once:!0,capture:!0})}),Mn(o,!0),o}},Fs=e=>{k.document&&(k.document.prerendering?addEventListener("prerenderingchange",()=>Fs(e),!0):k.document.readyState!=="complete"?addEventListener("load",()=>Fs(e),!0):setTimeout(e,0))},lm=(e,t)=>{t=t||{};const n=An("TTFB"),r=xn(e,n,t.reportAllChanges);Fs(()=>{const s=Gr();if(s){if(n.value=Math.max(s.responseStart-Si(),0),n.value<0||n.value>performance.now())return;n.entries=[s],r(!0)}})},hn={},hr={};let su,iu,ou,au,cu;function dm(e,t=!1){return On("cls",e,mm,su,t)}function uu(e,t=!1){return On("lcp",e,_m,ou,t)}function fm(e){return On("ttfb",e,ym,au)}function pm(e){return On("fid",e,gm,iu)}function hm(e){return On("inp",e,Sm,cu)}function tt(e,t){return lu(e,t),hr[e]||(bm(e),hr[e]=!0),du(e,t)}function sn(e,t){const n=hn[e];if(!(!n||!n.length))for(const r of n)try{r(t)}catch(s){C&&m.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Ue(r)}
Error:`,s)}}function mm(){return em(e=>{sn("cls",{metric:e}),su=e},{reportAllChanges:!0})}function gm(){return rm(e=>{sn("fid",{metric:e}),iu=e})}function _m(){return um(e=>{sn("lcp",{metric:e}),ou=e})}function ym(){return lm(e=>{sn("ttfb",{metric:e}),au=e})}function Sm(){return cm(e=>{sn("inp",{metric:e}),cu=e})}function On(e,t,n,r,s=!1){lu(e,t);let i;return hr[e]||(i=n(),hr[e]=!0),r&&t({metric:r}),du(e,t,s?i:void 0)}function bm(e){const t={};e==="event"&&(t.durationThreshold=0),rn(e,n=>{sn(e,{entries:n})},t)}function lu(e,t){hn[e]=hn[e]||[],hn[e].push(t)}function du(e,t,n){return()=>{n&&n();const r=hn[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function ds(e){return typeof e=="number"&&isFinite(e)}function Vt(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const Em=2147483647;function oe(e){return e/1e3}function Ei(){return k&&k.addEventListener&&k.performance}let xo=0,te={},Ce,mn;function fu(){const e=Ei();if(e&&le){e.mark&&k.performance.mark("sentry-tracing-init");const t=Im(),n=vm(),r=Tm(),s=wm();return()=>{t(),n(),r(),s()}}return()=>{}}function pu(){tt("longtask",({entries:e})=>{for(const t of e){const n=Oe();if(!n)return;const r=oe(le+t.startTime),s=oe(t.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s})}})}function hu(){tt("event",({entries:e})=>{for(const t of e){const n=Oe();if(!n)return;if(t.name==="click"){const r=oe(le+t.startTime),s=oe(t.duration),i={description:Qe(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s},o=Ba(t.target);o&&(i.attributes={"ui.component_name":o}),n.startChild(i)}}})}function mu(e,t){if(Ei()&&le){const r=km(e,t);return()=>{r()}}return()=>{}}function vm(){return dm(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(C&&m.log("[Measurements] Adding CLS"),te.cls={value:e.value,unit:""},mn=t)},!0)}function Tm(){return uu(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(C&&m.log("[Measurements] Adding LCP"),te.lcp={value:e.value,unit:"millisecond"},Ce=t)},!0)}function Im(){return pm(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=oe(le),r=oe(t.startTime);C&&m.log("[Measurements] Adding FID"),te.fid={value:e.value,unit:"millisecond"},te["mark.fid"]={value:n+r,unit:"second"}})}function wm(){return fm(({metric:e})=>{e.entries[e.entries.length-1]&&(C&&m.log("[Measurements] Adding TTFB"),te.ttfb={value:e.value,unit:"millisecond"})})}const Ao={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function km(e,t){return hm(({metric:n})=>{if(n.value===void 0)return;const r=n.entries.find(b=>b.duration===n.value&&Ao[b.name]!==void 0),s=M();if(!r||!s)return;const i=Ao[r.name],o=s.getOptions(),a=oe(le+r.startTime),c=oe(n.value),u=r.interactionId!==void 0?e[r.interactionId]:void 0;if(u===void 0)return;const{routeName:l,parentContext:d,activeTransaction:f,user:p,replayId:h}=u,g=p!==void 0?p.email||p.id||p.ip_address:void 0,y=f!==void 0?f.getProfileId():void 0,_=new mi({startTimestamp:a,endTimestamp:a+c,op:`ui.interaction.${i}`,name:Qe(r.target),attributes:{release:o.release,environment:o.environment,transaction:l,...g!==void 0&&g!==""?{user:g}:{},...y!==void 0?{profile_id:y}:{},...h!==void 0?{replay_id:h}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),S=Dm(d,o,t);if(S&&Math.random()<S){const b=_?Jp([_],s.getDsn()):void 0,T=s&&s.getTransport();T&&b&&T.send(b).then(null,E=>{C&&m.error("Error while sending interaction:",E)});return}})}function gu(e){const t=Ei();if(!t||!k.performance.getEntries||!le)return;C&&m.log("[Tracing] Adding & adjusting spans using Performance API");const n=oe(le),r=t.getEntries(),{op:s,start_timestamp:i}=z(e);if(r.slice(xo).forEach(o=>{const a=oe(o.startTime),c=oe(o.duration);if(!(e.op==="navigation"&&i&&n+a<i))switch(o.entryType){case"navigation":{Rm(e,o,n);break}case"mark":case"paint":case"measure":{Cm(e,o,a,c,n);const u=bi(),l=o.startTime<u.firstHiddenTime;o.name==="first-paint"&&l&&(C&&m.log("[Measurements] Adding FP"),te.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&l&&(C&&m.log("[Measurements] Adding FCP"),te.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{Am(e,o,o.name,a,c,n);break}}}),xo=Math.max(r.length-1,0),Mm(e),s==="pageload"){Nm(te),["fcp","fp","lcp"].forEach(a=>{if(!te[a]||!i||n>=i)return;const c=te[a].value,u=n+oe(c),l=Math.abs((u-i)*1e3),d=l-c;C&&m.log(`[Measurements] Normalized ${a} from ${c} to ${l} (${d})`),te[a].value=l});const o=te["mark.fid"];o&&te.fid&&(Vt(e,{description:"first input delay",endTimestamp:o.value+oe(te.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:o.value}),delete te["mark.fid"]),"fcp"in te||delete te.cls,Object.keys(te).forEach(a=>{up(a,te[a].value,te[a].unit)}),Om(e)}Ce=void 0,mn=void 0,te={}}function Cm(e,t,n,r,s){const i=s+n,o=i+r;return Vt(e,{description:t.name,endTimestamp:o,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i}),i}function Rm(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Gn(e,t,r,n)}),Gn(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Gn(e,t,"fetch",n,"cache","domainLookupStart"),Gn(e,t,"domainLookup",n,"DNS"),xm(e,t,n)}function Gn(e,t,n,r,s,i){const o=i?t[i]:t[`${n}End`],a=t[`${n}Start`];!a||!o||Vt(e,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:r+oe(a),endTimestamp:r+oe(o)})}function xm(e,t,n){t.responseEnd&&(Vt(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+oe(t.requestStart),endTimestamp:n+oe(t.responseEnd)}),Vt(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+oe(t.responseStart),endTimestamp:n+oe(t.responseEnd)}))}function Am(e,t,n,r,s,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const o=dt(n),a={};fs(a,t,"transferSize","http.response_transfer_size"),fs(a,t,"encodedBodySize","http.response_content_length"),fs(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=n.includes(k.location.origin);const c=i+r,u=c+s;Vt(e,{description:n.replace(k.location.origin,""),endTimestamp:u,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}function Mm(e){const t=k.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),ds(n.rtt)&&(te["connection.rtt"]={value:n.rtt,unit:"millisecond"})),ds(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),ds(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function Om(e){Ce&&(C&&m.log("[Measurements] Adding LCP Data"),Ce.element&&e.setTag("lcp.element",Qe(Ce.element)),Ce.id&&e.setTag("lcp.id",Ce.id),Ce.url&&e.setTag("lcp.url",Ce.url.trim().slice(0,200)),e.setTag("lcp.size",Ce.size)),mn&&mn.sources&&(C&&m.log("[Measurements] Adding CLS Data"),mn.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,Qe(t.node))))}function fs(e,t,n,r){const s=t[n];s!=null&&s<Em&&(e[r]=s)}function Nm(e){const t=Gr();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(C&&m.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function Dm(e,t,n){if(!Tt(t))return!1;let r;return e!==void 0&&typeof t.tracesSampler=="function"?r=t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:k.location}):e!==void 0&&e.sampled!==void 0?r=e.sampled:typeof t.tracesSampleRate<"u"?r=t.tracesSampleRate:r=1,Nc(r)?r===!0?n:r===!1?0:r*n:(C&&m.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}function Lm(e,t,n,r,s="auto.http.browser"){if(!Tt()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const p=e.fetchData.__span;if(!p)return;const h=r[p];h&&(Fm(h,e),delete r[p]);return}const o=ae(),a=M(),{method:c,url:u}=e.fetchData,l=$m(u),d=l?dt(l).host:void 0,f=i?Ic({name:`${c} ${u}`,onlyIfParent:!0,attributes:{url:u,type:"fetch","http.method":c,"http.url":l,"server.address":d,[ct]:s},op:"http.client"}):void 0;if(f&&(e.fetchData.__span=f.spanContext().spanId,r[f.spanContext().spanId]=f),n(e.fetchData.url)&&a){const p=e.args[0];e.args[1]=e.args[1]||{};const h=e.args[1];h.headers=Pm(p,a,o,h,f)}return f}function Pm(e,t,n,r,s){const i=s||n.getSpan(),o=Ne(),{traceId:a,spanId:c,sampled:u,dsc:l}={...o.getPropagationContext(),...n.getPropagationContext()},d=i?Rr(i):ai(a,c,u),f=oc(l||(i?Yt(i):Or(a,t,n))),p=r.headers||(typeof Request<"u"&&Be(e,Request)?e.headers:void 0);if(p)if(typeof Headers<"u"&&Be(p,Headers)){const h=new Headers(p);return h.append("sentry-trace",d),f&&h.append(As,f),h}else if(Array.isArray(p)){const h=[...p,["sentry-trace",d]];return f&&h.push([As,f]),h}else{const h="baggage"in p?p.baggage:void 0,g=[];return Array.isArray(h)?g.push(...h):h&&g.push(h),f&&g.push(f),{...p,"sentry-trace":d,baggage:g.length>0?g.join(","):void 0}}else return{"sentry-trace":d,baggage:f}}function $m(e){try{return new URL(e).href}catch{return}}function Fm(e,t){if(t.response){pi(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus("internal_error");e.end()}const Bs=["localhost",/^\/(?!\/)/],bn={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:Bs,tracePropagationTargets:Bs};function vi(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o}={traceFetch:bn.traceFetch,traceXHR:bn.traceXHR,...e},a=typeof i=="function"?i:l=>!0,c=l=>jm(l,r||s),u={};t&&kr(l=>{const d=Lm(l,a,c,u);if(d){const f=_u(l.fetchData.url),p=f?dt(f).host:void 0;d.setAttributes({"http.url":f,"server.address":p})}o&&d&&Mo(d)}),n&&Cr(l=>{const d=Wm(l,a,c,u);o&&d&&Mo(d)})}function Bm(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function Mo(e){const{url:t}=z(e).data||{};if(!t||typeof t!="string")return;const n=tt("resource",({entries:r})=>{r.forEach(s=>{Bm(s)&&s.name.endsWith(t)&&(Um(s).forEach(o=>e.setAttribute(...o)),setTimeout(n))})})}function Hm(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function ke(e=0){return((le||performance.timeOrigin)+e)/1e3}function Um(e){const{name:t,version:n}=Hm(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),le?[...r,["http.request.redirect_start",ke(e.redirectStart)],["http.request.fetch_start",ke(e.fetchStart)],["http.request.domain_lookup_start",ke(e.domainLookupStart)],["http.request.domain_lookup_end",ke(e.domainLookupEnd)],["http.request.connect_start",ke(e.connectStart)],["http.request.secure_connection_start",ke(e.secureConnectionStart)],["http.request.connection_end",ke(e.connectEnd)],["http.request.request_start",ke(e.requestStart)],["http.request.response_start",ke(e.responseStart)],["http.request.response_end",ke(e.responseEnd)]]:r}function jm(e,t){return tn(e,t||Bs)}function Wm(e,t,n,r){const s=e.xhr,i=s&&s[$e];if(!Tt()||!s||s.__sentry_own_request__||!i)return;const o=t(i.url);if(e.endTimestamp&&o){const p=s.__sentry_xhr_span_id__;if(!p)return;const h=r[p];h&&i.status_code!==void 0&&(pi(h,i.status_code),h.end(),delete r[p]);return}const a=ae(),c=Ne(),u=_u(i.url),l=u?dt(u).host:void 0,d=o?Ic({name:`${i.method} ${i.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":i.method,"http.url":u,url:i.url,"server.address":l,[ct]:"auto.http.browser"},op:"http.client"}):void 0;d&&(s.__sentry_xhr_span_id__=d.spanContext().spanId,r[s.__sentry_xhr_span_id__]=d);const f=M();if(s.setRequestHeader&&n(i.url)&&f){const{traceId:p,spanId:h,sampled:g,dsc:y}={...c.getPropagationContext(),...a.getPropagationContext()},_=d?Rr(d):ai(p,h,g),S=oc(y||(d?Yt(d):Or(p,f,a)));zm(s,_,S)}return d}function zm(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(As,n)}catch{}}function _u(e){try{return new URL(e,k.location.origin).href}catch{return}}function Gm(e,t=!0,n=!0){if(!k||!k.location){C&&m.warn("Could not initialize routing instrumentation due to invalid location");return}let r=k.location.href,s;t&&(s=e({name:k.location.pathname,startTimestamp:le?le/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&kn(({to:i,from:o})=>{if(o===void 0&&r&&r.indexOf(i)!==-1){r=void 0;return}o!==i&&(r=void 0,s&&(C&&m.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.end()),s=e({name:k.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}const yu="BrowserTracing",qm={...pn,markBackgroundTransactions:!0,routingInstrumentation:Gm,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...bn},Oo=10;let Ym=class{constructor(t){this.name=yu,this._hasSetTracePropagationTargets=!1,_i(),C&&(this._hasSetTracePropagationTargets=!!(t&&(t.tracePropagationTargets||t.tracingOrigins))),this.options={...qm,...t},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=fu(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&mu(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&pu(),this.options._experiments.enableInteractions&&hu(),this._latestRoute={name:void 0,context:void 0}}setupOnce(t,n){this._getCurrentHub=n;const s=n().getClient(),i=s&&s.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:a,startTransactionOnPageLoad:c,markBackgroundTransactions:u,traceFetch:l,traceXHR:d,shouldCreateSpanForRequest:f,enableHTTPTimings:p,_experiments:h}=this.options,g=i&&i.tracePropagationTargets,y=g||this.options.tracePropagationTargets;C&&this._hasSetTracePropagationTargets&&g&&m.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o(_=>{const S=this._createRouteTransaction(_);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(S,_,n),S},c,a),u&&tu(),h.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),vi({traceFetch:l,traceXHR:d,tracePropagationTargets:y,shouldCreateSpanForRequest:f,enableHTTPTimings:p})}_createRouteTransaction(t){if(!this._getCurrentHub){C&&m.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`);return}const n=this._getCurrentHub(),{beforeNavigate:r,idleTimeout:s,finalTimeout:i,heartbeatInterval:o}=this.options,a=t.op==="pageload";let c;if(a){const p=a?No("sentry-trace"):"",h=a?No("baggage"):void 0,{traceId:g,dsc:y,parentSpanId:_,sampled:S}=cc(p,h);c={traceId:g,parentSpanId:_,parentSampled:S,...t,metadata:{...t.metadata,dynamicSamplingContext:y},trimEnd:!0}}else c={trimEnd:!0,...t};const u=typeof r=="function"?r(c):c,l=u===void 0?{...c,sampled:!1}:u;l.metadata=l.name!==c.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,l.sampled===!1&&C&&m.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),C&&m.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:d}=k,f=Sn(n,l,s,i,!0,{location:d},o,a);return a&&k.document&&(k.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(k.document.readyState)&&f.sendAutoFinishSignal()}),["interactive","complete"].includes(k.document.readyState)&&f.sendAutoFinishSignal()),f.registerBeforeFinishCallback(p=>{this._collectWebVitals(),gu(p)}),f}_registerInteractionListener(){let t;const n=()=>{const{idleTimeout:r,finalTimeout:s,heartbeatInterval:i}=this.options,o="ui.action.click",a=Oe();if(a&&a.op&&["navigation","pageload"].includes(a.op)){C&&m.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`);return}if(t&&(t.setFinishReason("interactionInterrupted"),t.end(),t=void 0),!this._getCurrentHub){C&&m.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRoute.name){C&&m.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}const c=this._getCurrentHub(),{location:u}=k,l={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[me]:this._latestRoute.context?Vm(this._latestRoute.context):"url"}};t=Sn(c,l,r,s,!0,{location:u},i)};["click"].forEach(r=>{k.document&&addEventListener(r,n,{once:!1,capture:!0})})}_registerInpInteractionListener(){const t=({entries:n})=>{const r=M(),s=r!==void 0&&r.getIntegrationByName!==void 0?r.getIntegrationByName("Replay"):void 0,i=s!==void 0?s.getReplayId():void 0,o=Oe(),a=ae(),c=a!==void 0?a.getUser():void 0;n.forEach(u=>{if(Xm(u)){const l=u.interactionId;if(l===void 0)return;const d=this._interactionIdToRouteNameMapping[l],f=u.duration,p=u.startTime,h=Object.keys(this._interactionIdToRouteNameMapping),g=h.length>0?h.reduce((y,_)=>this._interactionIdToRouteNameMapping[y].duration<this._interactionIdToRouteNameMapping[_].duration?y:_):void 0;if(u.entryType==="first-input"&&h.map(_=>this._interactionIdToRouteNameMapping[_]).some(_=>_.duration===f&&_.startTime===p)||!l)return;if(d)d.duration=Math.max(d.duration,f);else if(h.length<Oo||g===void 0||f>this._interactionIdToRouteNameMapping[g].duration){const y=this._latestRoute.name,_=this._latestRoute.context;y&&_&&(g&&Object.keys(this._interactionIdToRouteNameMapping).length>=Oo&&delete this._interactionIdToRouteNameMapping[g],this._interactionIdToRouteNameMapping[l]={routeName:y,duration:f,parentContext:_,user:c,activeTransaction:o,replayId:i,startTime:p})}}})};tt("event",t),tt("first-input",t)}};function No(e){const t=Fa(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function Vm(e){const t=e.attributes&&e.attributes[me],n=e.data&&e.data[me],r=e.metadata&&e.metadata.source;return t||n||r}function Xm(e){return"duration"in e}const Km="BrowserTracing",Jm={...pn,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...bn},$T=((e={})=>{const t=C?!!(e.tracePropagationTargets||e.tracingOrigins):!1;_i(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...Jm,...e},r=fu(),s={};n.enableInp&&mu(s,n.interactionsSampleRate),n.enableLongTask&&pu(),n._experiments.enableInteractions&&hu();const i={name:void 0,context:void 0};function o(a){const c=G(),{beforeStartSpan:u,idleTimeout:l,finalTimeout:d,heartbeatInterval:f}=n,p=a.op==="pageload";let h;if(p){const S=p?Do("sentry-trace"):"",b=p?Do("baggage"):void 0,{traceId:T,dsc:E,parentSpanId:I,sampled:A}=cc(S,b);h={traceId:T,parentSpanId:I,parentSampled:A,...a,metadata:{...a.metadata,dynamicSamplingContext:E},trimEnd:!0}}else h={trimEnd:!0,...a};const g=u?u(h):h;g.metadata=g.name!==h.name?{...g.metadata,source:"custom"}:g.metadata,i.name=g.name,i.context=g,g.sampled===!1&&C&&m.log(`[Tracing] Will not send ${g.op} transaction because of beforeNavigate.`),C&&m.log(`[Tracing] Starting ${g.op} transaction on scope`);const{location:y}=k,_=Sn(c,g,l,d,!0,{location:y},f,p);return p&&k.document&&(k.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(k.document.readyState)&&_.sendAutoFinishSignal()}),["interactive","complete"].includes(k.document.readyState)&&_.sendAutoFinishSignal()),_.registerBeforeFinishCallback(S=>{r(),gu(S)}),_}return{name:Km,setupOnce:()=>{},afterAllSetup(a){const c=a.getOptions(),{markBackgroundSpan:u,traceFetch:l,traceXHR:d,shouldCreateSpanForRequest:f,enableHTTPTimings:p,_experiments:h}=n,g=c&&c.tracePropagationTargets,y=g||n.tracePropagationTargets;C&&t&&g&&m.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let _,S=k.location&&k.location.href;if(a.on&&(a.on("startNavigationSpan",b=>{_&&(C&&m.log(`[Tracing] Finishing current transaction with op: ${z(_).op}`),_.end()),_=o({op:"navigation",...b})}),a.on("startPageLoadSpan",b=>{_&&(C&&m.log(`[Tracing] Finishing current transaction with op: ${z(_).op}`),_.end()),_=o({op:"pageload",...b})})),n.instrumentPageLoad&&a.emit&&k.location){const b={name:k.location.pathname,startTimestamp:le?le/1e3:void 0,origin:"auto.pageload.browser",attributes:{[me]:"url"}};Qm(a,b)}n.instrumentNavigation&&a.emit&&k.location&&kn(({to:b,from:T})=>{if(T===void 0&&S&&S.indexOf(b)!==-1){S=void 0;return}if(T!==b){S=void 0;const E={name:k.location.pathname,origin:"auto.navigation.browser",attributes:{[me]:"url"}};Zm(a,E)}}),u&&tu(),h.enableInteractions&&eg(n,i),n.enableInp&&ng(s,i),vi({traceFetch:l,traceXHR:d,tracePropagationTargets:y,shouldCreateSpanForRequest:f,enableHTTPTimings:p})},options:n}});function Qm(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=Dr();return(n&&z(n).op)==="pageload"?n:void 0}function Zm(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=Dr();return(n&&z(n).op)==="navigation"?n:void 0}function Do(e){const t=Fa(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function eg(e,t){let n;const r=()=>{const{idleTimeout:s,finalTimeout:i,heartbeatInterval:o}=e,a="ui.action.click",c=Oe();if(c&&c.op&&["navigation","pageload"].includes(c.op)){C&&m.warn(`[Tracing] Did not create ${a} transaction because a pageload or navigation transaction is in progress.`);return}if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name){C&&m.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`);return}const{location:u}=k,l={name:t.name,op:a,trimEnd:!0,data:{[me]:t.context?rg(t.context):"url"}};n=Sn(G(),l,s,i,!0,{location:u},o)};["click"].forEach(s=>{k.document&&addEventListener(s,r,{once:!1,capture:!0})})}function tg(e){return"duration"in e}const Lo=10;function ng(e,t){const n=({entries:r})=>{const s=M(),i=s!==void 0&&s.getIntegrationByName!==void 0?s.getIntegrationByName("Replay"):void 0,o=i!==void 0?i.getReplayId():void 0,a=Oe(),c=ae(),u=c!==void 0?c.getUser():void 0;r.forEach(l=>{if(tg(l)){const d=l.interactionId;if(d===void 0)return;const f=e[d],p=l.duration,h=l.startTime,g=Object.keys(e),y=g.length>0?g.reduce((_,S)=>e[_].duration<e[S].duration?_:S):void 0;if(l.entryType==="first-input"&&g.map(S=>e[S]).some(S=>S.duration===p&&S.startTime===h)||!d)return;if(f)f.duration=Math.max(f.duration,p);else if(g.length<Lo||y===void 0||p>e[y].duration){const _=t.name,S=t.context;_&&S&&(y&&Object.keys(e).length>=Lo&&delete e[y],e[d]={routeName:_,duration:p,parentContext:S,user:u,activeTransaction:a,replayId:o,startTime:h})}}})};tt("event",n),tt("first-input",n)}function rg(e){const t=e.attributes&&e.attributes[me],n=e.data&&e.data[me],r=e.metadata&&e.metadata.source;return t||n||r}function sg(){const e=vt();if(!e.__SENTRY__)return;const t={mongodb(){const r=at(module,"./node/integrations/mongo");return new r.Mongo},mongoose(){const r=at(module,"./node/integrations/mongo");return new r.Mongo},mysql(){const r=at(module,"./node/integrations/mysql");return new r.Mysql},pg(){const r=at(module,"./node/integrations/postgres");return new r.Postgres}},n=Object.keys(t).filter(r=>!!ht(r)).map(r=>{try{return t[r]()}catch{return}}).filter(r=>r);n.length>0&&(e.__SENTRY__.integrations=[...e.__SENTRY__.integrations||[],...n])}function Su(){_i(),ec()&&sg()}const x=O;let Hs=0;function bu(){return Hs>0}function ig(){Hs++,setTimeout(()=>{Hs--})}function gt(e,t={},n){if(typeof e!="function")return e;try{const s=e.__sentry_wrapped__;if(s)return typeof s=="function"?s:e;if(si(e))return e}catch{return e}const r=function(){const s=Array.prototype.slice.call(arguments);try{const i=s.map(o=>gt(o,t));return e.apply(this,i)}catch(i){throw ig(),Et(o=>{o.addEventProcessor(a=>(t.mechanism&&(Ts(a,void 0),pt(a,t.mechanism)),a.extra={...a.extra,arguments:s},a)),Ar(i)}),i}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}Wa(r,e),He(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const B=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Eu(e,t){const n=Ti(e,t),r={type:t&&t.name,value:ug(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function og(e,t,n,r){const s=M(),i=s&&s.getOptions().normalizeDepth,o={exception:{values:[{type:wr(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:fg(t,{isUnhandledRejection:r})}]},extra:{__serialized__:tc(t,i)}};if(n){const a=Ti(e,n);a.length&&(o.exception.values[0].stacktrace={frames:a})}return o}function ps(e,t){return{exception:{values:[Eu(e,t)]}}}function Ti(e,t){const n=t.stacktrace||t.stack||"",r=cg(t);try{return e(n,r)}catch{}return[]}const ag=/Minified React error #\d+;/i;function cg(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(ag.test(e.message))return 1}return 0}function ug(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function lg(e,t,n,r){const s=n&&n.syntheticException||void 0,i=Ii(e,t,s,r);return pt(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),zt(i)}function dg(e,t,n="info",r,s){const i=r&&r.syntheticException||void 0,o=Us(e,t,i,s);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),zt(o)}function Ii(e,t,n,r,s){let i;if(ei(t)&&t.error)return ps(e,t.error);if(zi(t)||dd(t)){const o=t;if("stack"in t)i=ps(e,t);else{const a=o.name||(zi(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=Us(e,c,n,r),Ts(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return Ht(t)?ps(e,t):ft(t)||wr(t)?(i=og(e,t,n,s),pt(i,{synthetic:!0}),i):(i=Us(e,t,n,r),Ts(i,`${t}`),pt(i,{synthetic:!0}),i)}function Us(e,t,n,r){const s={};if(r&&n){const i=Ti(e,n);i.length&&(s.exception={values:[{value:t,stacktrace:{frames:i}}]})}if(ti(t)){const{__sentry_template_string__:i,__sentry_template_values__:o}=t;return s.logentry={message:i,params:o},s}return s.message=t,s}function fg(e,{isUnhandledRejection:t}){const n=Id(e),r=t?"promise rejection":"exception";return ei(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:wr(e)?`Event \`${pg(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function pg(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function hg(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:_t(r)}},i=mg(e);return We(s,[i])}function mg(e){return[{type:"user_report"},e]}class gg extends Op{constructor(t){const n=x.SENTRY_SDK_SOURCE||qd();nh(t,"browser",["browser"],n),super(t),t.sendClientReports&&x.document&&x.document.addEventListener("visibilitychange",()=>{x.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return lg(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return dg(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){B&&m.warn("SDK not enabled, will not capture user feedback.");return}const n=hg(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){B&&m.log("No outcomes to send");return}if(!this._dsn){B&&m.log("No dsn provided, will not send outcomes");return}B&&m.log("Sending outcomes:",t);const n=Sf(t,this._options.tunnel&&_t(this._dsn));this._sendEnvelope(n)}}let dn;function _g(){if(dn)return dn;if(ks(x.fetch))return dn=x.fetch.bind(x);const e=x.document;let t=x.fetch;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){B&&m.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return dn=t.bind(x)}function yg(){dn=void 0}function Sg(e,t=_g()){let n=0,r=0;function s(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,a).then(c=>(n-=o,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return yg(),n-=o,r--,ii(c)}}return Wc(e,s)}const bg=4;function Eg(e){function t(n){return new _e((r,s)=>{const i=new XMLHttpRequest;i.onerror=s,i.onreadystatechange=()=>{i.readyState===bg&&r({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",e.url);for(const o in e.headers)Object.prototype.hasOwnProperty.call(e.headers,o)&&i.setRequestHeader(o,e.headers[o]);i.send(n.body)})}return Wc(e,t)}const on="?",vg=10,Tg=20,Ig=30,wg=40,kg=50;function Nn(e,t,n,r){const s={filename:e,function:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const Cg=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Rg=/\((\S*)(?::(\d+))(?::(\d+))\)/,xg=e=>{const t=Cg.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){const i=Rg.exec(t[2]);i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3])}const[r,s]=vu(t[1]||on,t[2]);return Nn(s,r,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},Ag=[Ig,xg],Mg=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Og=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ng=e=>{const t=Mg.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=Og.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],s=t[1]||on;return[s,r]=vu(s,r),Nn(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Dg=[kg,Ng],Lg=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Pg=e=>{const t=Lg.exec(e);return t?Nn(t[2],t[1]||on,+t[3],t[4]?+t[4]:void 0):void 0},$g=[wg,Pg],Fg=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Bg=e=>{const t=Fg.exec(e);return t?Nn(t[2],t[3]||on,+t[1]):void 0},FT=[vg,Bg],Hg=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Ug=e=>{const t=Hg.exec(e);return t?Nn(t[5],t[3]||t[4]||on,+t[1],+t[2]):void 0},BT=[Tg,Ug],jg=[Ag,Dg,$g],Wg=qa(...jg),vu=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:on,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},qn=1024,Tu="Breadcrumbs",zg=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Tu,setupOnce(){},setup(n){t.console&&Ya(Vg(n)),t.dom&&Xa(Yg(n,t.dom)),t.xhr&&Cr(Xg(n)),t.fetch&&kr(Kg(n)),t.history&&kn(Jg(n)),t.sentry&&n.on&&n.on("beforeSendEvent",qg(n))}}}),Iu=zg,Gg=ne(Tu,Iu);function qg(e){return function(n){M()===e&&et({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Xe(n)},{event:n})}}function Yg(e,t){return function(r){if(M()!==e)return;let s,i,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>qn&&(B&&m.warn(`\`dom.maxStringLength\` cannot exceed ${qn}, but a value of ${a} was configured. Sentry will use ${qn} instead.`),a=qn),typeof o=="string"&&(o=[o]);try{const u=r.event,l=Qg(u)?u.target:u;s=Qe(l,{keyAttrs:o,maxStringLength:a}),i=Ba(l)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};i&&(c.data={"ui.component_name":i}),et(c,{event:r.event,name:r.name,global:r.global})}}function Vg(e){return function(n){if(M()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:nc(n.level),message:sr(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${sr(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;et(r,{input:n.args,level:n.level})}}function Xg(e){return function(n){if(M()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[$e];if(!r||!s||!i)return;const{method:o,url:a,status_code:c,body:u}=i,l={method:o,url:a,status_code:c},d={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s};et({category:"xhr",data:l,type:"http"},d)}}function Kg(e){return function(n){if(M()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s};et({category:"fetch",data:i,level:"error",type:"http"},o)}else{const i=n.response,o={...n.fetchData,status_code:i&&i.status},a={input:n.args,response:i,startTimestamp:r,endTimestamp:s};et({category:"fetch",data:o,type:"http"},a)}}}function Jg(e){return function(n){if(M()!==e)return;let r=n.from,s=n.to;const i=dt(x.location.href);let o=r?dt(r):void 0;const a=dt(s);(!o||!o.path)&&(o=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),et({category:"navigation",data:{from:r,to:s}})}}function Qg(e){return!!e&&!!e.target}const wu="Dedupe",Zg=(()=>{let e;return{name:wu,setupOnce(){},processEvent(t){if(t.type)return t;try{if(t_(t,e))return B&&m.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),ku=Zg,e_=ne(wu,ku);function t_(e,t){return t?!!(n_(e,t)||r_(e,t)):!1}function n_(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Ru(e,t)||!Cu(e,t))}function r_(e,t){const n=Po(t),r=Po(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Ru(e,t)||!Cu(e,t))}function Cu(e,t){let n=$o(e),r=$o(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function Ru(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Po(e){return e.exception&&e.exception.values&&e.exception.values[0]}function $o(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}const xu="GlobalHandlers",s_=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:xu,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(o_(n),Fo("onerror")),t.onunhandledrejection&&(a_(n),Fo("onunhandledrejection"))}}}),Au=s_,i_=ne(xu,Au);function o_(e){Qa(t=>{const{stackParser:n,attachStacktrace:r}=Ou();if(M()!==e||bu())return;const{msg:s,url:i,line:o,column:a,error:c}=t,u=c===void 0&&Me(s)?l_(s,i,o,a):Mu(Ii(n,c||s,void 0,r,!1),i,o,a);u.level="error",Mr(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function a_(e){Za(t=>{const{stackParser:n,attachStacktrace:r}=Ou();if(M()!==e||bu())return;const s=c_(t),i=ni(s)?u_(s):Ii(n,s,void 0,r,!0);i.level="error",Mr(i,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function c_(e){if(ni(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return e}function u_(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function l_(e,t,n,r){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=ei(e)?e.message:e,o="Error";const a=i.match(s);return a&&(o=a[1],i=a[2]),Mu({exception:{values:[{type:o,value:i}]}},t,n,r)}function Mu(e,t,n,r){const s=e.exception=e.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,d=Me(t)&&t.length>0?t:$a();return c.length===0&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function Fo(e){B&&m.log(`Global Handler attached: ${e}`)}function Ou(){const e=M();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Nu="HttpContext",d_=(()=>({name:Nu,setupOnce(){},preprocessEvent(e){if(!x.navigator&&!x.location&&!x.document)return;const t=e.request&&e.request.url||x.location&&x.location.href,{referrer:n}=x.document||{},{userAgent:r}=x.navigator||{},s={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:s};e.request=i}})),Du=d_,f_=ne(Nu,Du),p_="cause",h_=5,Lu="LinkedErrors",m_=((e={})=>{const t=e.limit||h_,n=e.key||p_;return{name:Lu,setupOnce(){},preprocessEvent(r,s,i){const o=i.getOptions();La(Eu,o.stackParser,o.maxValueLength,n,t,r,s)}}}),Pu=m_,g_=ne(Lu,Pu),__=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],$u="TryCatch",y_=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:$u,setupOnce(){t.setTimeout&&K(x,"setTimeout",Bo),t.setInterval&&K(x,"setInterval",Bo),t.requestAnimationFrame&&K(x,"requestAnimationFrame",b_),t.XMLHttpRequest&&"XMLHttpRequest"in x&&K(XMLHttpRequest.prototype,"send",E_);const n=t.eventTarget;n&&(Array.isArray(n)?n:__).forEach(v_)}}}),Fu=y_,S_=ne($u,Fu);function Bo(e){return function(...t){const n=t[0];return t[0]=gt(n,{mechanism:{data:{function:Ue(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function b_(e){return function(t){return e.apply(this,[gt(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Ue(e)},handled:!1,type:"instrument"}})])}}function E_(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&K(n,s,function(i){const o={mechanism:{data:{function:s,handler:Ue(i)},handled:!1,type:"instrument"}},a=si(i);return a&&(o.mechanism.data.handler=Ue(a)),gt(i,o)})}),e.apply(this,t)}}function v_(e){const t=x,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(K(n,"addEventListener",function(r){return function(s,i,o){try{typeof i.handleEvent=="function"&&(i.handleEvent=gt(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Ue(i),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[s,gt(i,{mechanism:{data:{function:"addEventListener",handler:Ue(i),target:e},handled:!1,type:"instrument"}}),o])}}),K(n,"removeEventListener",function(r){return function(s,i,o){const a=i;try{const c=a&&a.__sentry_wrapped__;c&&r.call(this,s,c,o)}catch{}return r.call(this,s,a,o)}}))}const T_=[Xc(),Jc(),Fu(),Iu(),Au(),Pu(),ku(),Du()];function I_(e){return[...T_]}function HT(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=I_()),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),x.SENTRY_RELEASE&&x.SENTRY_RELEASE.id&&(e.release=x.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);const t={...e,stackParser:kd(e.stackParser||Wg),integrations:_p(e),transport:e.transport||(Ka()?Sg:Eg)};jp(gg,t),e.autoSessionTracking&&w_()}const UT=(e={},t=G())=>{if(!x.document){B&&m.error("Global document not defined in showReportDialog call");return}const{client:n,scope:r}=t.getStackTop(),s=e.dsn||n&&n.getDsn();if(!s){B&&m.error("DSN not configured for showReportDialog call");return}r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const i=x.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=mp(s,e),e.onLoad&&(i.onload=e.onLoad);const{onClose:o}=e;if(o){const c=u=>{if(u.data==="__sentry_reportdialog_closed__")try{o()}finally{x.removeEventListener("message",c)}};x.addEventListener("message",c)}const a=x.document.head||x.document.body;a?a.appendChild(i):B&&m.error("Not injecting report dialog. No injection point found in HTML")};function jT(){}function WT(e){e()}function zT(e){return gt(e)()}function w_(){if(typeof x.document>"u"){B&&m.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}co({ignoreDuration:!0}),uo(),kn(({from:e,to:t})=>{e!==void 0&&e!==t&&(co({ignoreDuration:!0}),uo())})}function GT(e){const t=M();t&&t.captureUserFeedback(e)}const k_=Object.freeze(Object.defineProperty({__proto__:null,Breadcrumbs:Gg,Dedupe:e_,GlobalHandlers:i_,HttpContext:f_,LinkedErrors:g_,TryCatch:S_},Symbol.toStringTag,{value:"Module"})),X=O,wi="sentryReplaySession",C_="replay_event",ki="Unable to send Replay",R_=3e5,x_=9e5,A_=5e3,M_=5500,O_=6e4,N_=5e3,D_=3,Ho=15e4,Yn=5e3,L_=3e3,P_=300,Ci=2e7,$_=4999,F_=15e3,Uo=36e5;function B_(e,t){return e??t()}function mr(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}var ie;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(ie||(ie={}));function H_(e){return e.nodeType===e.ELEMENT_NODE}function gn(e){const t=mr([e,"optionalAccess",n=>n.host]);return mr([t,"optionalAccess",n=>n.shadowRoot])===e}function _n(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function U_(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function j_(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function gr(e){try{const t=e.rules||e.cssRules;return t?U_(Array.from(t,Bu).join("")):null}catch{return null}}function Bu(e){let t;if(z_(e))try{t=gr(e.styleSheet)||j_(e)}catch{}else if(G_(e)&&e.selectorText.includes(":"))return W_(e.cssText);return t||e.cssText}function W_(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function z_(e){return"styleSheet"in e}function G_(e){return"selectorText"in e}class Hu{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;const n=mr([this,"access",r=>r.getMeta,"call",r=>r(t),"optionalAccess",r=>r.id]);return B_(n,()=>-1)}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function q_(){return new Hu}function qr({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function En({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function Xt(e){return e.toLowerCase()}function js(e){return e.toUpperCase()}const jo="__rrweb_original__";function Y_(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const i=t.getImageData,o=jo in i?i[jo]:i;if(new Uint32Array(o.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function Ri(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Xt(t):null}function _r(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}let V_=1;const X_=new RegExp("[^a-z0-9-_:]"),vn=-2;function xi(){return V_++}function K_(e){if(e instanceof HTMLFormElement)return"form";const t=Xt(e.tagName);return X_.test(t)?"div":t}function J_(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let xt,Wo;const Q_=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Z_=/^(?:[a-z+]+:)?\/\//i,ey=/^www\..*/i,ty=/^(data:)([^,]*),(.*)/i;function yr(e,t){return(e||"").replace(Q_,(n,r,s,i,o,a)=>{const c=s||o||a,u=r||i||"";if(!c)return n;if(Z_.test(c)||ey.test(c))return`url(${u}${c}${u})`;if(ty.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${J_(t)+c}${u})`;const l=t.split("/"),d=c.split("/");l.pop();for(const f of d)f!=="."&&(f===".."?l.pop():l.push(f));return`url(${u}${l.join("/")}${u})`})}const ny=/^[^ \t\n\r\u000c]+/,ry=/^[, \t\n\r\u000c]+/;function sy(e,t){if(t.trim()==="")return t;let n=0;function r(i){let o;const a=i.exec(t.substring(n));return a?(o=a[0],n+=o.length,o):""}const s=[];for(;r(ry),!(n>=t.length);){let i=r(ny);if(i.slice(-1)===",")i=Lt(e,i.substring(0,i.length-1)),s.push(i);else{let o="";i=Lt(e,i);let a=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((i+o).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((i+o).trim());break}else c==="("&&(a=!0);o+=c,n+=1}}}return s.join(", ")}function Lt(e,t){if(!t||t.trim()==="")return t;const n=e.createElement("a");return n.href=t,n.href}function iy(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Ai(){const e=document.createElement("a");return e.href="",e.href}function Uu(e,t,n,r,s,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?Lt(e,r):n==="srcset"?sy(e,r):n==="style"?yr(r,Ai()):t==="object"&&n==="data"?Lt(e,r):typeof i=="function"?i(n,r,s):r)}function ju(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function oy(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const i=e.classList[s];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function ay(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function ut(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:ut(e.parentNode,t,n,r+1)}function Pt(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(ay(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Kt(e,t,n,r,s,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const u=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=ut(o,Pt(r,s)),c<0)return!0;a=ut(o,Pt(t,n),c>=0?c:1/0)}else{if(a=ut(o,Pt(t,n)),a<0)return!1;c=ut(o,Pt(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function cy(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const a=setTimeout(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{clearTimeout(a),s=!0,t()});return}const o="about:blank";if(r.location.href!==o||e.src===o||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function uy(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const i=setTimeout(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{clearTimeout(i),r=!0,t()})}function ly(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:g,maskInputFn:y,dataURLOptions:_={},inlineImages:S,recordCanvas:b,keepIframeSrcFn:T,newlyAddedElement:E=!1}=t,I=dy(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:ie.Document,childNodes:[],compatMode:e.compatMode}:{type:ie.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ie.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:I};case e.ELEMENT_NODE:return py(e,{doc:n,blockClass:s,blockSelector:i,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:y,dataURLOptions:_,inlineImages:S,recordCanvas:b,keepIframeSrcFn:T,newlyAddedElement:E,rootId:I,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f});case e.TEXT_NODE:return fy(e,{maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,maskTextFn:g,maskInputOptions:h,maskInputFn:y,rootId:I});case e.CDATA_SECTION_NODE:return{type:ie.CDATA,textContent:"",rootId:I};case e.COMMENT_NODE:return{type:ie.Comment,textContent:e.textContent||"",rootId:I};default:return!1}}function dy(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function fy(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=t,d=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const p=d==="STYLE"?!0:void 0,h=d==="SCRIPT"?!0:void 0,g=d==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||mr([e,"access",_=>_.parentNode,"access",_=>_.sheet,"optionalAccess",_=>_.cssRules])&&(f=gr(e.parentNode.sheet))}catch(_){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${_}`,e)}f=yr(f,Ai())}h&&(f="SCRIPT_PLACEHOLDER");const y=Kt(e,r,i,s,o,n);if(!p&&!h&&!g&&f&&y&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),g&&f&&(c.textarea||y)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),d==="OPTION"&&f){const _=qr({type:null,tagName:d,maskInputOptions:c});f=En({isMasked:Kt(e,r,i,s,o,_),element:e,value:f,maskInputFn:u})}return{type:ie.Text,textContent:f||"",isStyle:p,rootId:l}}function py(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:g,maskTextClass:y,unmaskTextClass:_,maskTextSelector:S,unmaskTextSelector:b}=t,T=oy(e,r,s,i),E=K_(e);let I={};const A=e.attributes.length;for(let w=0;w<A;w++){const R=e.attributes[w];R.name&&!ju(E,R.name,R.value)&&(I[R.name]=Uu(n,E,Xt(R.name),R.value,e,c))}if(E==="link"&&o){const w=Array.from(n.styleSheets).find($=>$.href===e.href);let R=null;w&&(R=gr(w)),R&&(delete I.rel,delete I.href,I._cssText=yr(R,w.href))}if(E==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const w=gr(e.sheet);w&&(I._cssText=yr(w,Ai()))}if(E==="input"||E==="textarea"||E==="select"||E==="option"){const w=e,R=Ri(w),$=_r(w,js(E),R),J=w.checked;if(R!=="submit"&&R!=="button"&&$){const se=Kt(w,y,S,_,b,qr({type:R,tagName:js(E),maskInputOptions:a}));I.value=En({isMasked:se,element:w,value:$,maskInputFn:u})}J&&(I.checked=J)}if(E==="option"&&(e.selected&&!a.select?I.selected=!0:delete I.selected),E==="canvas"&&f){if(e.__context==="2d")Y_(e)||(I.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const w=e.toDataURL(l.type,l.quality),R=document.createElement("canvas");R.width=e.width,R.height=e.height;const $=R.toDataURL(l.type,l.quality);w!==$&&(I.rr_dataURL=w)}}if(E==="img"&&d){xt||(xt=n.createElement("canvas"),Wo=xt.getContext("2d"));const w=e,R=w.crossOrigin;w.crossOrigin="anonymous";const $=()=>{w.removeEventListener("load",$);try{xt.width=w.naturalWidth,xt.height=w.naturalHeight,Wo.drawImage(w,0,0),I.rr_dataURL=xt.toDataURL(l.type,l.quality)}catch(J){console.warn(`Cannot inline img src=${w.currentSrc}! Error: ${J}`)}R?I.crossOrigin=R:w.removeAttribute("crossorigin")};w.complete&&w.naturalWidth!==0?$():w.addEventListener("load",$)}if((E==="audio"||E==="video")&&(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop)),T){const{width:w,height:R}=e.getBoundingClientRect();I={class:I.class,rr_width:`${w}px`,rr_height:`${R}px`}}E==="iframe"&&!p(I.src)&&(e.contentDocument||(I.rr_src=I.src),delete I.src);let D;try{customElements.get(E)&&(D=!0)}catch{}return{type:ie.Element,tagName:E,attributes:I,childNodes:[],isSVG:iy(e)||void 0,needBlock:T,rootId:g,isCustom:D}}function V(e){return e==null?"":e.toLowerCase()}function hy(e,t){if(t.comment&&e.type===ie.Comment)return!0;if(e.type===ie.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(V(e.attributes.name).match(/^msapplication-tile(image|color)$/)||V(e.attributes.name)==="application-name"||V(e.attributes.rel)==="icon"||V(e.attributes.rel)==="apple-touch-icon"||V(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&V(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(V(e.attributes.property).match(/^(og|twitter|fb):/)||V(e.attributes.name).match(/^(og|twitter):/)||V(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(V(e.attributes.name)==="robots"||V(e.attributes.name)==="googlebot"||V(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(V(e.attributes.name)==="author"||V(e.attributes.name)==="generator"||V(e.attributes.name)==="framework"||V(e.attributes.name)==="publisher"||V(e.attributes.name)==="progid"||V(e.attributes.property).match(/^article:/)||V(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(V(e.attributes.name)==="google-site-verification"||V(e.attributes.name)==="yandex-verification"||V(e.attributes.name)==="csrf-token"||V(e.attributes.name)==="p:domain_verify"||V(e.attributes.name)==="verify-v1"||V(e.attributes.name)==="verification"||V(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function $t(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:g,maskTextFn:y,maskInputFn:_,slimDOMOptions:S,dataURLOptions:b={},inlineImages:T=!1,recordCanvas:E=!1,onSerialize:I,onIframeLoad:A,iframeLoadTimeout:D=5e3,onStylesheetLoad:w,stylesheetLoadTimeout:R=5e3,keepIframeSrcFn:$=()=>!1,newlyAddedElement:J=!1}=t;let{preserveWhiteSpace:se=!0}=t;const ue=ly(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:y,maskInputFn:_,dataURLOptions:b,inlineImages:T,recordCanvas:E,keepIframeSrcFn:$,newlyAddedElement:J});if(!ue)return console.warn(e,"not serialized"),null;let ge;r.hasNode(e)?ge=r.getId(e):hy(ue,S)||!se&&ue.type===ie.Text&&!ue.isStyle&&!ue.textContent.replace(/^\s+|\s+$/gm,"").length?ge=vn:ge=xi();const q=Object.assign(ue,{id:ge});if(r.add(e,q),ge===vn)return null;I&&I(e);let Se=!f;if(q.type===ie.Element){Se=Se&&!q.needBlock,delete q.needBlock;const re=e.shadowRoot;re&&_n(re)&&(q.isShadowHost=!0)}if((q.type===ie.Document||q.type===ie.Element)&&Se){S.headWhitespace&&q.type===ie.Element&&q.tagName==="head"&&(se=!1);const re={doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:y,maskInputFn:_,slimDOMOptions:S,dataURLOptions:b,inlineImages:T,recordCanvas:E,preserveWhiteSpace:se,onSerialize:I,onIframeLoad:A,iframeLoadTimeout:D,onStylesheetLoad:w,stylesheetLoadTimeout:R,keepIframeSrcFn:$};for(const he of Array.from(e.childNodes)){const be=$t(he,re);be&&q.childNodes.push(be)}if(H_(e)&&e.shadowRoot)for(const he of Array.from(e.shadowRoot.childNodes)){const be=$t(he,re);be&&(_n(e.shadowRoot)&&(be.isShadow=!0),q.childNodes.push(be))}}return e.parentNode&&gn(e.parentNode)&&_n(e.parentNode)&&(q.isShadow=!0),q.type===ie.Element&&q.tagName==="iframe"&&cy(e,()=>{const re=e.contentDocument;if(re&&A){const he=$t(re,{doc:re,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:y,maskInputFn:_,slimDOMOptions:S,dataURLOptions:b,inlineImages:T,recordCanvas:E,preserveWhiteSpace:se,onSerialize:I,onIframeLoad:A,iframeLoadTimeout:D,onStylesheetLoad:w,stylesheetLoadTimeout:R,keepIframeSrcFn:$});he&&A(e,he)}},D),q.type===ie.Element&&q.tagName==="link"&&q.attributes.rel==="stylesheet"&&uy(e,()=>{if(w){const re=$t(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:y,maskInputFn:_,slimDOMOptions:S,dataURLOptions:b,inlineImages:T,recordCanvas:E,preserveWhiteSpace:se,onSerialize:I,onIframeLoad:A,iframeLoadTimeout:D,onStylesheetLoad:w,stylesheetLoadTimeout:R,keepIframeSrcFn:$});re&&w(e,re)}},R),q}function my(e,t){const{mirror:n=new Hu,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:g,maskTextFn:y,maskInputFn:_,slimDOM:S=!1,dataURLOptions:b,preserveWhiteSpace:T,onSerialize:E,onIframeLoad:I,iframeLoadTimeout:A,onStylesheetLoad:D,stylesheetLoadTimeout:w,keepIframeSrcFn:R=()=>!1}=t||{};return $t(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:g,maskTextFn:y,maskInputFn:_,slimDOMOptions:S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:S==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:S===!1?{}:S,dataURLOptions:b,inlineImages:f,recordCanvas:p,preserveWhiteSpace:T,onSerialize:E,onIframeLoad:I,iframeLoadTimeout:A,onStylesheetLoad:D,stylesheetLoadTimeout:w,keepIframeSrcFn:R,newlyAddedElement:!1})}function Ge(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}function pe(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Ot=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let zo={map:{},getId(){return console.error(Ot),-1},getNode(){return console.error(Ot),null},removeNodeFromMap(){console.error(Ot)},has(){return console.error(Ot),!1},reset(){console.error(Ot)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(zo=new Proxy(zo,{get(e,t,n){return t==="map"&&console.error(Ot),Reflect.get(e,t,n)}}));function Tn(e,t,n={}){let r=null,s=0;return function(...i){const o=Date.now();!s&&n.leading===!1&&(s=o);const a=t-(o-s),c=this;a<=0||a>t?(r&&(vy(r),r=null),s=o,e.apply(c,i)):!r&&n.trailing!==!1&&(r=Yr(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function Wu(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(o){Yr(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>Wu(e,t,i||{},!0)}function Mi(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let Sr=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Sr=()=>new Date().getTime());function zu(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:Ge([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||Ge([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||Ge([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:Ge([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||Ge([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||Ge([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function Gu(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function qu(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Yu(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function Ie(e,t,n,r,s){if(!e)return!1;const i=Yu(e);if(!i)return!1;const o=Pt(t,n);if(!s){const u=r&&i.matches(r);return o(i)&&!u}const a=ut(i,o);let c=-1;return a<0?!1:(r&&(c=ut(i,Pt(null,r))),a>-1&&c<0?!0:a<c)}function gy(e,t){return t.getId(e)!==-1}function hs(e,t){return t.getId(e)===vn}function Vu(e,t){if(gn(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Vu(e.parentNode,t):!0:!0}function Ws(e){return!!e.changedTouches}function _y(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function Xu(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Ku(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function zs(e){return!!Ge([e,"optionalAccess",t=>t.shadowRoot])}class yy{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return If(this.styleIDMap.get(t),()=>-1)}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Ju(e){let t=null;return Ge([e,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Sy(e){let t=e,n;for(;n=Ju(t);)t=n;return t}function by(e){const t=e.ownerDocument;if(!t)return!1;const n=Sy(e);return t.contains(n)}function Qu(e){const t=e.ownerDocument;return t?t.contains(e)||by(e):!1}const Go={};function Oi(e){const t=Go[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(s)}catch{}return Go[e]=r.bind(window)}function Ey(...e){return Oi("requestAnimationFrame")(...e)}function Yr(...e){return Oi("setTimeout")(...e)}function vy(...e){return Oi("clearTimeout")(...e)}var L=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(L||{}),P=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(P||{}),de=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(de||{}),De=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(De||{});function Ty(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}function qo(e){return"__ln"in e}class Iy{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=Ty([n,"optionalAccess",s=>s.next])||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&qo(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&qo(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Yo=(e,t)=>`${e}@${t}`;class wy{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new Iy,s=c=>{let u=c,l=vn;for(;l===vn;)u=u&&u.nextSibling,l=u&&this.mirror.getId(u);return l},i=c=>{if(!c.parentNode||!Qu(c))return;const u=gn(c.parentNode)?this.mirror.getId(Ju(c)):this.mirror.getId(c.parentNode),l=s(c);if(u===-1||l===-1)return r.addNode(c);const d=$t(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{Xu(f,this.mirror)&&this.iframeManager.addIframe(f),Ku(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),zs(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{this.iframeManager.attachIframe(f,p),this.shadowDomManager.observeAttachShadow(f)},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)}});d&&(t.push({parentId:u,nextId:l,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)Vo(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!Xo(this.droppedSet,c)&&!Vo(this.removes,c,this.mirror)||Xo(this.movedSet,c)?i(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const u=this.mirror.getId(o.value.parentNode),l=s(o.value);u!==-1&&l!==-1&&(c=o)}if(!c){let u=r.tail;for(;u;){const l=u;if(u=u.previous,l){const d=this.mirror.getId(l.value.parentNode);if(s(l.value)===-1)continue;if(d!==-1){c=l;break}else{const p=l.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=l;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),i(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const l=JSON.stringify(c.styleDiff),d=JSON.stringify(c._unchangedStyles);l.length<u.style.length&&(l+d).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!hs(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!Ie(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Kt(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,Yu(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if(r==="value"){const o=Ri(n),a=n.tagName;s=_r(n,a,o);const c=qr({maskInputOptions:this.maskInputOptions,tagName:a,type:o}),u=Kt(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=En({isMasked:u,element:n,value:s,maskInputFn:this.maskInputFn})}if(Ie(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!n.contentDocument)r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!ju(n.tagName,r)&&(i.attributes[r]=Uu(this.doc,Xt(n.tagName),Xt(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");t.oldValue&&o.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==o.style.getPropertyValue(a)||u!==o.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(const a of Array.from(o.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(Ie(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=gn(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ie(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||hs(n,this.mirror)||!gy(n,this.mirror)||(this.addedSet.has(n)?(Gs(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Vu(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Yo(r,s)]?Gs(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:gn(t.target)&&_n(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(hs(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Yo(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ie(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),zs(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Gs(e,t){e.delete(t),t.childNodes.forEach(n=>Gs(e,n))}function Vo(e,t,n){return e.length===0?!1:Zu(e,t,n)}function Zu(e,t,n){const{parentNode:r}=t;if(!r)return!1;const s=n.getId(r);return e.some(i=>i.id===s)?!0:Zu(e,r,n)}function Xo(e,t){return e.size===0?!1:el(e,t)}function el(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:el(e,n):!1}let yn;function ky(e){yn=e}function Cy(){yn=void 0}const F=e=>yn?((...n)=>{try{return e(...n)}catch(r){if(yn&&yn(r)===!0)return()=>{};throw r}}):e;function Re(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}const Ft=[];function Dn(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function tl(e,t){const n=new wy;Ft.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=Re([window,"optionalAccess",o=>o.Zone,"optionalAccess",o=>o.__symbol__,"optionalCall",o=>o("MutationObserver")]);s&&window[s]&&(r=window[s]);const i=new r(F(o=>{e.onMutation&&e.onMutation(o)===!1||n.processMutations.bind(n)(o)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function Ry({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],a;const c=Tn(F(d=>{const f=Date.now()-a;e(o.map(p=>(p.timeOffset-=f,p)),d),o=[],a=null}),i),u=F(Tn(F(d=>{const f=Dn(d),{clientX:p,clientY:h}=Ws(d)?d.changedTouches[0]:d;a||(a=Sr()),o.push({x:p,y:h,id:r.getId(f),timeOffset:Sr()-a}),c(typeof DragEvent<"u"&&d instanceof DragEvent?P.Drag:d instanceof MouseEvent?P.MouseMove:P.TouchMove)}),s,{trailing:!1})),l=[pe("mousemove",u,n),pe("touchmove",u,n),pe("drag",u,n)];return F(()=>{l.forEach(d=>d())})}function xy({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let u=null;const l=d=>f=>{const p=Dn(f);if(Ie(p,r,s,i,!0))return;let h=null,g=d;if("pointerType"in f){switch(f.pointerType){case"mouse":h=De.Mouse;break;case"touch":h=De.Touch;break;case"pen":h=De.Pen;break}h===De.Touch?de[d]===de.MouseDown?g="TouchStart":de[d]===de.MouseUp&&(g="TouchEnd"):De.Pen}else Ws(f)&&(h=De.Touch);h!==null?(u=h,(g.startsWith("Touch")&&h===De.Touch||g.startsWith("Mouse")&&h===De.Mouse)&&(h=null)):de[d]===de.Click&&(h=u,u=null);const y=Ws(f)?f.changedTouches[0]:f;if(!y)return;const _=n.getId(p),{clientX:S,clientY:b}=y;F(e)({type:de[g],id:_,x:S,y:b,...h!==null&&{pointerType:h}})};return Object.keys(de).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let f=Xt(d);const p=l(d);if(window.PointerEvent)switch(de[d]){case de.MouseDown:case de.MouseUp:f=f.replace("mouse","pointer");break;case de.TouchStart:case de.TouchEnd:return}c.push(pe(f,p,t))}),F(()=>{c.forEach(d=>d())})}function nl({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){const a=F(Tn(F(c=>{const u=Dn(c);if(!u||Ie(u,r,s,i,!0))return;const l=n.getId(u);if(u===t&&t.defaultView){const d=zu(t.defaultView);e({id:l,x:d.left,y:d.top})}else e({id:l,x:u.scrollLeft,y:u.scrollTop})}),o.scroll||100));return pe("scroll",a,t)}function Ay({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=F(Tn(F(()=>{const i=Gu(),o=qu();(n!==i||r!==o)&&(e({width:Number(o),height:Number(i)}),n=i,r=o)}),200));return pe("resize",s,t)}const My=["INPUT","TEXTAREA","SELECT"],Ko=new WeakMap;function Oy({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:g}){function y(A){let D=Dn(A);const w=A.isTrusted,R=D&&js(D.tagName);if(R==="OPTION"&&(D=D.parentElement),!D||!R||My.indexOf(R)<0||Ie(D,r,s,i,!0))return;const $=D;if($.classList.contains(o)||a&&$.matches(a))return;const J=Ri(D);let se=_r($,R,J),ue=!1;const ge=qr({maskInputOptions:c,tagName:R,type:J}),q=Kt(D,f,h,p,g,ge);(J==="radio"||J==="checkbox")&&(ue=D.checked),se=En({isMasked:q,element:D,value:se,maskInputFn:u}),_(D,d?{text:se,isChecked:ue,userTriggered:w}:{text:se,isChecked:ue});const Se=D.name;J==="radio"&&Se&&ue&&t.querySelectorAll(`input[type="radio"][name="${Se}"]`).forEach(re=>{if(re!==D){const he=En({isMasked:q,element:re,value:_r(re,R,J),maskInputFn:u});_(re,d?{text:he,isChecked:!ue,userTriggered:!1}:{text:he,isChecked:!ue})}})}function _(A,D){const w=Ko.get(A);if(!w||w.text!==D.text||w.isChecked!==D.isChecked){Ko.set(A,D);const R=n.getId(A);F(e)({...D,id:R})}}const b=(l.input==="last"?["change"]:["input","change"]).map(A=>pe(A,F(y),t)),T=t.defaultView;if(!T)return()=>{b.forEach(A=>A())};const E=T.Object.getOwnPropertyDescriptor(T.HTMLInputElement.prototype,"value"),I=[[T.HTMLInputElement.prototype,"value"],[T.HTMLInputElement.prototype,"checked"],[T.HTMLSelectElement.prototype,"value"],[T.HTMLTextAreaElement.prototype,"value"],[T.HTMLSelectElement.prototype,"selectedIndex"],[T.HTMLOptionElement.prototype,"selected"]];return E&&E.set&&b.push(...I.map(A=>Wu(A[0],A[1],{set(){F(y)({target:this,isTrusted:!1})}},!1,T))),F(()=>{b.forEach(A=>A())})}function br(e){const t=[];function n(r,s){if(Vn("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Vn("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Vn("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Vn("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(o)}return s}return n(e,t)}function qe(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function Ny({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:F((l,d,f)=>{const[p,h]=f,{id:g,styleId:y}=qe(d,t,n.styleMirror);return(g&&g!==-1||y&&y!==-1)&&e({id:g,styleId:y,adds:[{rule:p,index:h}]}),l.apply(d,f)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:F((l,d,f)=>{const[p]=f,{id:h,styleId:g}=qe(d,t,n.styleMirror);return(h&&h!==-1||g&&g!==-1)&&e({id:h,styleId:g,removes:[{index:p}]}),l.apply(d,f)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:F((l,d,f)=>{const[p]=f,{id:h,styleId:g}=qe(d,t,n.styleMirror);return(h&&h!==-1||g&&g!==-1)&&e({id:h,styleId:g,replace:p}),l.apply(d,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:F((l,d,f)=>{const[p]=f,{id:h,styleId:g}=qe(d,t,n.styleMirror);return(h&&h!==-1||g&&g!==-1)&&e({id:h,styleId:g,replaceSync:p}),l.apply(d,f)})}));const c={};Xn("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Xn("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Xn("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Xn("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([l,d])=>{u[l]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(u[l].insertRule,{apply:F((f,p,h)=>{const[g,y]=h,{id:_,styleId:S}=qe(p.parentStyleSheet,t,n.styleMirror);return(_&&_!==-1||S&&S!==-1)&&e({id:_,styleId:S,adds:[{rule:g,index:[...br(p),y||0]}]}),f.apply(p,h)})}),d.prototype.deleteRule=new Proxy(u[l].deleteRule,{apply:F((f,p,h)=>{const[g]=h,{id:y,styleId:_}=qe(p.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||_&&_!==-1)&&e({id:y,styleId:_,removes:[{index:[...br(p),g]}]}),f.apply(p,h)})})}),F(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=i,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([l,d])=>{d.prototype.insertRule=u[l].insertRule,d.prototype.deleteRule=u[l].deleteRule})})}function rl({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?Re([n,"access",o=>o.defaultView,"optionalAccess",o=>o.Document]):Re([n,"access",o=>o.ownerDocument,"optionalAccess",o=>o.defaultView,"optionalAccess",o=>o.ShadowRoot]),i=Re([s,"optionalAccess",o=>o.prototype])?Object.getOwnPropertyDescriptor(Re([s,"optionalAccess",o=>o.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return Re([i,"access",o=>o.get,"optionalAccess",o=>o.call,"call",o=>o(this)])},set(o){const a=Re([i,"access",c=>c.set,"optionalAccess",c=>c.call,"call",c=>c(this,o)]);if(r!==null&&r!==-1)try{t.adoptStyleSheets(o,r)}catch{}return a}}),F(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function Dy({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const i=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:F((a,c,u)=>{const[l,d,f]=u;if(n.has(l))return i.apply(c,[l,d,f]);const{id:p,styleId:h}=qe(Re([c,"access",g=>g.parentRule,"optionalAccess",g=>g.parentStyleSheet]),t,r.styleMirror);return(p&&p!==-1||h&&h!==-1)&&e({id:p,styleId:h,set:{property:l,value:d,priority:f},index:br(c.parentRule)}),a.apply(c,u)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:F((a,c,u)=>{const[l]=u;if(n.has(l))return o.apply(c,[l]);const{id:d,styleId:f}=qe(Re([c,"access",p=>p.parentRule,"optionalAccess",p=>p.parentStyleSheet]),t,r.styleMirror);return(d&&d!==-1||f&&f!==-1)&&e({id:d,styleId:f,remove:{property:l},index:br(c.parentRule)}),a.apply(c,u)})}),F(()=>{s.CSSStyleDeclaration.prototype.setProperty=i,s.CSSStyleDeclaration.prototype.removeProperty=o})}function Ly({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:i,doc:o}){const a=F(u=>Tn(F(l=>{const d=Dn(l);if(!d||Ie(d,t,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:g}=d;e({type:u,id:s.getId(d),currentTime:f,volume:p,muted:h,playbackRate:g})}),i.media||500)),c=[pe("play",a(0),o),pe("pause",a(1),o),pe("seeked",a(2),o),pe("volumechange",a(3),o),pe("ratechange",a(4),o)];return F(()=>{c.forEach(u=>u())})}function Py({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,l){const d=new i(c,u,l);return s.set(d,{family:c,buffer:typeof u!="string",descriptors:l,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),d};const o=Mi(t.fonts,"add",function(a){return function(c){return Yr(F(()=>{const u=s.get(c);u&&(e(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(o),F(()=>{r.forEach(a=>a())})}function $y(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,selectionCb:o}=e;let a=!0;const c=F(()=>{const u=t.getSelection();if(!u||a&&Re([u,"optionalAccess",f=>f.isCollapsed]))return;a=u.isCollapsed||!1;const l=[],d=u.rangeCount||0;for(let f=0;f<d;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:g,endContainer:y,endOffset:_}=p;Ie(h,r,s,i,!0)||Ie(y,r,s,i,!0)||l.push({start:n.getId(h),startOffset:g,end:n.getId(y),endOffset:_})}o({ranges:l})});return c(),pe("selectionchange",c)}function Fy({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:Mi(n.customElements,"define",function(s){return function(i,o,a){try{t({define:{name:i}})}catch{}return s.apply(this,[i,o,a])}})}function By(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=tl(e,e.doc),s=Ry(e),i=xy(e),o=nl(e),a=Ay(e,{win:n}),c=Oy(e),u=Ly(e),l=Ny(e,{win:n}),d=rl(e,e.doc),f=Dy(e,{win:n}),p=e.collectFonts?Py(e):()=>{},h=$y(e),g=Fy(e),y=[];for(const _ of e.plugins)y.push(_.observer(_.callback,n,_.options));return F(()=>{Ft.forEach(_=>_.reset()),r.disconnect(),s(),i(),o(),a(),c(),u(),l(),d(),f(),p(),h(),g(),y.forEach(_=>_())})}function Vn(e){return typeof window[e]<"u"}function Xn(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class qs{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const i=r||this.getIdToRemoteIdMap(t),o=s||this.getRemoteIdToIdMap(t);let a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),o.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const i=s.get(n);return i||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}function Jo(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}class Hy{constructor(){this.crossOriginIframeMirror=new qs(xi),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Uy{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new qs(xi),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new qs(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Jo([this,"access",r=>r.loadListener,"optionalCall",r=>r(t)]),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const i=this.transformCrossOriginEvent(s,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case L.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:L.IncrementalSnapshot,data:{source:P.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case L.Meta:case L.Load:case L.DomContentLoaded:return!1;case L.Plugin:return n;case L.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case L.IncrementalSnapshot:switch(n.data.source){case P.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(r.node,s)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case P.Drag:case P.TouchMove:case P.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case P.ViewportResize:return!1;case P.MediaInteraction:case P.MouseInteraction:case P.Scroll:case P.CanvasMutation:case P.Input:return this.replaceIds(n.data,t,["id"]),n;case P.StyleSheetRule:case P.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case P.Font:return n;case P.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case P.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),Jo([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(s=>{this.replaceStyleIds(s,t,["styleId"])})]),n}}return!1}replace(t,n,r,s){for(const i of s)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==ie.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class jy{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Wy{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!_n(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const r=tl({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(nl({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Yr(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(rl({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(Mi(t.prototype,"attachShadow",function(s){return function(i){const o=s.call(this,i);return this.shadowRoot&&Qu(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Qo{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class zy{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new yy,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const i of t){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),s.push({styleId:o,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:Bu(a),index:c}))})),r.styleIds.push(o)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class Gy{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){Ey(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let ee,Er;const ve=q_();function Ke(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:g,maskInputOptions:y,slimDOMOptions:_,maskAttributeFn:S,maskInputFn:b,maskTextFn:T,maxCanvasSize:E=null,packFn:I,sampling:A={},dataURLOptions:D={},mousemoveWait:w,recordCanvas:R=!1,recordCrossOriginIframes:$=!1,recordAfter:J=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:se=!1,collectFonts:ue=!1,inlineImages:ge=!1,plugins:q,keepIframeSrcFn:Se=()=>!1,ignoreCSSAttributes:re=new Set([]),errorHandler:he,onMutation:be,getCanvasManager:es}=e;ky(he);const kt=$?window.parent===window:!0;let ze=!1;if(!kt)try{window.parent.document&&(ze=!1)}catch{ze=!0}if(kt&&!t)throw new Error("emit function is required");w!==void 0&&A.mousemove===void 0&&(A.mousemove=w),ve.reset();const Ct=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:y!==void 0?y:{},an=_===!0||_==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:_==="all",headMetaDescKeywords:_==="all"}:_||{};_y();let ts,ns=0;const Ui=U=>{for(const Ee of q||[])Ee.eventProcessor&&(U=Ee.eventProcessor(U));return I&&!ze&&(U=I(U)),U};ee=(U,Ee)=>{const H=U;if(H.timestamp=Sr(),N([Ft,"access",Z=>Z[0],"optionalAccess",Z=>Z.isFrozen,"call",Z=>Z()])&&H.type!==L.FullSnapshot&&!(H.type===L.IncrementalSnapshot&&H.data.source===P.Mutation)&&Ft.forEach(Z=>Z.unfreeze()),kt)N([t,"optionalCall",Z=>Z(Ui(H),Ee)]);else if(ze){const Z={type:"rrweb",event:Ui(H),origin:window.location.origin,isCheckout:Ee};window.parent.postMessage(Z,"*")}if(H.type===L.FullSnapshot)ts=H,ns=0;else if(H.type===L.IncrementalSnapshot){if(H.data.source===P.Mutation&&H.data.isAttachIframe)return;ns++;const Z=r&&ns>=r,j=n&&ts&&H.timestamp-ts.timestamp>n;(Z||j)&&ss(!0)}};const Pn=U=>{ee({type:L.IncrementalSnapshot,data:{source:P.Mutation,...U}})},ji=U=>ee({type:L.IncrementalSnapshot,data:{source:P.Scroll,...U}}),cd=U=>ee({type:L.IncrementalSnapshot,data:{source:P.CanvasMutation,...U}}),ud=U=>ee({type:L.IncrementalSnapshot,data:{source:P.AdoptedStyleSheet,...U}}),nt=new zy({mutationCb:Pn,adoptedStyleSheetCb:ud}),rt=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Hy:new Uy({mirror:ve,mutationCb:Pn,stylesheetManager:nt,recordCrossOriginIframes:$,wrappedEmit:ee});for(const U of q||[])U.getMirror&&U.getMirror({nodeMirror:ve,crossOriginIframeMirror:rt.crossOriginIframeMirror,crossOriginIframeStyleMirror:rt.crossOriginIframeStyleMirror});const rs=new Gy,Wi=Yy(es,{mirror:ve,win:window,mutationCb:U=>ee({type:L.IncrementalSnapshot,data:{source:P.CanvasMutation,...U}}),recordCanvas:R,blockClass:s,blockSelector:i,unblockSelector:o,maxCanvasSize:E,sampling:A.canvas,dataURLOptions:D,errorHandler:he}),$n=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new jy:new Wy({mutationCb:Pn,scrollCb:ji,bypassOptions:{onMutation:be,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:Ct,dataURLOptions:D,maskAttributeFn:S,maskTextFn:T,maskInputFn:b,recordCanvas:R,inlineImages:ge,sampling:A,slimDOMOptions:an,iframeManager:rt,stylesheetManager:nt,canvasManager:Wi,keepIframeSrcFn:Se,processedNodeManager:rs},mirror:ve}),ss=(U=!1)=>{ee({type:L.Meta,data:{href:window.location.href,width:qu(),height:Gu()}},U),nt.reset(),$n.init(),Ft.forEach(H=>H.lock());const Ee=my(document,{mirror:ve,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:Ct,maskAttributeFn:S,maskInputFn:b,maskTextFn:T,slimDOM:an,dataURLOptions:D,recordCanvas:R,inlineImages:ge,onSerialize:H=>{Xu(H,ve)&&rt.addIframe(H),Ku(H,ve)&&nt.trackLinkElement(H),zs(H)&&$n.addShadowRoot(H.shadowRoot,document)},onIframeLoad:(H,Z)=>{rt.attachIframe(H,Z),$n.observeAttachShadow(H)},onStylesheetLoad:(H,Z)=>{nt.attachLinkElement(H,Z)},keepIframeSrcFn:Se});if(!Ee)return console.warn("Failed to snapshot the document");ee({type:L.FullSnapshot,data:{node:Ee,initialOffset:zu(window)}}),Ft.forEach(H=>H.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&nt.adoptStyleSheets(document.adoptedStyleSheets,ve.getId(document))};Er=ss;try{const U=[],Ee=Z=>F(By)({onMutation:be,mutationCb:Pn,mousemoveCb:(j,st)=>ee({type:L.IncrementalSnapshot,data:{source:st,positions:j}}),mouseInteractionCb:j=>ee({type:L.IncrementalSnapshot,data:{source:P.MouseInteraction,...j}}),scrollCb:ji,viewportResizeCb:j=>ee({type:L.IncrementalSnapshot,data:{source:P.ViewportResize,...j}}),inputCb:j=>ee({type:L.IncrementalSnapshot,data:{source:P.Input,...j}}),mediaInteractionCb:j=>ee({type:L.IncrementalSnapshot,data:{source:P.MediaInteraction,...j}}),styleSheetRuleCb:j=>ee({type:L.IncrementalSnapshot,data:{source:P.StyleSheetRule,...j}}),styleDeclarationCb:j=>ee({type:L.IncrementalSnapshot,data:{source:P.StyleDeclaration,...j}}),canvasMutationCb:cd,fontCb:j=>ee({type:L.IncrementalSnapshot,data:{source:P.Font,...j}}),selectionCb:j=>{ee({type:L.IncrementalSnapshot,data:{source:P.Selection,...j}})},customElementCb:j=>{ee({type:L.IncrementalSnapshot,data:{source:P.CustomElement,...j}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:Ct,inlineStylesheet:h,sampling:A,recordCanvas:R,inlineImages:ge,userTriggeredOnInput:se,collectFonts:ue,doc:Z,maskAttributeFn:S,maskInputFn:b,maskTextFn:T,keepIframeSrcFn:Se,blockSelector:i,unblockSelector:o,slimDOMOptions:an,dataURLOptions:D,mirror:ve,iframeManager:rt,stylesheetManager:nt,shadowDomManager:$n,processedNodeManager:rs,canvasManager:Wi,ignoreCSSAttributes:re,plugins:N([q,"optionalAccess",j=>j.filter,"call",j=>j(st=>st.observer),"optionalAccess",j=>j.map,"call",j=>j(st=>({observer:st.observer,options:st.options,callback:ld=>ee({type:L.Plugin,data:{plugin:st.name,payload:ld}})}))])||[]},{});rt.addLoadListener(Z=>{try{U.push(Ee(Z.contentDocument))}catch(j){console.warn(j)}});const H=()=>{ss(),U.push(Ee(document))};return document.readyState==="interactive"||document.readyState==="complete"?H():(U.push(pe("DOMContentLoaded",()=>{ee({type:L.DomContentLoaded,data:{}}),J==="DOMContentLoaded"&&H()})),U.push(pe("load",()=>{ee({type:L.Load,data:{}}),J==="load"&&H()},window))),()=>{U.forEach(Z=>Z()),rs.destroy(),Er=void 0,Cy()}}catch(U){console.warn(U)}}function qy(e){if(!Er)throw new Error("please take full snapshot after start recording");Er(e)}Ke.mirror=ve;Ke.takeFullSnapshot=qy;function Yy(e,t){try{return e?e(t):new Qo}catch{return console.warn("Unable to initialize CanvasManager"),new Qo}}const Vy=3,Xy=5;function Ni(e){return e>9999999999?e:e*1e3}function ms(e){return e>9999999999?e/1e3:e}function Ln(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:L.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Te(t,10,1e3)}}),t.category==="console")))}const Ky="button,a";function sl(e){return e.closest(Ky)||e}function il(e){const t=ol(e);return!t||!(t instanceof Element)?t:sl(t)}function ol(e){return Jy(e)?e.target:e}function Jy(e){return typeof e=="object"&&!!e&&"target"in e}let Ye;function Qy(e){return Ye||(Ye=[],Zy()),Ye.push(e),()=>{const t=Ye?Ye.indexOf(e):-1;t>-1&&Ye.splice(t,1)}}function Zy(){K(X,"open",function(e){return function(...t){if(Ye)try{Ye.forEach(n=>n())}catch{}return e.apply(X,t)}})}function eS(e,t,n){e.handleClick(t,n)}class tS{constructor(t,n,r=Ln){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=Qy(()=>{this._lastMutation=Zo()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(rS(n,this._ignoreSelector)||!sS(t))return;const r={timestamp:ms(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=ms(t)}registerScroll(t=Date.now()){this._lastScroll=ms(t)}registerClick(t){const n=sl(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=Zo();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!s,{clickCount:o,clickBreadcrumb:a}=t;if(i){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",l={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:X.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:o||1}};this._addBreadcrumbEvent(n,l);return}if(o>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:X.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const nS=["A","BUTTON","INPUT"];function rS(e,t){return!!(!nS.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function sS(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Zo(){return Date.now()/1e3}function iS(e,t){try{if(!oS(t))return;const{source:n}=t.data;if(n===P.Mutation&&e.registerMutation(t.timestamp),n===P.Scroll&&e.registerScroll(t.timestamp),aS(t)){const{type:r,id:s}=t.data,i=Ke.mirror.getNode(s);i instanceof HTMLElement&&r===de.Click&&e.registerClick(i)}}catch{}}function oS(e){return e.type===Vy}function aS(e){return e.data.source===P.MouseInteraction}function Ae(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var vr;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(vr||(vr={}));const cS=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function uS(e){const t={};for(const n in e)if(cS.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const lS=e=>t=>{if(!e.isEnabled())return;const n=dS(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&eS(e.clickDetector,n,il(t.event)),Ln(e,n)};function al(e,t){const n=Ke.mirror.getId(e),r=n&&Ke.mirror.getNode(n),s=r&&Ke.mirror.getMeta(r),i=s&&pS(s)?s:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===vr.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:uS(i.attributes)}}:{}}}function dS(e){const{target:t,message:n}=fS(e);return Ae({category:`ui.${e.name}`,...al(t,n)})}function fS(e){const t=e.name==="click";let n,r=null;try{r=t?il(e.event):ol(e.event),n=Qe(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function pS(e){return e.type===vr.Element}function hS(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=mS(t);n&&Ln(e,n)}function mS(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i,target:o}=e;if(!o||gS(o)||!i)return null;const a=t||r||s,c=i.length===1;if(!a&&c)return null;const u=Qe(o,{maxStringLength:200})||"<unknown>",l=al(o,u);return Ae({category:"ui.keyDown",message:u,data:{...l.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i}})}function gS(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const ea={resource:ES,paint:SS,navigation:bS};function _S(e){return e.map(yS).filter(Boolean)}function yS(e){return ea[e.entryType]?ea[e.entryType](e):null}function Jt(e){return((le||X.performance.timeOrigin)+e)/1e3}function SS(e){const{duration:t,entryType:n,name:r,startTime:s}=e,i=Jt(s);return{type:n,name:r,start:i,end:i+t,data:void 0}}function bS(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:f,startTime:p,transferSize:h,type:g}=e;return s===0?null:{type:`${t}.${g}`,start:Jt(p),end:Jt(i),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:o,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:i,redirectCount:f}}}function ES(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:i,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Jt(i),end:Jt(s),name:r,data:{size:u,statusCode:c,decodedBodySize:o,encodedBodySize:a}}}function vS(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,s=e.value,i=Jt(s);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:s,size:s,nodeId:r?Ke.mirror.getId(r):void 0}}}function TS(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(tt(s,n))}),r.push(uu(({metric:s})=>{e.replayPerformanceEntries.push(vS(s))})),()=>{r.forEach(s=>s())}}const Y=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,IS='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function wS(){const e=new Blob([IS]);return URL.createObjectURL(e)}function fe(e,t){Y&&(m.info(e),t&&cl(e))}function Wt(e,t){Y&&(m.info(e),t&&setTimeout(()=>{cl(e)},0))}function cl(e){et({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Di extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Ci}.`)}}class ul{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Ci)throw new Di;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?Ni(t):null}}class kS{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){fe("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,i)=>{const o=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){Y&&m.error("[Replay]",c.response),i(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class CS{constructor(t){this._worker=new kS(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=Ni(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Ci?Promise.reject(new Di):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{Y&&m.warn('[Replay] Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class RS{constructor(t){this._fallback=new ul,this._compression=new CS(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{fe("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n}=this._fallback,r=[];for(const s of t)r.push(this._compression.addEvent(s));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(s){Y&&m.warn("[Replay] Failed to add events when switching buffers.",s)}}}function xS({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=AS(t);if(n)return n}return fe("[Replay] Using simple buffer"),new ul}function AS(e){try{const t=e||MS();if(!t)return;fe(`[Replay] Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new RS(n)}catch{fe("[Replay] Failed to create compression worker")}}function MS(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?wS():""}function Li(){try{return"sessionStorage"in X&&!!X.sessionStorage}catch{return!1}}function OS(e){NS(),e.session=void 0}function NS(){if(Li())try{X.sessionStorage.removeItem(wi)}catch{}}function ll(e){return e===void 0?!1:Math.random()<e}function dl(e){const t=Date.now(),n=e.id||W(),r=e.started||t,s=e.lastActivity||t,i=e.segmentId||0,o=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:i,sampled:o,previousSessionId:a}}function Pi(e){if(Li())try{X.sessionStorage.setItem(wi,JSON.stringify(e))}catch{}}function DS(e,t){return ll(e)?"session":t?"buffer":!1}function ta({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=DS(e,t),i=dl({sampled:s,previousSessionId:r});return n&&Pi(i),i}function LS(e){if(!Li())return null;try{const t=X.sessionStorage.getItem(wi);if(!t)return null;const n=JSON.parse(t);return Wt("[Replay] Loading existing session",e),dl(n)}catch{return null}}function Ys(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function fl(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Ys(e.started,t,r)||Ys(e.lastActivity,n,r)}function pl(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!fl(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function gs({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},s){const i=s.stickySession&&LS(e);return i?pl(i,{sessionIdleExpire:t,maxReplayDuration:n})?(Wt("[Replay] Session in sessionStorage is expired, creating new one..."),ta(s,{previousSessionId:i.id})):i:(Wt("[Replay] Creating new session",e),ta(s,{previousSessionId:r}))}function PS(e){return e.type===L.Custom}function $i(e,t,n){return ml(e,t)?(hl(e,t,n),!0):!1}function $S(e,t,n){return ml(e,t)?hl(e,t,n):Promise.resolve(null)}async function hl(e,t,n){if(!e.eventBuffer)return null;try{n&&e.recordingMode==="buffer"&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=e.getOptions(),s=FS(t,r.beforeAddRecordingEvent);return s?await e.eventBuffer.addEvent(s):void 0}catch(r){const s=r&&r instanceof Di?"addEventSizeExceeded":"addEvent";Y&&m.error(r),await e.stop({reason:s});const i=M();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function ml(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Ni(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(fe(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1):!0}function FS(e,t){try{if(typeof t=="function"&&PS(e))return t(e)}catch(n){return Y&&m.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return e}function Fi(e){return!e.type}function Vs(e){return e.type==="transaction"}function BS(e){return e.type==="replay_event"}function na(e){return e.type==="feedback"}function gl(e){const t=jS();return(n,r)=>{if(!e.isEnabled()||!Fi(n)&&!Vs(n))return;const s=r&&r.statusCode;if(!(t&&(!s||s<200||s>=300))){if(Vs(n)){HS(e,n);return}US(e,n)}}}function HS(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function US(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||setTimeout(()=>{e.sendBufferedReplayOrFlush()})}function jS(){const e=M();if(!e)return!1;const t=e.getTransport();return t&&t.send.__sentry__baseTransport__||!1}function WS(e){return t=>{!e.isEnabled()||!Fi(t)||zS(e,t)}}function zS(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if(typeof n=="string"&&(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Ae({category:"replay.hydrate-error"});Ln(e,r)}}function GS(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!(t.originalException&&t.originalException.__rrweb__)}function qS(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:L.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function YS(e,t){return e.recordingMode!=="buffer"||t.message===ki||!t.exception||t.type?!1:ll(e.getOptions().errorSampleRate)}function VS(e,t=!1){const n=t?gl(e):void 0;return Object.assign((r,s)=>e.isEnabled()?BS(r)?(delete r.breadcrumbs,r):!Fi(r)&&!Vs(r)&&!na(r)||!e.checkAndHandleExpiredSession()?r:na(r)?(e.flush(),r.contexts.feedback.replay_id=e.getSessionId(),qS(e,r),r):GS(r,s)&&!e.getOptions()._experiments.captureExceptions?(Y&&m.log("[Replay] Ignoring error from rrweb internals",r),null):((YS(e,r)||e.recordingMode==="session")&&(r.tags={...r.tags,replayId:e.getSessionId()}),n&&n(r,{statusCode:200}),r):r,{id:"Replay"})}function Vr(e,t){return t.map(({type:n,start:r,end:s,name:i,data:o})=>{const a=e.throttledAddEvent({type:L.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:s,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function XS(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function KS(e){return t=>{if(!e.isEnabled())return;const n=XS(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Vr(e,[n]),!1)))}}function JS(e,t){return Y&&e.getOptions()._experiments.traceInternals?!1:Gc(t,M())}function Xr(e,t){e.isEnabled()&&t!==null&&(JS(e,t.name)||e.addUpdate(()=>(Vr(e,[t]),!0)))}function QS(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:s}=e;if(!n)return null;const{method:i,url:o}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:o,data:{method:i,statusCode:s?s.status:void 0}}}function ZS(e){return t=>{if(!e.isEnabled())return;const n=QS(t);Xr(e,n)}}function eb(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,s=r[$e];if(!t||!n||!s)return null;const{method:i,url:o,status_code:a}=s;return o===void 0?null:{type:"resource.xhr",name:o,start:t/1e3,end:n/1e3,data:{method:i,statusCode:a}}}function tb(e){return t=>{if(!e.isEnabled())return;const n=eb(t);Xr(e,n)}}function Kr(e,t){if(e)try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=bl(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function _l(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function yl(e){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[bl(e)];if(!e)return[void 0]}catch{return Y&&m.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Y&&m.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Tr(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Sl(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:i,statusCode:o,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:ce({method:i,statusCode:o,request:a,response:c})}}function In(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Je(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:i}=nb(n);return r.body=s,i&&i.length>0&&(r._meta={warnings:i}),r}function Xs(e,t){return Object.keys(e).reduce((n,r)=>{const s=r.toLowerCase();return t.includes(s)&&e[r]&&(n[s]=e[r]),n},{})}function bl(e){return new URLSearchParams(e).toString()}function nb(e){if(!e||typeof e!="string")return{body:e};const t=e.length>Ho,n=rb(e);if(t){const r=e.slice(0,Ho);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function rb(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Ir(e,t){const n=sb(e);return tn(n,t)}function sb(e,t=X.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(X.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function ib(e,t,n){try{const r=await ab(e,t,n),s=Sl("resource.fetch",r);Xr(n.replay,s)}catch(r){Y&&m.error("[Replay] Failed to capture fetch breadcrumb",r)}}function ob(e,t,n){const{input:r,response:s}=t,i=r?El(r):void 0,o=Kr(i,n.textEncoder),a=s?_l(s.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),a!==void 0&&(e.data.response_body_size=a)}async function ab(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r}=t,{url:o,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=e.data,d=Ir(o,n.networkDetailAllowUrls)&&!Ir(o,n.networkDetailDenyUrls),f=d?cb(n,t.input,u):In(u),p=await ub(d,n,t.response,l);return{startTimestamp:s,endTimestamp:i,url:o,method:a,statusCode:c,request:f,response:p}}function cb({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?fb(n,t):{};if(!e)return Je(s,r,void 0);const i=El(n),[o,a]=yl(i),c=Je(s,r,o);return a?Tr(c,a):c}async function ub(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},s,i){if(!e&&i!==void 0)return In(i);const o=s?vl(s.headers,r):{};if(!s||!t&&i!==void 0)return Je(o,i,void 0);const[a,c]=await db(s),u=lb(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:i,captureDetails:e,headers:o});return c?Tr(u,c):u}function lb(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:s,headers:i}){try{const o=e&&e.length&&r===void 0?Kr(e,n):r;return s?t?Je(i,o,e):Je(i,o,void 0):In(o)}catch(o){return Y&&m.warn("[Replay] Failed to serialize response body",o),Je(i,r,void 0)}}async function db(e){const t=pb(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await hb(t)]}catch(n){return Y&&m.warn("[Replay] Failed to get text body from response",n),[void 0,"BODY_PARSE_ERROR"]}}function El(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function vl(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function fb(e,t){return e.length===1&&typeof e[0]!="string"?ra(e[0],t):e.length===2?ra(e[1],t):{}}function ra(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?vl(n,t):Array.isArray(n)?{}:Xs(n,t):{}}function pb(e){try{return e.clone()}catch(t){Y&&m.warn("[Replay] Failed to clone response body",t)}}function hb(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error("Timeout while trying to read response body")),500);mb(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function mb(e){return await e.text()}async function gb(e,t,n){try{const r=yb(e,t,n),s=Sl("resource.xhr",r);Xr(n.replay,s)}catch(r){Y&&m.error("[Replay] Failed to capture xhr breadcrumb",r)}}function _b(e,t,n){const{xhr:r,input:s}=t;if(!r)return;const i=Kr(s,n.textEncoder),o=r.getResponseHeader("content-length")?_l(r.getResponseHeader("content-length")):vb(r.response,r.responseType,n.textEncoder);i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}function yb(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r,input:o,xhr:a}=t,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:f}=e.data;if(!c)return null;if(!a||!Ir(c,n.networkDetailAllowUrls)||Ir(c,n.networkDetailDenyUrls)){const I=In(d),A=In(f);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:l,request:I,response:A}}const p=a[$e],h=p?Xs(p.request_headers,n.networkRequestHeaders):{},g=Xs(Sb(a),n.networkResponseHeaders),[y,_]=n.networkCaptureBodies?yl(o):[void 0],[S,b]=n.networkCaptureBodies?bb(a):[void 0],T=Je(h,d,y),E=Je(g,f,S);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:l,request:_?Tr(T,_):T,response:b?Tr(E,b):E}}function Sb(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return n[s.toLowerCase()]=i,n},{}):{}}function bb(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return Eb(e.response,e.responseType)}catch(n){t.push(n)}return Y&&m.warn("[Replay] Failed to get xhr response body",...t),[void 0]}function Eb(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch{return Y&&m.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Y&&m.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function vb(e,t,n){try{const r=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return Kr(r,n)}catch{return}}function Tb(e){const t=M();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",(u,l)=>Ib(c,u,l)):(kr(ZS(e)),Cr(tb(e)))}catch{}}function Ib(e,t,n){if(t.data)try{wb(t)&&Cb(n)&&(_b(t,n,e),gb(t,n,e)),kb(t)&&Rb(n)&&(ob(t,n,e),ib(t,n,e))}catch{Y&&m.warn("Error when enriching network breadcrumb")}}function wb(e){return e.category==="xhr"}function kb(e){return e.category==="fetch"}function Cb(e){return e&&e.xhr}function Rb(e){return e&&e.response}let sa=null;function xb(e){return!!e.category}const Ab=e=>t=>{if(!e.isEnabled())return;const n=Mb(t);n&&Ln(e,n)};function Mb(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();return sa===t||!t||(sa=t,!xb(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))?null:t.category==="console"?Ob(t):Ae(t)}function Ob(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return Ae(e);let n=!1;const r=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>Yn?(n=!0,`${s.slice(0,Yn)}`):s;if(typeof s=="object")try{const i=Te(s,7);return JSON.stringify(i).length>Yn?(n=!0,`${JSON.stringify(i,null,2).slice(0,Yn)}`):i}catch{}return s});return Ae({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Nb(e){const t=ae(),n=M();t.addScopeListener(Ab(e)),Xa(lS(e)),kn(KS(e)),Tb(e);const r=VS(e,!ia(n));n&&n.addEventProcessor?n.addEventProcessor(r):Lp(r),ia(n)&&(n.on("beforeSendEvent",WS(e)),n.on("afterSendEvent",gl(e)),n.on("createDsc",s=>{const i=e.getSessionId();i&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(s.replay_id=i)}),n.on("startTransaction",s=>{e.lastTransaction=s}),n.on("finishTransaction",s=>{e.lastTransaction=s}),n.on("beforeSendFeedback",(s,i)=>{const o=e.getSessionId();i&&i.includeReplay&&e.isEnabled()&&o&&s.contexts&&s.contexts.feedback&&(s.contexts.feedback.replay_id=o)}))}function ia(e){return!!(e&&e.on)}async function Db(e){try{return Promise.all(Vr(e,[Lb(X.performance.memory)]))}catch{return[]}}function Lb(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Pb(e,t,n){let r,s,i;const o=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){s!==void 0&&clearTimeout(s),i!==void 0&&clearTimeout(i),s=i=void 0}function u(){return s!==void 0||i!==void 0?a():r}function l(){return s&&clearTimeout(s),s=setTimeout(a,t),o&&i===void 0&&(i=setTimeout(a,o)),r}return l.cancel=c,l.flush=u,l}function $b(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){Y&&m.warn("[Replay] Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&iS(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!$i(e,n,s))return!0;if(!s)return!1;if(Bb(e,s),e.session&&e.session.previousSessionId)return!0;if(e.recordingMode==="buffer"&&e.session&&e.eventBuffer){const i=e.eventBuffer.getEarliestTimestamp();i&&(fe(`[Replay] Updating session start time to earliest event in buffer to ${new Date(i)}`,e.getOptions()._experiments.traceInternals),e.session.started=i,e.getOptions().stickySession&&Pi(e.session))}return e.recordingMode==="session"&&e.flush(),!0})}}function Fb(e){const t=e.getOptions();return{type:L.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function Bb(e,t){!t||!e.session||e.session.segmentId!==0||$i(e,Fb(e),!1)}function Hb(e,t,n,r){return We(lc(e,ci(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function Ub({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function jb({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:s};e.emit&&e.emit("preprocessEvent",r,i);const o=await fi(e.getOptions(),r,i,t,e,Ne());if(!o)return null;o.platform=o.platform||"javascript";const a=e.getSdkMetadata&&e.getSdkMetadata(),{name:c,version:u}=a&&a.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0"},o}async function Wb({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:i}){const o=Ub({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=M(),f=ae(),p=d&&d.getTransport(),h=d&&d.getDsn();if(!d||!p||!h||!i.sampled)return;const g={type:C_,replay_start_timestamp:l/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},y=await jb({scope:f,client:d,replayId:t,event:g});if(!y){d.recordDroppedEvent("event_processor","replay",g),fe("An event processor returned `null`, will not send event.");return}delete y.sdkProcessingMetadata;const _=Hb(y,o,h,d.getOptions().tunnel);let S;try{S=await p.send(_)}catch(T){const E=new Error(ki);try{E.cause=T}catch{}throw E}if(!S)return S;if(typeof S.statusCode=="number"&&(S.statusCode<200||S.statusCode>=300))throw new Tl(S.statusCode);const b=pc({},S);if(fc(b,"replay"))throw new Il(b);return S}class Tl extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class Il extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function wl(e,t={count:0,interval:N_}){const{recordingData:n,options:r}=e;if(n.length)try{return await Wb(e),!0}catch(s){if(s instanceof Tl||s instanceof Il)throw s;if(Bf("Replays",{_retryCount:t.count}),Y&&r._experiments&&r._experiments.captureExceptions&&Ar(s),t.count>=D_){const i=new Error(`${ki} - max retries exceeded`);try{i.cause=s}catch{}throw i}return t.interval*=++t.count,new Promise((i,o)=>{setTimeout(async()=>{try{await wl(e,t),i(!0)}catch(a){o(a)}},t.interval)})}}const kl="__THROTTLED",zb="__SKIPPED";function Gb(e,t,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,l)=>{l<c&&r.delete(l)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0);let o=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),i()>=t){const l=o;return o=!0,l?zb:kl}o=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class Ve{constructor({options:t,recordingOptions:n}){Ve.prototype.__init.call(this),Ve.prototype.__init2.call(this),Ve.prototype.__init3.call(this),Ve.prototype.__init4.call(this),Ve.prototype.__init5.call(this),Ve.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:R_,sessionIdleExpire:x_},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=Pb(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Gb((o,a)=>$S(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),i=r?{threshold:Math.min(L_,r),timeout:r,scrollTimeout:P_,ignoreSelector:s?s.join(","):""}:void 0;i&&(this.clickDetector=new tS(this,i))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options;if(!(n<=0&&r<=0)){if(this._initializeSessionForSampling(t),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",Wt(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Wt("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const t=gs({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Wt("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const t=gs({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=Ke({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:O_},emit:$b(this),onMutation:this._onMutationHandler,...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{fe(`[Replay] Stopping Replay${n?` triggered by ${n}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,OS(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),fe("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),fe("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();fe("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Ys(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${X.location.pathname}${X.location.hash}${X.location.search}`,n=`${X.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===kl){const s=Ae({category:"replay.throttled"});this.addUpdate(()=>!$i(this,{type:Xy,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastTransaction||ae().getTransaction(),r=(t&&z(t).data||{})[me];if(!(!t||!r||!["route","custom"].includes(r)))return z(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=xS({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(t){Y&&m.error("[Replay]",t),Y&&this._options._experiments&&this._options._experiments.captureExceptions&&Ar(t)}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=gs({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return pl(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{X.document.addEventListener("visibilitychange",this._handleVisibilityChange),X.addEventListener("blur",this._handleWindowBlur),X.addEventListener("focus",this._handleWindowFocus),X.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Nb(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}this._performanceCleanupCallback=TS(this)}_removeListeners(){try{X.document.removeEventListener("visibilitychange",this._handleVisibilityChange),X.removeEventListener("blur",this._handleWindowBlur),X.removeEventListener("focus",this._handleWindowFocus),X.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this._handleException(t)}}__init(){this._handleVisibilityChange=()=>{X.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=Ae({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=Ae({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{hS(this,t)}}_doChangeToBackgroundTasks(t){!this.session||fl(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){fe("[Replay] Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:L.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){const t=_S(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Vr(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){Y&&m.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await Db(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await wl({replayId:t,recordingData:i,segmentId:s,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this._handleException(n),this.stop({reason:"sendReplay"});const r=M();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){Y&&m.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const i=s<this._options.minReplayDuration,o=s>this._options.maxReplayDuration+5e3;if(i||o){fe(`[Replay] Session duration (${Math.floor(s/1e3)}s) is too ${i?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),i&&this._debouncedFlush();return}const a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&fe("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(c){Y&&m.error(c)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Pi(this.session)}__init6(){this._onMutationHandler=t=>{const n=t.length,r=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>s||i){const o=Ae({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(o)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function ln(e,t,n,r){const s=typeof r=="string"?r.split(","):[],i=[...e,...s,...t];return typeof n<"u"&&(typeof n=="string"&&i.push(`.${n}`),Ze(()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")})),i.join(",")}function qb({mask:e,unmask:t,block:n,unblock:r,ignore:s,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:c,ignoreClass:u}){const l=['base[href="/"]'],d=ln(e,[".sentry-mask","[data-sentry-mask]"],a,c),f=ln(t,[".sentry-unmask","[data-sentry-unmask]"]),p={maskTextSelector:d,unmaskTextSelector:f,blockSelector:ln(n,[".sentry-block","[data-sentry-block]",...l],i,o),unblockSelector:ln(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:ln(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],u)};return i instanceof RegExp&&(p.blockClass=i),a instanceof RegExp&&(p.maskTextClass=a),p}function Yb({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:i}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const oa='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Vb=["content-length","content-type","accept"];let aa=!1;const qT=(e=>new Jr(e));class Jr{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=A_,flushMaxDelay:n=M_,minReplayDuration:r=$_,maxReplayDuration:s=Uo,stickySession:i=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},sessionSampleRate:u,errorSampleRate:l,maskAllText:d=!0,maskAllInputs:f=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:h=750,mutationLimit:g=1e4,slowClickTimeout:y=7e3,slowClickIgnoreSelectors:_=[],networkDetailAllowUrls:S=[],networkDetailDenyUrls:b=[],networkCaptureBodies:T=!0,networkRequestHeaders:E=[],networkResponseHeaders:I=[],mask:A=[],maskAttributes:D=["title","placeholder"],unmask:w=[],block:R=[],unblock:$=[],ignore:J=[],maskFn:se,beforeAddRecordingEvent:ue,beforeErrorSampling:ge,blockClass:q,blockSelector:Se,maskInputOptions:re,maskTextClass:he,maskTextSelector:be,ignoreClass:es}={}){this.name=Jr.id;const kt=qb({mask:A,unmask:w,block:R,unblock:$,ignore:J,blockClass:q,blockSelector:Se,maskTextClass:he,maskTextSelector:be,ignoreClass:es});if(this._recordingOptions={maskAllInputs:f,maskAllText:d,maskInputOptions:{...re||{},password:!0},maskTextFn:se,maskInputFn:se,maskAttributeFn:(ze,Ct,an)=>Yb({maskAttributes:D,maskAllText:d,privacyOptions:kt,key:ze,value:Ct,el:an}),...kt,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ze=>{try{ze.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,F_),maxReplayDuration:Math.min(s,Uo),stickySession:i,sessionSampleRate:u,errorSampleRate:l,useCompression:o,workerUrl:a,blockAllMedia:p,maskAllInputs:f,maskAllText:d,mutationBreadcrumbLimit:h,mutationLimit:g,slowClickTimeout:y,slowClickIgnoreSelectors:_,networkDetailAllowUrls:S,networkDetailDenyUrls:b,networkCaptureBodies:T,networkRequestHeaders:ca(E),networkResponseHeaders:ca(I),beforeAddRecordingEvent:ue,beforeErrorSampling:ge,_experiments:c},typeof u=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${u} })`),this._initialOptions.sessionSampleRate=u),typeof l=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${l} })`),this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${oa}`:oa),this._isInitialized&&Rs())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return aa}set _isInitialized(t){aa=t}setupOnce(){Rs()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(t)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const t=Xb(this._initialOptions);this._replay=new Ve({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const n=M().getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}Jr.__initStatic();function Xb(e){const t=M(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...ce(e)};return n?(e.sessionSampleRate==null&&e.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&Ze(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),typeof n.replaysSessionSampleRate=="number"&&(r.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):(Ze(()=>{console.warn("SDK client is not available.")}),r)}function ca(e){return[...Vb,...e.map(t=>t.toLowerCase())]}function YT(){const e=M();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")}var ua;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(ua||(ua={}));function Kb(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function Ks(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Ks(e.parentNode,t,n,r+1)}function la(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(Kb(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}const Nt=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let da={map:{},getId(){return console.error(Nt),-1},getNode(){return console.error(Nt),null},removeNodeFromMap(){console.error(Nt)},has(){return console.error(Nt),!1},reset(){console.error(Nt)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(da=new Proxy(da,{get(e,t,n){return t==="map"&&console.error(Nt),Reflect.get(e,t,n)}}));function Bi(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(o){Rl(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>Bi(e,t,i||{},!0)}function Hi(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}/[1-9][0-9]{12}/.test(Date.now().toString());function Jb(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function Qr(e,t,n,r,s){if(!e)return!1;const i=Jb(e);if(!i)return!1;const o=la(t,n),a=Ks(i,o);let c=-1;return a<0?!1:(r&&(c=Ks(i,la(null,r))),a>-1&&c<0?!0:a<c)}const fa={};function Cl(e){const t=fa[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(s)}catch{}return fa[e]=r.bind(window)}function it(...e){return Cl("requestAnimationFrame")(...e)}function Rl(...e){return Cl("setTimeout")(...e)}var Qt=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Qt||{});let tr;function Qb(e){tr=e}const pa=e=>tr?((...n)=>{try{return e(...n)}catch(r){if(tr&&tr(r)===!0)return()=>{};throw r}}):e;var Bt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Kn=0;Kn<Bt.length;Kn++)Zb[Bt.charCodeAt(Kn)]=Kn;var eE=function(e){var t=new Uint8Array(e),n,r=t.length,s="";for(n=0;n<r;n+=3)s+=Bt[t[n]>>2],s+=Bt[(t[n]&3)<<4|t[n+1]>>4],s+=Bt[(t[n+1]&15)<<2|t[n+2]>>6],s+=Bt[t[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const ha=new Map;function tE(e,t){let n=ha.get(e);return n||(n=new Map,ha.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const xl=(e,t,n)=>{if(!e||!(Ml(e,t)||typeof e=="object"))return;const r=e.constructor.name,s=tE(n,r);let i=s.indexOf(e);return i===-1&&(i=s.length,s.push(e)),i};function nr(e,t,n){if(e instanceof Array)return e.map(r=>nr(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,s=eE(e);return{rr_type:r,base64:s}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[nr(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:s}=e;return{rr_type:r,src:s}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",s=e.toDataURL();return{rr_type:r,src:s}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[nr(e.data,t,n),e.width,e.height]};if(Ml(e,t)||typeof e=="object"){const r=e.constructor.name,s=xl(e,t,n);return{rr_type:r,index:s}}}}return e}const Al=(e,t,n)=>e.map(r=>nr(r,t,n)),Ml=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof t[s]=="function").find(s=>e instanceof t[s]);function nE(e,t,n,r,s){const i=[],o=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of o)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=Hi(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...l){return Qr(this.canvas,n,r,s,!0)||Rl(()=>{const d=Al(l,t,this);e(this.canvas,{type:Qt["2D"],property:a,args:d})},0),u.apply(this,l)}});i.push(c)}catch{const u=Bi(t.CanvasRenderingContext2D.prototype,a,{set(l){e(this.canvas,{type:Qt["2D"],property:a,args:[l],setter:!0})}});i.push(u)}return()=>{i.forEach(a=>a())}}function rE(e){return e==="experimental-webgl"?"webgl":e}function ma(e,t,n,r,s){const i=[];try{const o=Hi(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!Qr(this,t,n,r,!0)){const l=rE(c);if("__context"in this||(this.__context=l),s&&["webgl","webgl2"].includes(l))if(u[0]&&typeof u[0]=="object"){const d=u[0];d.preserveDrawingBuffer||(d.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(o=>o())}}function ga(e,t,n,r,s,i,o,a){const c=[],u=Object.getOwnPropertyNames(e);for(const l of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if(typeof e[l]!="function")continue;const d=Hi(e,l,function(f){return function(...p){const h=f.apply(this,p);if(xl(h,a,this),"tagName"in this.canvas&&!Qr(this.canvas,r,s,i,!0)){const g=Al(p,a,this),y={type:t,property:l,args:g};n(this.canvas,y)}return h}});c.push(d)}catch{const f=Bi(e,l,{set(p){n(this.canvas,{type:t,property:l,args:[p],setter:!0})}});c.push(f)}return c}function sE(e,t,n,r,s,i){const o=[];return o.push(...ga(t.WebGLRenderingContext.prototype,Qt.WebGL,e,n,r,s,i,t)),typeof t.WebGL2RenderingContext<"u"&&o.push(...ga(t.WebGL2RenderingContext.prototype,Qt.WebGL2,e,n,r,s,i,t)),()=>{o.forEach(a=>a())}}var iE='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function oE(){const e=new Blob([iE]);return URL.createObjectURL(e)}class aE{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(d,f)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(d)||this.pendingCanvasMutations.set(d,[]),this.pendingCanvasMutations.get(d).push(f)};const{sampling:n="all",win:r,blockClass:s,blockSelector:i,unblockSelector:o,maxCanvasSize:a,recordCanvas:c,dataURLOptions:u,errorHandler:l}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,l&&Qb(l),!t.enableManualSnapshot&&pa(()=>{c&&n==="all"&&this.initCanvasMutationObserver(r,s,i,o),c&&typeof n=="number"&&this.initCanvasFPSObserver(n,r,s,i,o,a,{dataURLOptions:u})})()}initCanvasFPSObserver(t,n,r,s,i,o,a){const c=ma(n,r,s,i,!0),u=this.takeSnapshot(!1,t,n,r,s,i,o,a.dataURLOptions);this.resetObservers=()=>{c(),cancelAnimationFrame(u)}}initCanvasMutationObserver(t,n,r,s){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const i=ma(t,n,r,s,!1),o=nE(this.processMutation.bind(this),t,n,r,s),a=sE(this.processMutation.bind(this),t,n,r,s,this.mirror);this.resetObservers=()=>{i(),o(),a()}}snapshot(t){const{options:n}=this,r=this.takeSnapshot(!0,n.sampling==="all"?2:n.sampling||2,n.win,n.blockClass,n.blockSelector,n.unblockSelector,n.maxCanvasSize,n.dataURLOptions,t);this.resetObservers=()=>{cancelAnimationFrame(r)}}takeSnapshot(t,n,r,s,i,o,a,c,u){const l=new Map,d=new Worker(oE());d.onmessage=_=>{const S=_.data,{id:b}=S;if(l.set(b,!1),!("base64"in S))return;const{base64:T,type:E,width:I,height:A}=S;this.mutationCb({id:b,type:Qt["2D"],commands:[{property:"clearRect",args:[0,0,I,A]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:T}],type:E}]},0,0,I,A]}]})};const f=1e3/n;let p=0,h;const g=_=>{if(_)return[_];const S=[];return r.document.querySelectorAll("canvas").forEach(b=>{Qr(b,s,i,o)||S.push(b)}),S},y=_=>{if(p&&_-p<f){h=it(y);return}p=_,g(u).forEach(S=>{const b=this.mirror.getId(S);if(!l.get(b)&&!(!S.width||!S.height)){if(l.set(b,!0),!t&&["webgl","webgl2"].includes(S.__context)){const T=S.getContext(S.__context);N([T,"optionalAccess",E=>E.getContextAttributes,"call",E=>E(),"optionalAccess",E=>E.preserveDrawingBuffer])===!1&&T.clear(T.COLOR_BUFFER_BIT)}createImageBitmap(S).then(T=>{d.postMessage({id:b,bitmap:T,width:S.width,height:S.height,dataURLOptions:c,maxCanvasSize:a},[T])}).catch(T=>{pa(()=>{throw T})()})}}),h=it(y)};return h=it(y),h}startPendingCanvasMutationFlusher(){it(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,it(t)};it(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),it(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const s=r.map(o=>{const{type:a,...c}=o;return c}),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:s}),this.pendingCanvasMutations.delete(t)}}const _a={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Ol="ReplayCanvas",Jn=1280,cE=((e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Jn):Jn,n?Math.min(n,Jn):Jn]};let s;const i=new Promise(o=>s=o);return{name:Ol,setupOnce(){},getOptions(){const{quality:o,enableManualSnapshot:a,maxCanvasSize:c}=r;return{enableManualSnapshot:a,recordCanvas:!0,getCanvasManager:u=>{const l=new aE({...u,enableManualSnapshot:a,maxCanvasSize:c,errorHandler:d=>{try{typeof d=="object"&&(d.__rrweb__=!0)}catch{}}});return s(l),l},..._a[o]||_a.medium}},async snapshot(o){(await i).snapshot(o)}}}),uE=cE,VT=ne(Ol,uE),wt=O,_s="#ffffff",ya="inherit",ys="rgba(108, 95, 199, 1)",Sa={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:_s,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:ys,submitBorder:ys,submitOutlineFocus:"#29232f",submitForeground:_s,submitForegroundHover:_s,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:ya,inputForeground:ya,inputBorder:"var(--border)",inputOutlineFocus:ys,formBorderRadius:"20px",formContentBorderRadius:"6px"},ba={light:Sa,dark:{...Sa,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"}},lE="Report a Bug",dE="Cancel",fE="Send Bug Report",pE="Report a Bug",hE="your.email@example.org",mE="Email",gE="What's the bug? What did you expect?",_E="Description",yE="Your Name",SE="Name",bE="(required)",EE="Thank you for your report!",Nl="widget",Dl="api";async function vE({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const s=await fi(e.getOptions(),n,r,t,e,Ne());return s===null?(e.recordDroppedEvent("event_processor","feedback",n),null):(s.platform=s.platform||"javascript",s)}async function TE({feedback:{message:e,email:t,name:n,source:r,url:s}},{includeReplay:i=!0}={}){const o=M(),a=o&&o.getTransport(),c=o&&o.getDsn();if(!o||!a||!c)return;const u={contexts:{feedback:{contact_email:t,name:n,message:e,url:s,source:r}},type:"feedback"};return Et(async l=>{l.clearBreadcrumbs(),[Dl,Nl].includes(String(r))&&l.setLevel("info");const d=await vE({scope:l,client:o,event:u});if(!d)return;o.emit&&o.emit("beforeSendFeedback",d,{includeReplay:!!i});const f=Dc(d,c,o.getOptions()._metadata,o.getOptions().tunnel);let p;try{p=await a.send(f)}catch(h){const g=new Error("Unable to send Feedback");try{g.cause=h}catch{}throw g}if(p){if(typeof p.statusCode=="number"&&(p.statusCode<200||p.statusCode>=300))throw new Error("Unable to send Feedback");return p}})}function IE({name:e,email:t,message:n,source:r=Dl,url:s=$a()},i={}){if(!n)throw new Error("Unable to submit feedback with empty message");return TE({feedback:{name:e,email:t,message:n,url:s,source:r}},i)}const ot=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Ea(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function wE(e){const t=e.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  left: var(--left);
  right: var(--right);
  bottom: var(--bottom);
  top: var(--top);
  z-index: var(--z-index);

  line-height: 16px;

  display: flex;
  align-items: center;
  gap: 8px;

  border-radius: var(--border-radius);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  padding: 16px;
  text-decoration: none;
  z-index: 9000;

  color: var(--foreground);
  background-color: var(--background);
  border: var(--border);
  box-shadow: var(--box-shadow);
  opacity: 1;
  transition: opacity 0.1s ease-in-out;
}

.widget__actor:hover {
  background-color: var(--background-hover);
}

.widget__actor svg {
  width: 16px;
  height: 16px;
}

.widget__actor--hidden {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}

.widget__actor__text {
}

@media (max-width: 600px) {
  .widget__actor__text {
    display: none;
  }
}

.feedback-icon path {
  fill: var(--foreground);
}
`,t}function kE(e){const t=e.createElement("style");return t.textContent=`
.dialog {
  line-height: 25px;
  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  position: fixed;
  inset: 0;
  z-index: 10000;
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  position: fixed;
  left: var(--left);
  right: var(--right);
  bottom: var(--bottom);
  top: var(--top);

  border: var(--border);
  border-radius: var(--form-border-radius);
  background-color: var(--background);
  color: var(--foreground);

  width: 320px;
  max-width: 100%;
  max-height: calc(100% - 2rem);
  display: flex;
  flex-direction: column;
  box-shadow: var(--box-shadow);
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}

.dialog__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 20px;
  font-weight: 600;
  padding: 24px 24px 0 24px;
  margin: 0;
  margin-bottom: 16px;
}

.brand-link {
  display: inline-flex;
}

.error {
  color: var(--error);
  margin-bottom: 16px;
}

.form {
  display: grid;
  overflow: auto;
  flex-direction: column;
  gap: 16px;
  padding: 0 24px 24px;
}

.form__error-container {
  color: var(--error);
}

.form__error-container--hidden {
  display: none;
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: grid;
  gap: 4px;
  align-items: center;
  grid-auto-flow: column;
  grid-auto-columns: max-content;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  line-height: inherit;
  background-color: var(--input-background);
  box-sizing: border-box;
  border: var(--input-border);
  border-radius: var(--form-content-border-radius);
  color: var(--input-foreground);
  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 500;
  padding: 6px 12px;
}

.form__input::placeholder {
  color: var(--input-foreground);
  opacity: 0.65;
}

.form__input:focus-visible {
  outline: 1px auto var(--input-outline-focus);
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.btn-group {
  display: grid;
  gap: 8px;
  margin-top: 8px;
}

.btn {
  line-height: inherit;
  border: var(--cancel-border);
  border-radius: var(--form-content-border-radius);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  padding: 6px 16px;
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  background-color: var(--submit-background);
  border-color: var(--submit-border);
  color: var(--submit-foreground);
}
.btn--primary:hover {
  background-color: var(--submit-background-hover);
  color: var(--submit-foreground-hover);
}
.btn--primary:focus-visible {
  outline: 1px auto var(--submit-outline-focus);
}

.btn--default {
  background-color: var(--cancel-background);
  color: var(--cancel-foreground);
  font-weight: 500;
}
.btn--default:hover {
  background-color: var(--cancel-background-hover);
  color: var(--cancel-foreground-hover);
}
.btn--default:focus-visible {
  outline: 1px auto var(--cancel-outline-focus);
}

.success-message {
  background-color: var(--background);
  border: var(--border);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
  font-weight: 600;
  color: var(--success);
  padding: 12px 24px;
  line-height: 25px;
  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success-icon path {
  fill: var(--success);
}
`,t}function va(e){return`
  --background: ${e.background};
  --background-hover: ${e.backgroundHover};
  --foreground: ${e.foreground};
  --error: ${e.error};
  --success: ${e.success};
  --border: ${e.border};
  --border-radius: ${e.borderRadius};
  --box-shadow: ${e.boxShadow};

  --submit-background: ${e.submitBackground};
  --submit-background-hover: ${e.submitBackgroundHover};
  --submit-border: ${e.submitBorder};
  --submit-outline-focus: ${e.submitOutlineFocus};
  --submit-foreground: ${e.submitForeground};
  --submit-foreground-hover: ${e.submitForegroundHover};

  --cancel-background: ${e.cancelBackground};
  --cancel-background-hover: ${e.cancelBackgroundHover};
  --cancel-border: ${e.cancelBorder};
  --cancel-outline-focus: ${e.cancelOutlineFocus};
  --cancel-foreground: ${e.cancelForeground};
  --cancel-foreground-hover: ${e.cancelForegroundHover};

  --input-background: ${e.inputBackground};
  --input-foreground: ${e.inputForeground};
  --input-border: ${e.inputBorder};
  --input-outline-focus: ${e.inputOutlineFocus};

  --form-border-radius: ${e.formBorderRadius};
  --form-content-border-radius: ${e.formContentBorderRadius};
  `}function CE(e,t,n){const r=e.createElement("style");return r.textContent=`
:host {
  --bottom: 1rem;
  --right: 1rem;
  --top: auto;
  --left: auto;
  --z-index: 100000;
  --font-family: ${n.light.fontFamily};
  --font-size: ${n.light.fontSize};

  position: fixed;
  left: var(--left);
  right: var(--right);
  bottom: var(--bottom);
  top: var(--top);
  z-index: var(--z-index);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${va(t==="dark"?n.dark:n.light)}
}

${t==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${va(n.dark)}
  }
}`:""}
}`,r}function RE({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const s=wt.document,i=s.createElement("div");i.id=e;const o=i.attachShadow({mode:"open"});return o.appendChild(CE(s,t,{dark:n,light:r})),o.appendChild(kE(s)),{shadow:o,host:i}}catch{throw m.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function xE(e,t,n){if(!e)return;const r=()=>{e&&e.showError("There was a problem submitting feedback, please wait and try again.")};e.hideError();try{return await IE({...t,source:Nl},n)}catch(s){ot&&m.error(s),r()}}function ye(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const At=20,AE="http://www.w3.org/2000/svg";function ME(){const e=a=>wt.document.createElementNS(AE,a),t=ye(e("svg"),{class:"feedback-icon",width:`${At}`,height:`${At}`,viewBox:`0 0 ${At} ${At}`,fill:"none"}),n=ye(e("g"),{clipPath:"url(#clip0_57_80)"}),r=ye(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),i=ye(e("clipPath"),{id:"clip0_57_80"}),o=ye(e("rect"),{width:`${At}`,height:`${At}`,fill:"white"});return i.appendChild(o),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(o),{get el(){return t}}}function Q(e,t,...n){const s=wt.document.createElement(e);t&&Object.entries(t).forEach(([i,o])=>{i==="className"&&typeof o=="string"?s.setAttribute("class",o):typeof o=="boolean"&&o?s.setAttribute(i,""):typeof o=="string"?s.setAttribute(i,o):i.startsWith("on")&&typeof o=="function"&&s.addEventListener(i.substring(2).toLowerCase(),o)});for(const i of n)Ll(s,i);return s}function Ll(e,t){const n=wt.document;if(!(typeof t>"u"||t===null))if(Array.isArray(t))for(const r of t)Ll(e,r);else t===!1||(typeof t=="string"?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function OE({buttonLabel:e,onClick:t}){function n(s){t&&t(s)}const r=Q("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},ME().el,e?Q("span",{className:"widget__actor__text"},e):null);return r.addEventListener("click",n),{get el(){return r},show:()=>{r.classList.remove("widget__actor--hidden"),r.setAttribute("aria-hidden","false")},hide:()=>{r.classList.add("widget__actor--hidden"),r.setAttribute("aria-hidden","true")}}}function NE({label:e}){return{el:Q("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}function Ss(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function DE({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:s,messagePlaceholder:i,isRequiredLabel:o,cancelButtonLabel:a,submitButtonLabel:c,showName:u,showEmail:l,isNameRequired:d,isEmailRequired:f,defaultName:p,defaultEmail:h,onCancel:g,onSubmit:y}){const{el:_}=NE({label:c});function S($){if($.preventDefault(),$.target instanceof HTMLFormElement)try{if(y){const J=new FormData($.target),se={name:Ss(J,"name"),email:Ss(J,"email"),message:Ss(J,"message")};y(se)}}catch{}}const b=Q("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});function T($){b.textContent=$,b.classList.remove("form__error-container--hidden"),b.setAttribute("aria-hidden","false")}function E(){b.textContent="",b.classList.add("form__error-container--hidden"),b.setAttribute("aria-hidden","true")}const I=Q("input",{id:"name",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:p}),A=Q("input",{id:"email",type:l?"text":"hidden","aria-hidden":l?"false":"true",name:"email",required:f,className:"form__input",placeholder:r,value:h}),D=Q("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:i}),w=Q("button",{type:"button",className:"btn btn--default","aria-label":a,onClick:$=>{g&&g($)}},a),R=Q("form",{className:"form",onSubmit:S},[b,u&&Q("label",{htmlFor:"name",className:"form__label"},[Q("span",{className:"form__label__text"},e,d&&Q("span",{className:"form__label__text--required"},` ${o}`)),I]),!u&&I,l&&Q("label",{htmlFor:"email",className:"form__label"},[Q("span",{className:"form__label__text"},n,f&&Q("span",{className:"form__label__text--required"},` ${o}`)),A]),!l&&A,Q("label",{htmlFor:"message",className:"form__label"},[Q("span",{className:"form__label__text"},s,Q("span",{className:"form__label__text--required"},` ${o}`)),D]),Q("div",{className:"btn-group"},[_,w])]);return{get el(){return R},showError:T,hideError:E}}const LE="http://www.w3.org/2000/svg";function PE({colorScheme:e}){const t=o=>wt.document.createElementNS(LE,o),n=ye(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=ye(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const s=t("defs"),i=t("style");return i.textContent=`
    path {
      fill: ${e==="dark"?"#fff":"#362d59"};
    }`,e==="system"&&(i.textContent+=`
    @media (prefers-color-scheme: dark) {
      path: {
        fill: '#fff';
      }
    }
    `),s.append(i),n.append(s),{get el(){return n}}}function $E({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:s,isEmailRequired:i,colorScheme:o,defaultName:a,defaultEmail:c,onClosed:u,onCancel:l,onSubmit:d,...f}){let p=null;function h(){g(),u&&u()}function g(){p&&(p.open=!1)}function y(){p&&(p.open=!0)}function _(){return p&&p.open===!0||!1}const{el:S,showError:b,hideError:T}=DE({showEmail:r,showName:n,isEmailRequired:i,isNameRequired:s,defaultName:a,defaultEmail:c,onSubmit:d,onCancel:l,...f});return p=Q("dialog",{className:"dialog",open:!0,onClick:h},Q("div",{className:"dialog__content",onClick:E=>{E.stopPropagation()}},Q("h2",{className:"dialog__header"},e,t&&Q("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},PE({colorScheme:o}).el)),S)),{get el(){return p},showError:b,hideError:T,open:y,close:g,checkIsOpen:_}}const Qn=16,Ta=17,FE="http://www.w3.org/2000/svg";function BE(){const e=c=>wt.document.createElementNS(FE,c),t=ye(e("svg"),{class:"success-icon",width:`${Qn}`,height:`${Ta}`,viewBox:`0 0 ${Qn} ${Ta}`,fill:"none"}),n=ye(e("g"),{clipPath:"url(#clip0_57_156)"}),r=ye(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=ye(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const i=e("defs"),o=ye(e("clipPath"),{id:"clip0_57_156"}),a=ye(e("rect"),{width:`${Qn}`,height:`${Qn}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(a),i.appendChild(o),t.appendChild(i).appendChild(o).appendChild(a),{get el(){return t}}}function HE({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=Q("div",{className:"success-message",onClick:n},BE().el,e);return{el:r,remove:n}}function Ia({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let s,i,o=!1;function a(){if(e)try{const _=HE({message:n.successMessageText,onRemove:()=>{S&&clearTimeout(S),l()}});if(!_.el)throw new Error("Unable to show success message");e.appendChild(_.el);const S=setTimeout(()=>{_&&_.remove()},5e3)}catch(_){m.error(_)}}async function c(_){if(!i)return;const S=[];if(n.isNameRequired&&!_.name&&S.push(n.nameLabel),n.isEmailRequired&&!_.email&&S.push(n.emailLabel),_.message||S.push(n.messageLabel),S.length>0){i.showError(`Please enter in the following required fields: ${S.join(", ")}`);return}if(!await xE(i,_)){n.onSubmitError&&n.onSubmitError();return}g(),a(),n.onSubmitSuccess&&n.onSubmitSuccess()}function u(){const _=M(),S=_&&_.getIntegrationByName&&_.getIntegrationByName("Replay");S&&S.flush().catch(b=>{ot&&m.error(b)})}function l(){s&&s.show()}function d(){s&&s.hide()}function f(){s&&s.el&&s.el.remove()}function p(){try{if(i){i.open(),o=!0,n.onFormOpen&&n.onFormOpen(),u();return}const _=n.useSentryUser,S=ae(),b=S&&S.getUser();if(i=$E({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:_&&b&&b[_.name]||"",defaultEmail:_&&b&&b[_.email]||"",onClosed:()=>{l(),o=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{h(),l()},onSubmit:c}),!i.el)throw new Error("Unable to open Feedback dialog");e.appendChild(i.el),d(),n.onFormOpen&&n.onFormOpen(),u()}catch(_){m.error(_)}}function h(){i&&(i.close(),o=!1,n.onFormClose&&n.onFormClose())}function g(){if(i){h();const _=i.el;_&&_.remove(),i=void 0}}function y(){o||p(),d()}return r?r.addEventListener("click",y):t&&(s=OE({buttonLabel:n.buttonLabel,onClick:y}),s.el&&e.appendChild(s.el)),{get actor(){return s},get dialog(){return i},showActor:l,hideActor:d,removeActor:f,openDialog:p,closeDialog:h,removeDialog:g}}const Zn=wt.document,XT=(e=>new Zr(e));class Zr{static __initStatic(){this.id="Feedback"}constructor({autoInject:t=!0,id:n="sentry-feedback",isEmailRequired:r=!1,isNameRequired:s=!1,showBranding:i=!0,showEmail:o=!0,showName:a=!0,useSentryUser:c={email:"email",name:"username"},themeDark:u,themeLight:l,colorScheme:d="system",buttonLabel:f=lE,cancelButtonLabel:p=dE,submitButtonLabel:h=fE,formTitle:g=pE,emailPlaceholder:y=hE,emailLabel:_=mE,messagePlaceholder:S=gE,messageLabel:b=_E,namePlaceholder:T=yE,nameLabel:E=SE,isRequiredLabel:I=bE,successMessageText:A=EE,onFormClose:D,onFormOpen:w,onSubmitError:R,onSubmitSuccess:$}={}){this.name=Zr.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:t,showBranding:i,id:n,isEmailRequired:r,isNameRequired:s,showEmail:o,showName:a,useSentryUser:c,colorScheme:d,themeDark:{...ba.dark,...u},themeLight:{...ba.light,...l},buttonLabel:f,cancelButtonLabel:p,submitButtonLabel:h,formTitle:g,emailLabel:_,emailPlaceholder:y,messageLabel:b,messagePlaceholder:S,nameLabel:E,namePlaceholder:T,isRequiredLabel:I,successMessageText:A,onFormClose:D,onFormOpen:w,onSubmitError:R,onSubmitSuccess:$}}setupOnce(){if(Rs())try{this._cleanupWidgetIfExists();const{autoInject:t}=this.options;if(!t)return;this._createWidget(this.options)}catch(t){ot&&m.error(t)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(t,n){try{const r=Ea(this.options,n||{});return this._ensureShadowHost(r,({shadow:s})=>{const i=typeof t=="string"?Zn.querySelector(t):typeof t.addEventListener=="function"?t:null;if(!i)return ot&&m.error("[Feedback] Unable to attach to target element"),null;const o=Ia({shadow:s,options:r,attachTo:i});return this._widgets.add(o),this._widget||(this._widget=o),o})}catch(r){return ot&&m.error(r),null}}createWidget(t){try{return this._createWidget(Ea(this.options,t||{}))}catch(n){return ot&&m.error(n),null}}removeWidget(t){if(!t)return!1;try{if(this._widgets.has(t))return t.removeActor(),t.removeDialog(),this._widgets.delete(t),this._widget===t&&(this._widget=null),!0}catch(n){ot&&m.error(n)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const t=Zn.querySelector(`#${this.options.id}`);t&&t.remove()}_createWidget(t){return this._ensureShadowHost(t,({shadow:n})=>{const r=Ia({shadow:n,options:t});return!this._hasInsertedActorStyles&&r.actor&&(n.appendChild(wE(Zn)),this._hasInsertedActorStyles=!0),this._widgets.add(r),this._widget||(this._widget=r),r})}_ensureShadowHost(t,n){let r=!1;if(!this._shadow||!this._host){const{id:i,colorScheme:o,themeLight:a,themeDark:c}=t,{shadow:u,host:l}=RE({id:i,colorScheme:o,themeLight:a,themeDark:c});this._shadow=u,this._host=l,r=!0}this._host.dataset.sentryFeedbackColorscheme=t.colorScheme;const s=n({shadow:this._shadow,host:this._host});return r&&Zn.body.appendChild(this._host),s}}Zr.__initStatic();const Pl="CaptureConsole",UE=((e={})=>{const t=e.levels||ir;return{name:Pl,setupOnce(){},setup(n){"console"in O&&Ya(({args:r,level:s})=>{M()!==n||!t.includes(s)||WE(r,s)})}}}),jE=UE;ne(Pl,jE);function WE(e,t){const n={level:nc(t),extra:{arguments:e}};Et(r=>{if(r.addEventProcessor(o=>(o.logger="console",pt(o,{handled:!1,type:"console"}),o)),t==="assert"&&e[0]===!1){const o=`Assertion failed: ${sr(e.slice(1)," ")||"console.assert"}`;r.setExtra("arguments",e.slice(1)),Os(o,n);return}const s=e.find(o=>o instanceof Error);if(t==="error"&&s){Ar(s,n);return}const i=sr(e," ");Os(i,n)})}const $l="Debug",zE=((e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:$l,setupOnce(){},setup(n){n.on&&n.on("beforeSendEvent",(r,s)=>{if(t.debugger)debugger;Ze(()=>{t.stringify?(console.log(JSON.stringify(r,null,2)),s&&Object.keys(s).length&&console.log(JSON.stringify(s,null,2))):(console.log(r),s&&Object.keys(s).length&&console.log(s))})})}}}),GE=zE;ne($l,GE);const Zt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Fl="Dedupe",qE=(()=>{let e;return{name:Fl,setupOnce(){},processEvent(t){if(t.type)return t;try{if(VE(t,e))return Zt&&m.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),YE=qE;ne(Fl,YE);function VE(e,t){return t?!!(XE(e,t)||KE(e,t)):!1}function XE(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Hl(e,t)||!Bl(e,t))}function KE(e,t){const n=wa(t),r=wa(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Hl(e,t)||!Bl(e,t))}function Bl(e,t){let n=ka(e),r=ka(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function Hl(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function wa(e){return e.exception&&e.exception.values&&e.exception.values[0]}function ka(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}const Ul="ExtraErrorData",JE=((e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:Ul,setupOnce(){},processEvent(r,s){return ZE(r,s,t,n)}}}),QE=JE;ne(Ul,QE);function ZE(e,t={},n,r){if(!t.originalException||!Ht(t.originalException))return e;const s=t.originalException.name||t.originalException.constructor.name,i=ev(t.originalException,r);if(i){const o={...e.contexts},a=Te(i,n);return ft(a)&&(He(a,"__sentry_skip_normalization__",!0),o[s]=a),{...e,contexts:o}}return e}function ev(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const s of Object.keys(e)){if(n.indexOf(s)!==-1)continue;const i=e[s];r[s]=Ht(i)?i.toString():i}if(t&&e.cause!==void 0&&(r.cause=Ht(e.cause)?e.cause.toString():e.cause),typeof e.toJSON=="function"){const s=e.toJSON();for(const i of Object.keys(s)){const o=s[i];r[i]=Ht(o)?o.toString():o}}return r}catch(n){Zt&&m.error("Unable to extract extra data from the Error object:",n)}return null}const tv=O,jl="ReportingObserver",Ca=new WeakMap,nv=((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(r){if(Ca.has(M()))for(const s of r)Et(i=>{i.setExtra("url",s.url);const o=`ReportingObserver [${s.type}]`;let a="No details available";if(s.body){const c={};for(const u in s.body)c[u]=s.body[u];if(i.setExtra("body",c),s.type==="crash"){const u=s.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=s.body.message||a}Os(`${o}: ${a}`)})}return{name:jl,setupOnce(){if(!Ld())return;new tv.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){Ca.set(r,!0)}}}),rv=nv;ne(jl,rv);const Wl="RewriteFrames",sv=((e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(o=>{if(!o.filename)return o;const a=/^[a-zA-Z]:\\/.test(o.filename)||o.filename.includes("\\")&&!o.filename.includes("/"),c=/^\//.test(o.filename);if(a||c){const u=a?o.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):o.filename,l=t?nf(t,u):rf(u);o.filename=`${n}${l}`}return o});function s(o){try{return{...o,exception:{...o.exception,values:o.exception.values.map(a=>({...a,...a.stacktrace&&{stacktrace:i(a.stacktrace)}}))}}}catch{return o}}function i(o){return{...o,frames:o&&o.frames&&o.frames.map(a=>r(a))}}return{name:Wl,setupOnce(){},processEvent(o){let a=o;return o.exception&&Array.isArray(o.exception.values)&&(a=s(a)),a}}}),iv=sv;ne(Wl,iv);const zl="SessionTiming",ov=(()=>{const e=Date.now();return{name:zl,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}}),av=ov;ne(zl,av);const Gl="HttpClient",cv=((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:Gl,setupOnce(){},setup(n){_v(n,t),yv(n,t)}}}),uv=cv;ne(Gl,uv);function lv(e,t,n,r){if(Yl(e,n.status,n.url)){const s=Sv(t,r);let i,o,a,c;Xl()&&([{headers:i,cookies:a},{headers:o,cookies:c}]=[{cookieHeader:"Cookie",obj:s},{cookieHeader:"Set-Cookie",obj:n}].map(({cookieHeader:l,obj:d})=>{const f=pv(d.headers);let p;try{const h=f[l]||f[l.toLowerCase()]||void 0;h&&(p=ql(h))}catch{Zt&&m.log(`Could not extract cookies from header ${l}`)}return{headers:f,cookies:p}}));const u=Vl({url:s.url,method:s.method,status:n.status,requestHeaders:i,responseHeaders:o,requestCookies:a,responseCookies:c});Mr(u)}}function dv(e,t,n,r){if(Yl(e,t.status,t.responseURL)){let s,i,o;if(Xl()){try{const c=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;c&&(i=ql(c))}catch{Zt&&m.log("Could not extract cookies from response headers")}try{o=hv(t)}catch{Zt&&m.log("Could not extract headers from response")}s=r}const a=Vl({url:t.responseURL,method:n,status:t.status,requestHeaders:s,responseHeaders:o,responseCookies:i});Mr(a)}}function fv(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function ql(e){return e.split("; ").reduce((t,n)=>{const[r,s]=n.split("=");return t[r]=s,t},{})}function pv(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function hv(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return n[s]=i,n},{}):{}}function mv(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function gv(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function _v(e,t){Ja()&&kr(n=>{if(M()!==e)return;const{response:r,args:s}=n,[i,o]=s;r&&lv(t,i,r,o)})}function yv(e,t){"XMLHttpRequest"in O&&Cr(n=>{if(M()!==e)return;const r=n.xhr,s=r[$e];if(!s)return;const{method:i,request_headers:o}=s;try{dv(t,r,i,o)}catch(a){Zt&&m.warn("Error while extracting response event form XHR response",a)}})}function Yl(e,t,n){return gv(e.failedRequestStatusCodes,t)&&mv(e.failedRequestTargets,n)&&!Gc(n,M())}function Vl(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:fv(e.responseHeaders)}}};return pt(n,{type:"http.client",handled:!1}),n}function Sv(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function Xl(){const e=M();return e?!!e.getOptions().sendDefaultPii:!1}const bs=O,bv=7,Kl="ContextLines",Ev=((e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:bv;return{name:Kl,setupOnce(){},processEvent(n){return Tv(n,t)}}}),vv=Ev;ne(Kl,vv);function Tv(e,t){const n=bs.document,r=bs.location&&Gt(bs.location.href);if(!n||!r)return e;const s=e.exception&&e.exception.values;if(!s||!s.length)return e;const i=n.documentElement.innerHTML;if(!i)return e;const o=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return s.forEach(a=>{const c=a.stacktrace;c&&c.frames&&(c.frames=c.frames.map(u=>Iv(u,o,r,t)))}),e}function Iv(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||xd(t,e,r),e}function wn(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function wv(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=wn(n);return s=>r.then(i=>s(i.transaction(t,"readwrite").objectStore(t)))}function Jl(e){return wn(e.getAllKeys())}function kv(e,t,n){return e(r=>Jl(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.max(...s,0)+1),wn(r.transaction)}))}function Cv(e){return e(t=>Jl(t).then(n=>{if(n.length!==0)return wn(t.get(n[0])).then(r=>(t.delete(n[0]),wn(t.transaction).then(()=>r)))}))}function Rv(e){let t;function n(){return t==null&&(t=wv(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async r=>{try{const s=await uc(r,e.textEncoder);await kv(n(),s,e.maxQueueSize||30)}catch{}},pop:async()=>{try{const r=await Cv(n());if(r)return gf(r,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch{}}}}function xv(e){return t=>e({...t,createStore:Rv})}function KT(e){return xv(Vp(e))}const Ra=1e6,rr=String(0),Av="main";let Ql="",Zl="",ed="",Js=x.navigator&&x.navigator.userAgent||"",td="";const Mv=x.navigator&&x.navigator.language||x.navigator&&x.navigator.languages&&x.navigator.languages[0]||"";function Ov(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const xa=x.navigator&&x.navigator.userAgentData;Ov(xa)&&xa.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(Ql=e.platform||"",ed=e.architecture||"",td=e.model||"",Zl=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];Js=`${t.brand} ${t.version}`}}).catch(e=>{});function Nv(e){return!("thread_metadata"in e)}function Dv(e){return Nv(e)?$v(e):e}function Lv(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return typeof t=="string"&&t.length!==32&&B&&m.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function Pv(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=Lv(r),i=Dv(n),o=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:Date.now()),a=typeof r.timestamp=="number"?r.timestamp*1e3:Date.now();return{event_id:e,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Rn,runtime:{name:"javascript",version:x.navigator.userAgent},os:{name:Ql,version:Zl,build_number:Js},device:{locale:Mv,model:td,manufacturer:Js,architecture:ed,is_emulator:!1},debug_meta:{images:Hv(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||W(),trace_id:s,active_thread_id:rr,relative_start_ns:"0",relative_end_ns:((a-o)*1e6).toFixed(0)}]}}function nd(e){return e.op==="pageload"}function $v(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[rr]:{name:Av}}};if(!e.samples.length)return r;const s=e.samples[0].timestamp,i=typeof performance.timeOrigin=="number"?performance.timeOrigin:le||0,o=i-(le||i);for(let a=0;a<e.samples.length;a++){const c=e.samples[a];if(c.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[a]={elapsed_since_start_ns:((c.timestamp+o-s)*Ra).toFixed(0),stack_id:t,thread_id:rr};continue}let u=e.stacks[c.stackId];const l=[];for(;u;){l.push(u.frameId);const f=e.frames[u.frameId];r.frames[u.frameId]===void 0&&(r.frames[u.frameId]={function:f.name,abs_path:typeof f.resourceId=="number"?e.resources[f.resourceId]:void 0,lineno:f.line,colno:f.column}),u=u.parentId===void 0?void 0:e.stacks[u.parentId]}const d={elapsed_since_start_ns:((c.timestamp+o-s)*Ra).toFixed(0),stack_id:n,thread_id:rr};r.stacks[n]=l,r.samples[a]=d,n++}return r}function Fv(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function Bv(e){const t=[];return qt(e,(n,r)=>{if(r==="transaction")for(let s=1;s<n.length;s++){const i=n[s];i&&i.contexts&&i.contexts.profile&&i.contexts.profile.profile_id&&t.push(n[s])}}),t}const Aa=new WeakMap;function Hv(e){const t=O._sentryDebugIds;if(!t)return[];const n=M(),r=n&&n.getOptions(),s=r&&r.stackParser;if(!s)return[];let i;const o=Aa.get(s);o?i=o:(i=new Map,Aa.set(s,i));const a=Object.keys(t).reduce((u,l)=>{let d;const f=i.get(l);f?d=f:(d=s(l),i.set(l,d));for(let p=d.length-1;p>=0;p--){const h=d[p],g=h&&h.filename;if(h&&g){u[g]=t[l];break}}return u},{}),c=[];for(const u of e)u&&a[u]&&c.push({type:"sourcemap",code_file:u,debug_id:a[u]});return c}function Uv(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(B&&m.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(B&&m.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function jv(e){return e.samples.length<2?(B&&m.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(B&&m.log("[Profiling] Discarding profile because it contains no frames"),!1)}let rd=!1;const sd=3e4;function Wv(e){return typeof e=="function"}function zv(){const e=x.Profiler;if(!Wv(e)){B&&m.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(sd/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{B&&(m.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),m.log("[Profiling] Disabling profiling for current user session.")),rd=!0}}function Qs(e){if(rd)return B&&m.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return B&&m.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=M(),n=t&&t.getOptions();if(!n)return B&&m.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return Uv(r)?r?(r===!0?!0:Math.random()<r)?!0:(B&&m.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(B&&m.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(B&&m.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function Gv(e,t,n,r){return jv(n)?Pv(e,t,n,r):null}const lt=new Map;function qv(){return lt.size}function Yv(e){const t=lt.get(e);return t&&lt.delete(e),t}function Vv(e,t){if(lt.set(e,t),lt.size>30){const n=lt.keys().next().value;lt.delete(n)}}function JT(e){return e?Qs(e)?Zs(e):e:(B&&m.log("[Profiling] Transaction is undefined, skipping profiling"),e)}function Zs(e){let t;nd(e)&&(t=bt()*1e3);const n=zv();if(!n)return e;B&&m.log(`[Profiling] started profiling transaction: ${z(e).description}`);const r=W();async function s(){return!e||!n?null:n.stop().then(c=>(i&&(x.clearTimeout(i),i=void 0),B&&m.log(`[Profiling] stopped profiling of transaction: ${z(e).description}`),c?(Vv(r,c),null):(B&&m.log(`[Profiling] profiler returned null profile for: ${z(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null))).catch(c=>(B&&m.log("[Profiling] error while stopping profiler:",c),null))}let i=x.setTimeout(()=>{B&&m.log("[Profiling] max profile duration elapsed, stopping profiling for:",z(e).description),s()},sd);const o=e.end.bind(e);function a(){return e?(s().then(()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),o()},()=>{o()}),e):o()}return e.end=a,e}const id="BrowserProfiling",Xv=(()=>({name:id,setupOnce(){},setup(e){const n=ae().getTransaction();if(n&&nd(n)&&Qs(n)&&Zs(n),typeof e.on!="function"){m.warn("[Profiling] Client does not support hooks, profiling will be disabled");return}e.on("startTransaction",r=>{Qs(r)&&Zs(r)}),e.on("beforeEnvelope",r=>{if(!qv())return;const s=Bv(r);if(!s.length)return;const i=[];for(const o of s){const a=o&&o.contexts,c=a&&a.profile&&a.profile.profile_id,u=a&&a.profile&&a.profile.start_timestamp;if(typeof c!="string"){B&&m.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!c){B&&m.log("[Profiling] cannot find profile for a transaction without a profile context");continue}a&&a.profile&&delete a.profile;const l=Yv(c);if(!l){B&&m.log(`[Profiling] Could not retrieve profile for transaction: ${c}`);continue}const d=Gv(c,u,l,o);d&&i.push(d)}Fv(r,i)})}})),Kv=Xv,QT=ne(id,Kv);let od={};x.Sentry&&x.Sentry.Integrations&&(od=x.Sentry.Integrations);const ZT={...od,...$h,...k_},ad=Ym,Jv=Su,Qv=Oe,Zv=Kf,eT=Qf,tT=gi,nT=mi,rT=yu,sT=bn,iT=Tt,oT=Gt,aT=ac,cT=Mc,uT=vi,lT=Sn,dT=Ps,fT={BrowserTracing:ad,Apollo:zr,Express:Fr,GraphQL:Wr,Mongo:Ur,Mysql:Hr,Postgres:Br,Prisma:jr};(typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__)&&Su();const eI=Object.freeze(Object.defineProperty({__proto__:null,BROWSER_TRACING_INTEGRATION_ID:rT,BrowserTracing:ad,IdleTransaction:cT,Integrations:fT,Span:nT,SpanStatus:dT,TRACEPARENT_REGEXP:aT,Transaction:tT,addExtensionMethods:Jv,defaultRequestInstrumentationOptions:sT,extractTraceparentData:Zv,getActiveTransaction:Qv,hasTracingEnabled:iT,instrumentOutgoingRequests:uT,spanStatusfromHttpCode:eT,startIdleTransaction:lT,stripUrlQueryAndFragment:oT},Symbol.toStringTag,{value:"Module"}));export{Xc as $,Fe as A,et as B,Lp as C,wf as D,MT as E,Th as F,_i as G,Ec as H,ZT as I,Mr as J,Os as K,uo as L,DT as M,TT as N,pT as O,RT as P,Wc as Q,_c as R,me as S,Kf as T,vT as U,Jc as V,x as W,Oe as X,G as Y,Ds as Z,Tc as _,nh as a,vv as a$,wT as a0,IT as a1,po as a2,OT as a3,LT as a4,ch as a5,NT as a6,Bf as a7,Wp as a8,mT as a9,hg as aA,GT as aB,T_ as aC,jT as aD,I_ as aE,WT as aF,zT as aG,Gg as aH,Iu as aI,e_ as aJ,i_ as aK,Au as aL,f_ as aM,Du as aN,g_ as aO,Pu as aP,S_ as aQ,Fu as aR,Jr as aS,YT as aT,qT as aU,VT as aV,uE as aW,Zr as aX,XT as aY,IE as aZ,jE as a_,hT as aa,pi as ab,up as ac,_T as ad,gT as ae,yT as af,Qf as ag,co as ah,ep as ai,CT as aj,ET as ak,kT as al,ST as am,gg as an,Sg as ao,Eg as ap,Ag as aq,jg as ar,Wg as as,Dg as at,FT as au,BT as av,$g as aw,lg as ax,dg as ay,Eu as az,z as b,GE as b0,YE as b1,QE as b2,uv as b3,rv as b4,iv as b5,av as b6,Ym as b7,bn as b8,vi as b9,KT as ba,JT as bb,QT as bc,Kv as bd,eI as be,UT as c,Et as d,Ht as e,Ar as f,M as g,qf as h,HT as i,ae as j,He as k,m as l,$T as m,Qm as n,Zm as o,ct as p,Wn as q,Dr as r,Ic as s,bt as t,dr as u,ur as v,bT as w,fh as x,Ns as y,Dt as z};
//# sourceMappingURL=sentry-vendor-CBqfcnYR.js.map
